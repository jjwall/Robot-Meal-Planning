!function(t){var e={};function o(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=1)}([function(t){t.exports={next_level:"level2",command_palette:{block_width:5,block_height:5},command_blocks:["start","move","angle"],flow_blocks:["up","down","left","right"]}},function(t,e,o){"use strict";o.r(e);var n,a,i=o(0),s=function(){function t(t,e,o,n,a,i){this.GameState=t,this.X=e,this.Y=o,this.H=n,this.W=a,this.Color=i,this.gameState=t,this.x=e,this.y=o,this.h=n,this.w=a,this.color=i}return t.prototype.draw=function(){},t.prototype.update=function(){},t}();!function(t){t[t.Empty=0]="Empty",t[t.Start=1]="Start",t[t.Move=2]="Move",t[t.Angle=3]="Angle",t[t.Scan=4]="Scan",t[t.Laser=5]="Laser",t[t.Grapple=6]="Grapple"}(n||(n={})),function(t){t[t.Empty=0]="Empty",t[t.Up=1]="Up",t[t.Down=2]="Down",t[t.Left=3]="Left",t[t.Right=4]="Right",t[t.ConditionalLeftRight=5]="ConditionalLeftRight",t[t.ConditionalLeftUp=6]="ConditionalLeftUp",t[t.ConditionalLeftDown=7]="ConditionalLeftDown",t[t.ConditionalUpRight=8]="ConditionalUpRight",t[t.ConditionalUpDown=9]="ConditionalUpDown",t[t.ConditionalDownRight=10]="ConditionalDownRight"}(a||(a={}));var r=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),c=function(t){function e(e,o,a,i,s,r,c){var h=t.call(this,e,o,a,i,s,r)||this;switch(h.mouseDown=!0,h.set=!1,h.type=c,h.image=new Image,c){case n.Start:h.image.src="data/textures/StartBlock.png";break;case n.Move:h.image.src="data/textures/MoveBlock.png";break;case n.Angle:h.image.src="data/textures/AngleBlock.png"}return h.gameState.blocks.push(h),h}return r(e,t),e.prototype.update=function(){if(this.mouseDown&&(this.x=this.gameState.mouseX-this.w/2,this.y=this.gameState.mouseY-this.h/2,this.set=!1),!this.mouseDown&&!this.set){var t=this.gameState.blocks.indexOf(this);this.gameState.blocks.splice(t,1)}},e.prototype.draw=function(){this.gameState.ctx.fillStyle=this.color,this.gameState.ctx.fillRect(this.x,this.y,this.w,this.h),this.gameState.ctx.translate(this.x,this.y),this.gameState.ctx.drawImage(this.image,0,0),this.gameState.ctx.translate(-this.x,-this.y)},e}(s),h=function(t){function e(e,o,a,i,s,r,c){var h=t.call(this,e,o,a,i,s,r)||this;switch(h.mouseDown=!1,h.type=c,h.image=new Image,c){case n.Start:h.image.src="data/textures/StartBlock.png";break;case n.Move:h.image.src="data/textures/MoveBlock.png";break;case n.Angle:h.image.src="data/textures/AngleBlock.png"}return h.gameState.blocks.push(h),h}return r(e,t),e.prototype.update=function(){this.mouseDown&&(this.mouseDown=!1,new c(this.gameState,this.x,this.y,this.h,this.w,this.Color,this.type))},e.prototype.draw=function(){this.gameState.ctx.fillStyle=this.color,this.gameState.ctx.fillRect(this.x,this.y,this.w,this.h),this.gameState.ctx.translate(this.x,this.y),this.gameState.ctx.drawImage(this.image,0,0),this.gameState.ctx.translate(-this.x,-this.y)},e}(s),l=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),u=function(t){function e(e,o,n,i,s,r,c){var h=t.call(this,e,o,n,i,s,r)||this;switch(h.gameState=e,h.type=c,h.mouseDown=!0,h.set=!1,h.image=new Image,c){case a.Up:h.image.src="data/textures/UpArrow.png";break;case a.Down:h.image.src="data/textures/DownArrow.png";break;case a.Left:h.image.src="data/textures/LeftArrow.png";break;case a.Right:h.image.src="data/textures/RightArrow.png"}return h.gameState.blocks.push(h),h}return l(e,t),e.prototype.update=function(){if(this.mouseDown&&(this.x=this.gameState.mouseX-this.w/2,this.y=this.gameState.mouseY-this.h/2,this.set=!1),!this.mouseDown&&!this.set){var t=this.gameState.blocks.indexOf(this);this.gameState.blocks.splice(t,1)}},e.prototype.draw=function(){this.gameState.ctx.translate(this.x,this.y),this.gameState.ctx.drawImage(this.image,0,0),this.gameState.ctx.translate(-this.x,-this.y),this.gameState.ctx.strokeStyle=this.color,this.gameState.ctx.rect(this.x,this.y,this.w,this.h)},e}(s),f=function(t){function e(e,o,n,i,s,r,c){var h=t.call(this,e,o,n,i,s,r)||this;switch(h.type=c,h.mouseDown=!1,h.image=new Image,c){case a.Up:h.image.src="data/textures/UpArrow.png";break;case a.Down:h.image.src="data/textures/DownArrow.png";break;case a.Left:h.image.src="data/textures/LeftArrow.png";break;case a.Right:h.image.src="data/textures/RightArrow.png"}return h.gameState.blocks.push(h),h}return l(e,t),e.prototype.update=function(){this.mouseDown&&(this.mouseDown=!1,new u(this.gameState,this.x,this.y,this.h,this.w,this.Color,this.type))},e.prototype.draw=function(){this.gameState.ctx.translate(this.x,this.y),this.gameState.ctx.drawImage(this.image,0,0),this.gameState.ctx.translate(-this.x,-this.y),this.gameState.ctx.strokeStyle=this.color,this.gameState.ctx.rect(this.x,this.y,this.w,this.h)},e}(s),m=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),p=function(t){function e(e,o,i,s,r,c,h,l){var u=t.call(this,e,o,i,s,r,l)||this;return u.r=c,u.c=h,u.commandType=n.Empty,u.flowType=a.Empty,u.gameState.blocks.push(u),u}return m(e,t),e.prototype.update=function(){var t=this;this.gameState.blocks.forEach(function(e){(e instanceof c||e instanceof u)&&!1===e.mouseDown&&e.x<t.x+t.w&&e.x+e.w>t.x&&e.y<t.y+t.h&&e.h+e.y>t.y&&(t.commandType===n.Empty&&e instanceof c?(e.x=t.x,e.y=t.y,e.set=!0,t.commandType=e.type):t.flowType===a.Empty&&e instanceof u&&(e.x=t.x,e.y=t.y,e.set=!0,t.flowType=e.type))})},e.prototype.draw=function(){this.gameState.ctx.fillStyle=this.color,this.gameState.ctx.fillRect(this.x,this.y,this.w,this.h)},e}(s);o.d(e,"GameState",function(){return g});var g=function(){return function(t){this.canvas=t&&t.canvas||document.getElementById("gameScreen"),this.ctx=t&&t.ctx||this.canvas.getContext("2d"),this.rect=t&&t.rect||this.canvas.getBoundingClientRect(),this.blocks=t&&t.blocks||[],this.mouseX=t&&t.mouseX||0,this.mouseY=t&&t.mouseY||0,this.commandControl=t&&t.commandControl||!0,this.flowControl=t&&t.flowControl||!1}}(),w=new g;!function(t,e,o){for(var i=5,s=5,r=0,c=0;c<e.command_palette.block_height;c++){for(var l=0;l<e.command_palette.block_width;l++)new p(t,s,i,50,50,c,l,o),s+=55;i+=55,r=s,s=5}i+=20;for(var u=0;u<e.command_blocks.length;u++){switch(e.command_blocks[u]){case"start":new h(t,s,i,50,50,"thistle",n.Start);break;case"move":new h(t,s,i,50,50,"thistle",n.Move);break;case"angle":new h(t,s,i,50,50,"thistle",n.Angle);break;case"laser":new h(t,s,i,50,50,"green",n.Laser);break;case"scan":new h(t,s,i,50,50,"darkblue",n.Scan);break;case"grapple":new h(t,s,i,50,50,"maroon",n.Grapple)}s+=55}for(s=r+20,i=5,u=0;u<e.flow_blocks.length;u++){switch(e.flow_blocks[u]){case"up":new f(t,s,i,50,50,"yellow",a.Up);break;case"left":new f(t,s,i,50,50,"yellow",a.Left);break;case"right":new f(t,s,i,50,50,"yellow",a.Right);break;case"down":new f(t,s,i,50,50,"yellow",a.Down)}i+=55}}(w,i,"lightblue"),function(t){t.canvas.addEventListener("mousedown",function(){t.blocks.forEach(function(e){t.mouseY>e.y&&t.mouseY<e.y+e.h&&t.mouseX>e.x&&t.mouseX<e.x+e.w&&(e instanceof c&&t.commandControl||e instanceof h&&t.commandControl||e instanceof u&&t.flowControl||e instanceof f&&t.flowControl?e.mouseDown=!0:e instanceof p&&(t.commandControl?e.commandType=n.Empty:t.flowControl&&(e.flowType=a.Empty)))})},!1),t.canvas.addEventListener("mouseup",function(){t.blocks.forEach(function(t){(t instanceof c||t instanceof u)&&t.mouseDown&&(t.mouseDown=!1)})},!1),t.canvas.addEventListener("mousemove",function(e){t.mouseX=(e.clientX-t.rect.left)/(t.rect.right-t.rect.left)*t.canvas.width,t.mouseY=(e.clientY-t.rect.top)/(t.rect.bottom-t.rect.top)*t.canvas.height},!1),window.onkeyup=function(e){if(32===e.keyCode&&(t.flowControl?(t.flowControl=!1,t.commandControl=!0,console.log("Command Control!")):t.commandControl&&(t.commandControl=!1,t.flowControl=!0,console.log("Flow Control!"))),83===e.keyCode){var o=0,i=[],s=-1,r=-1;t.blocks.forEach(function(t){t instanceof p&&t.commandType!==n.Empty&&t.flowType!==a.Empty&&(o++,t.commandType===n.Start&&(s=t.r,r=t.c,i.push([s,r])))});for(var c=0;c<o;c++)t.blocks.forEach(function(t){if(t instanceof p&&t.commandType!==n.Empty&&t.flowType!==a.Empty&&t.r===s&&t.c===r)switch(console.log(n[t.commandType]),t.flowType){case a.Up:s--,i.filter(function(t){return t===[s,r]}).length>0?o++:i.push([s,r]);break;case a.Down:s++,i.filter(function(t){return t===[s,r]}).length>0?o++:i.push([s,r]);break;case a.Right:r++,i.filter(function(t){return t===[s,r]}).length>0?o++:i.push([s,r]);break;case a.Left:r--,i.filter(function(t){return t===[s,r]}).length>0?o++:i.push([s,r])}})}}}(w),setInterval(function(){w.blocks.forEach(function(t){t.update()}),w.ctx.clearRect(0,0,w.canvas.width,w.canvas.height),w.ctx.beginPath(),w.blocks.forEach(function(t){t instanceof u||t.draw()}),w.blocks.forEach(function(t){t instanceof u&&t.draw()}),w.ctx.stroke()},12)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL0VudW1zLnRzIiwid2VicGFjazovLy8uL3NyYy9CYXNlQmxvY2sudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbW1hbmRCbG9jay50cyIsIndlYnBhY2s6Ly8vLi9zcmMvRmxvd0Jsb2NrLnRzIiwid2VicGFjazovLy8uL3NyYy9HcmlkQmxvY2sudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0xldmVsQ3JlYXRvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvU2V0VXBFdmVudExpc3RlbmVycy50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkNvbW1hbmRCbG9ja1R5cGVzIiwiRmxvd0Jsb2NrVHlwZXMiLCJCYXNlQmxvY2siLCJHYW1lU3RhdGUiLCJYIiwiWSIsIkgiLCJXIiwiQ29sb3IiLCJ0aGlzIiwiZ2FtZVN0YXRlIiwieCIsInkiLCJoIiwidyIsImNvbG9yIiwiZHJhdyIsInVwZGF0ZSIsIkNvbW1hbmRCbG9ja19Db21tYW5kQmxvY2siLCJfc3VwZXIiLCJDb21tYW5kQmxvY2siLCJUeXBlIiwiX3RoaXMiLCJtb3VzZURvd24iLCJzZXQiLCJ0eXBlIiwiaW1hZ2UiLCJJbWFnZSIsIlN0YXJ0Iiwic3JjIiwiTW92ZSIsIkFuZ2xlIiwiYmxvY2tzIiwicHVzaCIsIl9fZXh0ZW5kcyIsIm1vdXNlWCIsIm1vdXNlWSIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImN0eCIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwidHJhbnNsYXRlIiwiZHJhd0ltYWdlIiwiQ29tbWFuZEJsb2NrX0NvbW1hbmRCbG9ja0J1dHRvbiIsIkNvbW1hbmRCbG9ja0J1dHRvbiIsIkZsb3dCbG9ja19GbG93QmxvY2siLCJGbG93QmxvY2siLCJVcCIsIkRvd24iLCJMZWZ0IiwiUmlnaHQiLCJGbG93QmxvY2tfZXh0ZW5kcyIsInN0cm9rZVN0eWxlIiwicmVjdCIsIkZsb3dCbG9ja19GbG93QmxvY2tCdXR0b24iLCJGbG93QmxvY2tCdXR0b24iLCJHcmlkQmxvY2tfR3JpZEJsb2NrIiwiR3JpZEJsb2NrIiwiUm93IiwiQ29sdW1uIiwiY29tbWFuZFR5cGUiLCJFbXB0eSIsImZsb3dUeXBlIiwiR3JpZEJsb2NrX2V4dGVuZHMiLCJmb3JFYWNoIiwiYmxvY2siLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwibWFpbl9HYW1lU3RhdGUiLCJvYmoiLCJjYW52YXMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZ2V0Q29udGV4dCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImNvbW1hbmRDb250cm9sIiwiZmxvd0NvbnRyb2wiLCJtYWluX2dhbWVTdGF0ZSIsImxldmVsT2JqIiwicGFsZXR0ZUNvbG9yIiwieU9mZnNldCIsInhPZmZzZXQiLCJtYXhYT2Zmc2V0IiwibGVuZ3RoIiwiTGFzZXIiLCJTY2FuIiwiR3JhcHBsZSIsIkxldmVsQ3JlYXRvciIsImxldmVsMSIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiLCJjbGllbnRYIiwibGVmdCIsInJpZ2h0Iiwid2lkdGgiLCJjbGllbnRZIiwidG9wIiwiYm90dG9tIiwiaGVpZ2h0Iiwid2luZG93Iiwib25rZXl1cCIsImUiLCJrZXlDb2RlIiwiY29uc29sZSIsImxvZyIsInByb2dyYW1CbG9ja3NfMSIsInZpc2l0ZWRCbG9ja3NfMSIsInRhcmdldFJvd18xIiwidGFyZ2V0Q29sXzEiLCJmaWx0ZXIiLCJTZXRVcEV2ZW50TGlzdGVuZXJzIiwic2V0SW50ZXJ2YWwiLCJjbGVhclJlY3QiLCJiZWdpblBhdGgiLCJzdHJva2UiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsYUFBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIsSUFDQSxFQUFBRSxFQUFBLE9BQUFGLEVBQ0EsS0FBQUUsR0FBQSxpQkFBQUYsUUFBQUcsV0FBQSxPQUFBSCxFQUNBLElBQUFJLEVBQUFYLE9BQUFZLE9BQUEsTUFHQSxHQUZBMUIsRUFBQWtCLEVBQUFPLEdBQ0FYLE9BQUFDLGVBQUFVLEVBQUEsV0FBeUNULFlBQUEsRUFBQUssVUFDekMsRUFBQUUsR0FBQSxpQkFBQUYsRUFBQSxRQUFBTSxLQUFBTixFQUFBckIs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QUFVLEVBQUcsRUFBR25DLEVBQVVQLE9BQU93QixNQUFPakIsRUFBVVAsT0FBTzRCLFFBQ3ZFckIsRUFBVXRDLElBQUkwRSxZQUdkcEMsRUFBVTlDLE9BQU9rQyxRQUFRLFNBQUFDLEdBQ2ZBLGFBQWlCcEIsR0FDbkJvQixFQUFNbkQsU0FLZDhELEVBQVU5QyxPQUFPa0MsUUFBUSxTQUFBQyxHQUNqQkEsYUFBaUJwQixHQUNqQm9CLEVBQU1uRCxTQUlkOEQsRUFBVXRDLElBQUkyRSxVQVlmIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcbiIsImV4cG9ydCBlbnVtIENvbW1hbmRCbG9ja1R5cGVzIHtcclxuICAgIEVtcHR5LFxyXG4gICAgU3RhcnQsXHJcbiAgICBNb3ZlLFxyXG4gICAgQW5nbGUsXHJcbiAgICBTY2FuLFxyXG4gICAgTGFzZXIsXHJcbiAgICBHcmFwcGxlXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIEZsb3dCbG9ja1R5cGVzIHtcclxuICAgIEVtcHR5LFxyXG4gICAgVXAsXHJcbiAgICBEb3duLFxyXG4gICAgTGVmdCxcclxuICAgIFJpZ2h0LFxyXG4gICAgQ29uZGl0aW9uYWxMZWZ0UmlnaHQsXHJcbiAgICBDb25kaXRpb25hbExlZnRVcCxcclxuICAgIENvbmRpdGlvbmFsTGVmdERvd24sXHJcbiAgICBDb25kaXRpb25hbFVwUmlnaHQsXHJcbiAgICBDb25kaXRpb25hbFVwRG93bixcclxuICAgIENvbmRpdGlvbmFsRG93blJpZ2h0XHJcbn0iLCJpbXBvcnQgeyBHYW1lU3RhdGUgfSBmcm9tIFwiLi9tYWluXCI7XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQmFzZUJsb2NrIHtcclxuICAgIGdhbWVTdGF0ZTogR2FtZVN0YXRlO1xyXG4gICAgeDogbnVtYmVyO1xyXG4gICAgeTogbnVtYmVyO1xyXG4gICAgaDogbnVtYmVyO1xyXG4gICAgdzogbnVtYmVyO1xyXG4gICAgY29sb3I6IHN0cmluZztcclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBHYW1lU3RhdGU6IEdhbWVTdGF0ZSxcclxuICAgICAgICAgICAgICAgIHB1YmxpYyBYOiBudW1iZXIsXHJcbiAgICAgICAgICAgICAgICBwdWJsaWMgWTogbnVtYmVyLFxyXG4gICAgICAgICAgICAgICAgcHVibGljIEg6IG51bWJlcixcclxuICAgICAgICAgICAgICAgIHB1YmxpYyBXOiBudW1iZXIsXHJcbiAgICAgICAgICAgICAgICBwdWJsaWMgQ29sb3I6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlID0gR2FtZVN0YXRlO1xyXG4gICAgICAgIHRoaXMueCA9IFg7XHJcbiAgICAgICAgdGhpcy55ID0gWTtcclxuICAgICAgICB0aGlzLmggPSBIO1xyXG4gICAgICAgIHRoaXMudyA9IFc7XHJcbiAgICAgICAgdGhpcy5jb2xvciA9IENvbG9yO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXcoKTogdm9pZCB7fSBcclxuICAgIHVwZGF0ZSgpOiB2b2lkIHt9XHJcbn0iLCJpbXBvcnQgeyBHYW1lU3RhdGUgfSBmcm9tIFwiLi9tYWluXCI7XHJcbmltcG9ydCB7IEJhc2VCbG9jayB9IGZyb20gXCIuL0Jhc2VCbG9ja1wiO1xyXG5pbXBvcnQgeyBDb21tYW5kQmxvY2tUeXBlcyB9IGZyb20gXCIuL0VudW1zXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29tbWFuZEJsb2NrIGV4dGVuZHMgQmFzZUJsb2NrIHtcclxuICAgIGdhbWVTdGF0ZTogR2FtZVN0YXRlO1xyXG4gICAgeDogbnVtYmVyO1xyXG4gICAgeTogbnVtYmVyO1xyXG4gICAgdzogbnVtYmVyO1xyXG4gICAgaDogbnVtYmVyO1xyXG4gICAgY29sb3I6IHN0cmluZztcclxuICAgIG1vdXNlRG93bjogYm9vbGVhbjtcclxuICAgIHNldDogYm9vbGVhbjtcclxuICAgIHR5cGU6IENvbW1hbmRCbG9ja1R5cGVzO1xyXG4gICAgaW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQ7XHJcbiAgICBjb25zdHJ1Y3RvcihHYW1lU3RhdGU6IEdhbWVTdGF0ZSwgWDogbnVtYmVyLCBZOiBudW1iZXIsIEg6IG51bWJlciwgVzogbnVtYmVyLCBDb2xvcjogc3RyaW5nLCBUeXBlOiBDb21tYW5kQmxvY2tUeXBlcykge1xyXG4gICAgICAgIHN1cGVyKEdhbWVTdGF0ZSwgWCwgWSwgSCwgVywgQ29sb3IpO1xyXG4gICAgICAgIHRoaXMubW91c2VEb3duID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnNldCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudHlwZSA9IFR5cGU7XHJcbiAgICAgICAgdGhpcy5pbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgIHN3aXRjaChUeXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgQ29tbWFuZEJsb2NrVHlwZXMuU3RhcnQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlLnNyYyA9IFwiZGF0YS90ZXh0dXJlcy9TdGFydEJsb2NrLnBuZ1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ29tbWFuZEJsb2NrVHlwZXMuTW92ZTpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gXCJkYXRhL3RleHR1cmVzL01vdmVCbG9jay5wbmdcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENvbW1hbmRCbG9ja1R5cGVzLkFuZ2xlOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSBcImRhdGEvdGV4dHVyZXMvQW5nbGVCbG9jay5wbmdcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5ibG9ja3MucHVzaCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoKSA6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLm1vdXNlRG93bikge1xyXG4gICAgICAgICAgICB0aGlzLnggPSB0aGlzLmdhbWVTdGF0ZS5tb3VzZVggLSB0aGlzLncvMjtcclxuICAgICAgICAgICAgdGhpcy55ID0gdGhpcy5nYW1lU3RhdGUubW91c2VZIC0gdGhpcy5oLzI7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5tb3VzZURvd24gJiYgIXRoaXMuc2V0KSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuZ2FtZVN0YXRlLmJsb2Nrcy5pbmRleE9mKHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLmdhbWVTdGF0ZS5ibG9ja3Muc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZHJhdygpIDogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LmZpbGxTdHlsZSA9IHRoaXMuY29sb3I7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LmZpbGxSZWN0KHRoaXMueCwgdGhpcy55LCB0aGlzLncsIHRoaXMuaCk7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LnRyYW5zbGF0ZSh0aGlzLngsIHRoaXMueSk7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LmRyYXdJbWFnZSh0aGlzLmltYWdlLCAwLCAwKTtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHgudHJhbnNsYXRlKC10aGlzLngsIC10aGlzLnkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIG9uQ2xpY2soKSB7XHJcbiAgICAvLyB9XHJcbn1cclxuXHJcbi8vIENPTlNJREVSOiBleHRlbmRpbmcgQ29tbWFuZEJsb2NrIGNsYXNzXHJcbmV4cG9ydCBjbGFzcyBDb21tYW5kQmxvY2tCdXR0b24gZXh0ZW5kcyBCYXNlQmxvY2sge1xyXG4gICAgZ2FtZVN0YXRlOiBHYW1lU3RhdGU7XHJcbiAgICB4OiBudW1iZXI7XHJcbiAgICB5OiBudW1iZXI7XHJcbiAgICB3OiBudW1iZXI7XHJcbiAgICBoOiBudW1iZXI7XHJcbiAgICBjb2xvcjogc3RyaW5nO1xyXG4gICAgbW91c2VEb3duOiBib29sZWFuO1xyXG4gICAgdHlwZTogQ29tbWFuZEJsb2NrVHlwZXM7XHJcbiAgICBpbWFnZTogSFRNTEltYWdlRWxlbWVudDtcclxuICAgIGNvbnN0cnVjdG9yKEdhbWVTdGF0ZTogR2FtZVN0YXRlLCBYOiBudW1iZXIsIFk6IG51bWJlciwgSDogbnVtYmVyLCBXOiBudW1iZXIsIENvbG9yOiBzdHJpbmcsIFR5cGU6IENvbW1hbmRCbG9ja1R5cGVzKSB7XHJcbiAgICAgICAgc3VwZXIoR2FtZVN0YXRlLCBYLCBZLCBILCBXLCBDb2xvcik7XHJcbiAgICAgICAgdGhpcy5tb3VzZURvd24gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnR5cGUgPSBUeXBlO1xyXG4gICAgICAgIHRoaXMuaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICBzd2l0Y2goVHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIENvbW1hbmRCbG9ja1R5cGVzLlN0YXJ0OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSBcImRhdGEvdGV4dHVyZXMvU3RhcnRCbG9jay5wbmdcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENvbW1hbmRCbG9ja1R5cGVzLk1vdmU6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlLnNyYyA9IFwiZGF0YS90ZXh0dXJlcy9Nb3ZlQmxvY2sucG5nXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDb21tYW5kQmxvY2tUeXBlcy5BbmdsZTpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gXCJkYXRhL3RleHR1cmVzL0FuZ2xlQmxvY2sucG5nXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuYmxvY2tzLnB1c2godGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKCkgOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5tb3VzZURvd24pIHtcclxuICAgICAgICAgICAgdGhpcy5tb3VzZURvd24gPSBmYWxzZTtcclxuICAgICAgICAgICAgLy8gVE9ETzogQWRkIHR5cGUgdG8gQ29tbWFuZEJsb2NrIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICAgIG5ldyBDb21tYW5kQmxvY2sodGhpcy5nYW1lU3RhdGUsIHRoaXMueCwgdGhpcy55LCB0aGlzLmgsIHRoaXMudywgdGhpcy5Db2xvciwgdGhpcy50eXBlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZHJhdygpIDogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LmZpbGxTdHlsZSA9IHRoaXMuY29sb3I7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LmZpbGxSZWN0KHRoaXMueCwgdGhpcy55LCB0aGlzLncsIHRoaXMuaCk7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LnRyYW5zbGF0ZSh0aGlzLngsIHRoaXMueSk7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LmRyYXdJbWFnZSh0aGlzLmltYWdlLCAwLCAwKTtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHgudHJhbnNsYXRlKC10aGlzLngsIC10aGlzLnkpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuLy8gZXhwb3J0IGZ1bmN0aW9uIGlzQ29tbWFuZEJsb2NrKG9iajogb2JqZWN0KSA6IG9iaiBpcyBDb21tYW5kQmxvY2sge1xyXG4vLyAgICAgdmFyIGNvbW1hbmRCbG9ja09iaiA6IENvbW1hbmRCbG9jayA9IDxDb21tYW5kQmxvY2s+b2JqO1xyXG4gICAgXHJcbi8vICAgICByZXR1cm4gY29tbWFuZEJsb2NrT2JqLm1vdXNlRG93biAhPT0gdW5kZWZpbmVkO1xyXG4vLyB9IiwiaW1wb3J0IHsgR2FtZVN0YXRlIH0gZnJvbSBcIi4vbWFpblwiO1xyXG5pbXBvcnQgeyBCYXNlQmxvY2sgfSBmcm9tIFwiLi9CYXNlQmxvY2tcIjtcclxuaW1wb3J0IHsgRmxvd0Jsb2NrVHlwZXMgfSBmcm9tIFwiLi9FbnVtc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEZsb3dCbG9jayBleHRlbmRzIEJhc2VCbG9jayB7XHJcbiAgICBnYW1lU3RhdGU6IEdhbWVTdGF0ZTtcclxuICAgIHR5cGU6IEZsb3dCbG9ja1R5cGVzO1xyXG4gICAgeDogbnVtYmVyO1xyXG4gICAgeTogbnVtYmVyO1xyXG4gICAgdzogbnVtYmVyO1xyXG4gICAgaDogbnVtYmVyO1xyXG4gICAgbW91c2VEb3duOiBib29sZWFuO1xyXG4gICAgc2V0OiBib29sZWFuO1xyXG4gICAgaW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQ7XHJcbiAgICBjb25zdHJ1Y3RvcihHYW1lU3RhdGU6IEdhbWVTdGF0ZSwgWDogbnVtYmVyLCBZOiBudW1iZXIsIEg6IG51bWJlciwgVzogbnVtYmVyLCBDb2xvcjogc3RyaW5nLCBUeXBlOiBGbG93QmxvY2tUeXBlcykge1xyXG4gICAgICAgIHN1cGVyKEdhbWVTdGF0ZSwgWCwgWSwgSCwgVywgQ29sb3IpO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlID0gR2FtZVN0YXRlO1xyXG4gICAgICAgIHRoaXMudHlwZSA9IFR5cGU7XHJcbiAgICAgICAgdGhpcy5tb3VzZURvd24gPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc2V0ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgIHN3aXRjaChUeXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgRmxvd0Jsb2NrVHlwZXMuVXA6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlLnNyYyA9IFwiZGF0YS90ZXh0dXJlcy9VcEFycm93LnBuZ1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgRmxvd0Jsb2NrVHlwZXMuRG93bjpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gXCJkYXRhL3RleHR1cmVzL0Rvd25BcnJvdy5wbmdcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEZsb3dCbG9ja1R5cGVzLkxlZnQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlLnNyYyA9IFwiZGF0YS90ZXh0dXJlcy9MZWZ0QXJyb3cucG5nXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBGbG93QmxvY2tUeXBlcy5SaWdodDpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gXCJkYXRhL3RleHR1cmVzL1JpZ2h0QXJyb3cucG5nXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuYmxvY2tzLnB1c2godGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKCkgOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5tb3VzZURvd24pIHtcclxuICAgICAgICAgICAgdGhpcy54ID0gdGhpcy5nYW1lU3RhdGUubW91c2VYIC0gdGhpcy53LzI7XHJcbiAgICAgICAgICAgIHRoaXMueSA9IHRoaXMuZ2FtZVN0YXRlLm1vdXNlWSAtIHRoaXMuaC8yO1xyXG4gICAgICAgICAgICB0aGlzLnNldCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMubW91c2VEb3duICYmICF0aGlzLnNldCkge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmdhbWVTdGF0ZS5ibG9ja3MuaW5kZXhPZih0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5nYW1lU3RhdGUuYmxvY2tzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRyYXcoKSA6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC50cmFuc2xhdGUodGhpcy54LCB0aGlzLnkpO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC5kcmF3SW1hZ2UodGhpcy5pbWFnZSwgMCwgMCk7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LnRyYW5zbGF0ZSgtdGhpcy54LCAtdGhpcy55KTtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHguc3Ryb2tlU3R5bGUgPSB0aGlzLmNvbG9yO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC5yZWN0KHRoaXMueCwgdGhpcy55LCB0aGlzLncsIHRoaXMuaCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIENPTlNJREVSOiBFeHRlbmRpbmcgRmxvd0Jsb2NrIGhlcmVcclxuZXhwb3J0IGNsYXNzIEZsb3dCbG9ja0J1dHRvbiBleHRlbmRzIEJhc2VCbG9jayB7XHJcbiAgICBnYW1lU3RhdGU6IEdhbWVTdGF0ZTtcclxuICAgIHg6IG51bWJlcjtcclxuICAgIHk6IG51bWJlcjtcclxuICAgIHc6IG51bWJlcjtcclxuICAgIGg6IG51bWJlcjtcclxuICAgIGNvbG9yOiBzdHJpbmc7XHJcbiAgICBtb3VzZURvd246IGJvb2xlYW47XHJcbiAgICB0eXBlOiBGbG93QmxvY2tUeXBlcztcclxuICAgIGltYWdlOiBIVE1MSW1hZ2VFbGVtZW50O1xyXG4gICAgY29uc3RydWN0b3IoR2FtZVN0YXRlOiBHYW1lU3RhdGUsIFg6IG51bWJlciwgWTogbnVtYmVyLCBIOiBudW1iZXIsIFc6IG51bWJlciwgQ29sb3I6IHN0cmluZywgVHlwZTogRmxvd0Jsb2NrVHlwZXMpIHtcclxuICAgICAgICBzdXBlcihHYW1lU3RhdGUsIFgsIFksIEgsIFcsIENvbG9yKTtcclxuICAgICAgICB0aGlzLnR5cGUgPSBUeXBlO1xyXG4gICAgICAgIHRoaXMubW91c2VEb3duID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgIHN3aXRjaChUeXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgRmxvd0Jsb2NrVHlwZXMuVXA6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlLnNyYyA9IFwiZGF0YS90ZXh0dXJlcy9VcEFycm93LnBuZ1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgRmxvd0Jsb2NrVHlwZXMuRG93bjpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gXCJkYXRhL3RleHR1cmVzL0Rvd25BcnJvdy5wbmdcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEZsb3dCbG9ja1R5cGVzLkxlZnQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlLnNyYyA9IFwiZGF0YS90ZXh0dXJlcy9MZWZ0QXJyb3cucG5nXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBGbG93QmxvY2tUeXBlcy5SaWdodDpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gXCJkYXRhL3RleHR1cmVzL1JpZ2h0QXJyb3cucG5nXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmJsb2Nrcy5wdXNoKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlKCkgOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5tb3VzZURvd24pIHtcclxuICAgICAgICAgICAgdGhpcy5tb3VzZURvd24gPSBmYWxzZTtcclxuICAgICAgICAgICAgbmV3IEZsb3dCbG9jayh0aGlzLmdhbWVTdGF0ZSwgdGhpcy54LCB0aGlzLnksIHRoaXMuaCwgdGhpcy53LCB0aGlzLkNvbG9yLCB0aGlzLnR5cGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkcmF3KCkgOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHgudHJhbnNsYXRlKHRoaXMueCwgdGhpcy55KTtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHguZHJhd0ltYWdlKHRoaXMuaW1hZ2UsIDAsIDApO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC50cmFuc2xhdGUoLXRoaXMueCwgLXRoaXMueSk7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LnN0cm9rZVN0eWxlID0gdGhpcy5jb2xvcjtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHgucmVjdCh0aGlzLngsIHRoaXMueSwgdGhpcy53LCB0aGlzLmgpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgR2FtZVN0YXRlIH0gZnJvbSBcIi4vbWFpblwiO1xyXG5pbXBvcnQgeyBCYXNlQmxvY2sgfSBmcm9tIFwiLi9CYXNlQmxvY2tcIjtcclxuaW1wb3J0IHsgQ29tbWFuZEJsb2NrIH0gZnJvbSBcIi4vQ29tbWFuZEJsb2NrXCI7XHJcbmltcG9ydCB7IEZsb3dCbG9jayB9IGZyb20gXCIuL0Zsb3dCbG9ja1wiO1xyXG5pbXBvcnQgeyBDb21tYW5kQmxvY2tUeXBlcywgRmxvd0Jsb2NrVHlwZXMgfSBmcm9tIFwiLi9FbnVtc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdyaWRCbG9jayBleHRlbmRzIEJhc2VCbG9jayB7XHJcbiAgICBnYW1lU3RhdGU6IEdhbWVTdGF0ZTtcclxuICAgIHg6IG51bWJlcjtcclxuICAgIHk6IG51bWJlcjtcclxuICAgIGg6IG51bWJlcjtcclxuICAgIHc6IG51bWJlcjtcclxuICAgIHI6IG51bWJlcjtcclxuICAgIGM6IG51bWJlcjtcclxuICAgIGNvbW1hbmRUeXBlOiBDb21tYW5kQmxvY2tUeXBlcztcclxuICAgIGZsb3dUeXBlOiBGbG93QmxvY2tUeXBlcztcclxuICAgIGNvbG9yOiBzdHJpbmc7XHJcbiAgICBjb25zdHJ1Y3RvcihHYW1lU3RhdGU6IEdhbWVTdGF0ZSwgWDogbnVtYmVyLCBZOiBudW1iZXIsIEg6IG51bWJlciwgVzogbnVtYmVyLCBSb3c6IG51bWJlciwgQ29sdW1uOiBudW1iZXIsIENvbG9yOiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcihHYW1lU3RhdGUsIFgsIFksIEgsIFcsIENvbG9yKTtcclxuICAgICAgICB0aGlzLnIgPSBSb3c7XHJcbiAgICAgICAgdGhpcy5jID0gQ29sdW1uO1xyXG4gICAgICAgIHRoaXMuY29tbWFuZFR5cGUgPSBDb21tYW5kQmxvY2tUeXBlcy5FbXB0eTtcclxuICAgICAgICB0aGlzLmZsb3dUeXBlID0gRmxvd0Jsb2NrVHlwZXMuRW1wdHk7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuYmxvY2tzLnB1c2godGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKCkgOiB2b2lkIHtcclxuICAgICAgICAvLyBzZWUgaWYgY29tbWFuZCBibG9jayBpcyBiZWluZyBkcm9wcGVkIG9uIGVtcHR5IGdyaWQgYmxvY2tcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5ibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XHJcbiAgICAgICAgICAgIGlmIChibG9jayBpbnN0YW5jZW9mIENvbW1hbmRCbG9ja1xyXG4gICAgICAgICAgICAgICAgfHwgYmxvY2sgaW5zdGFuY2VvZiBGbG93QmxvY2spIHtcclxuICAgICAgICAgICAgICAgIGlmIChibG9jay5tb3VzZURvd24gPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJsb2NrLnggPCB0aGlzLnggKyB0aGlzLncgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sueCArIGJsb2NrLncgPiB0aGlzLnggJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sueSA8IHRoaXMueSArIHRoaXMuaCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBibG9jay5oICsgYmxvY2sueSA+IHRoaXMueSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbW1hbmRUeXBlID09PSBDb21tYW5kQmxvY2tUeXBlcy5FbXB0eVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgYmxvY2sgaW5zdGFuY2VvZiBDb21tYW5kQmxvY2spXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLnggPSB0aGlzLng7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jay55ID0gdGhpcy55O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2suc2V0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZFR5cGUgPSBibG9jay50eXBlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuZmxvd1R5cGUgPT09IEZsb3dCbG9ja1R5cGVzLkVtcHR5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgYmxvY2sgaW5zdGFuY2VvZiBGbG93QmxvY2spXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLnggPSB0aGlzLng7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jay55ID0gdGhpcy55O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2suc2V0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmxvd1R5cGUgPSBibG9jay50eXBlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhdygpIDogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LmZpbGxTdHlsZSA9IHRoaXMuY29sb3I7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LmZpbGxSZWN0KHRoaXMueCwgdGhpcy55LCB0aGlzLncsIHRoaXMuaCk7XHJcbiAgICB9XHJcbn0iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi9kZWNsYXJhdGlvbnMvanNvbi5kLnRzXCIgLz5cclxuaW1wb3J0IHsgQmFzZUJsb2NrIH0gZnJvbSBcIi4vQmFzZUJsb2NrXCI7XHJcbmltcG9ydCB7IElHYW1lU3RhdGUgfSBmcm9tIFwiLi9JR2FtZVN0YXRlXCI7XHJcbmltcG9ydCBsZXZlbDEgZnJvbSAnLi4vZGF0YS9sZXZlbHMvbGV2ZWwxLmpzb24nO1xyXG5pbXBvcnQgeyBMZXZlbENyZWF0b3IgfSBmcm9tIFwiLi9MZXZlbENyZWF0b3JcIjtcclxuaW1wb3J0IHsgU2V0VXBFdmVudExpc3RlbmVycyB9IGZyb20gXCIuL1NldFVwRXZlbnRMaXN0ZW5lcnNcIjtcclxuaW1wb3J0IHsgRmxvd0Jsb2NrIH0gZnJvbSBcIi4vRmxvd0Jsb2NrXCI7XHJcblxyXG4vLyBUT0RPOiBhZGQgY29kZSBtYXRyaXggZm9yIHByb2dyYW1cclxuLy8gVE9ETzogcHVzaCBtb3N0IHJlY2VudGx5IGNsaWNrZWQgY29tbWFuZCAvIGZsb3cgYmxvY2sgdG8gdG9wIG9mIGJsb2NrIGFycmF5IHRvIHJlbmRlciBpdCBvbiB0b3Agb2YgZXZlcnl0aGluZyBlbHNlXHJcbi8vIFRPRE86IHN3aXRjaCBzcGFjZWJhciBjb250cm9sIGJ1dHRvbiB0byBjbGlja2FibGUgcmFkaW8gYnV0dG9uXHJcblxyXG5leHBvcnQgY2xhc3MgR2FtZVN0YXRlIHtcclxuICAgIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgIHJlY3Q6IENsaWVudFJlY3QgfCBET01SZWN0O1xyXG4gICAgYmxvY2tzOiBCYXNlQmxvY2tbXTtcclxuICAgIG1vdXNlWDogbnVtYmVyO1xyXG4gICAgbW91c2VZOiBudW1iZXI7XHJcbiAgICBjb21tYW5kQ29udHJvbDogYm9vbGVhbjtcclxuICAgIGZsb3dDb250cm9sOiBib29sZWFuO1xyXG4gICAgY29uc3RydWN0b3Iob2JqPzogSUdhbWVTdGF0ZSkge1xyXG4gICAgICAgIHRoaXMuY2FudmFzID0gb2JqICYmIG9iai5jYW52YXMgfHwgPEhUTUxDYW52YXNFbGVtZW50PiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdhbWVTY3JlZW5cIik7XHJcbiAgICAgICAgdGhpcy5jdHggPSBvYmogJiYgb2JqLmN0eCB8fCA8Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEPiB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgdGhpcy5yZWN0ID0gb2JqICYmIG9iai5yZWN0IHx8IDxDbGllbnRSZWN0IHwgRE9NUmVjdD4gdGhpcy5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgdGhpcy5ibG9ja3MgPSBvYmogJiYgb2JqLmJsb2NrcyB8fCBbXTtcclxuICAgICAgICB0aGlzLm1vdXNlWCA9IG9iaiAmJiBvYmoubW91c2VYIHx8IDA7XHJcbiAgICAgICAgdGhpcy5tb3VzZVkgPSBvYmogJiYgb2JqLm1vdXNlWSB8fCAwO1xyXG4gICAgICAgIHRoaXMuY29tbWFuZENvbnRyb2wgPSBvYmogJiYgb2JqLmNvbW1hbmRDb250cm9sIHx8IHRydWU7XHJcbiAgICAgICAgdGhpcy5mbG93Q29udHJvbCA9IG9iaiAmJiBvYmouZmxvd0NvbnRyb2wgfHwgZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIHNldCB1cCBnYW1lIHN0YXRlXHJcbnZhciBnYW1lU3RhdGUgPSBuZXcgR2FtZVN0YXRlKCk7XHJcbkxldmVsQ3JlYXRvcihnYW1lU3RhdGUsIGxldmVsMSwgXCJsaWdodGJsdWVcIik7XHJcblNldFVwRXZlbnRMaXN0ZW5lcnMoZ2FtZVN0YXRlKTtcclxuXHJcbmZ1bmN0aW9uIGRyYXcoKSA6IHZvaWQge1xyXG4gICAgZ2FtZVN0YXRlLmN0eC5jbGVhclJlY3QoMCwgMCwgZ2FtZVN0YXRlLmNhbnZhcy53aWR0aCwgZ2FtZVN0YXRlLmNhbnZhcy5oZWlnaHQpO1xyXG4gICAgZ2FtZVN0YXRlLmN0eC5iZWdpblBhdGgoKTtcclxuXHJcbiAgICAvLyByZW5kZXIgYWxsIG5vbi1mbG93IGJsb2NrcyBmaXJzdFxyXG4gICAgZ2FtZVN0YXRlLmJsb2Nrcy5mb3JFYWNoKGJsb2NrID0+IHtcclxuICAgICAgICBpZiAoIShibG9jayBpbnN0YW5jZW9mIEZsb3dCbG9jaykpIHtcclxuICAgICAgICAgICAgYmxvY2suZHJhdygpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIHJlbmRlciBhbGwgZmxvdyBibG9ja3MgbGFzdCB0byBsYXllciB0aGVtIG9uIHRvcCBvZiBjb21tYW5kIGJsb2Nrc1xyXG4gICAgZ2FtZVN0YXRlLmJsb2Nrcy5mb3JFYWNoKGJsb2NrID0+IHtcclxuICAgICAgICBpZiAoYmxvY2sgaW5zdGFuY2VvZiBGbG93QmxvY2spIHtcclxuICAgICAgICAgICAgYmxvY2suZHJhdygpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGdhbWVTdGF0ZS5jdHguc3Ryb2tlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZSgpIDogdm9pZCB7XHJcbiAgICBnYW1lU3RhdGUuYmxvY2tzLmZvckVhY2goYmxvY2sgPT4ge1xyXG4gICAgICAgIGJsb2NrLnVwZGF0ZSgpO1xyXG4gICAgfSlcclxufVxyXG5cclxuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSA6IHZvaWQge1xyXG4gICAgdXBkYXRlKCk7XHJcbiAgICBkcmF3KCk7XHJcbn0sIDEyKTsiLCJpbXBvcnQgeyBHYW1lU3RhdGUgfSBmcm9tIFwiLi9tYWluXCI7XHJcbmltcG9ydCB7IEdyaWRCbG9jayB9IGZyb20gXCIuL0dyaWRCbG9ja1wiO1xyXG5pbXBvcnQgeyBDb21tYW5kQmxvY2tCdXR0b24gfSBmcm9tIFwiLi9Db21tYW5kQmxvY2tcIjtcclxuaW1wb3J0IHsgRmxvd0Jsb2NrQnV0dG9uIH0gZnJvbSBcIi4vRmxvd0Jsb2NrXCI7XHJcbmltcG9ydCB7IENvbW1hbmRCbG9ja1R5cGVzLCBGbG93QmxvY2tUeXBlcyB9IGZyb20gXCIuL0VudW1zXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gTGV2ZWxDcmVhdG9yKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBsZXZlbE9iajogb2JqZWN0LCBwYWxldHRlQ29sb3I6IHN0cmluZykge1xyXG4gICAgbGV0IHlPZmZzZXQ6IG51bWJlciA9IDU7XHJcbiAgICBsZXQgeE9mZnNldDogbnVtYmVyID0gNTtcclxuICAgIGxldCBtYXhYT2Zmc2V0OiBudW1iZXIgPSAwO1xyXG4gICAgbGV0IG1heFlPZmZzZXQ6IG51bWJlciA9IDA7XHJcblxyXG4gICAgLy8gc2V0IHVwIGdyaWQgZm9yIENvbW1hbmQgUGFsZXR0ZVxyXG4gICAgLy8gYXNzaWduIHJvdyBhbmQgY29sdW1uIHZhbHVlcyB0byBncmlkIGJsb2Nrc1xyXG4gICAgZm9yICh2YXIgciA9IDA7IHIgPCBsZXZlbE9ialtcImNvbW1hbmRfcGFsZXR0ZVwiXVtcImJsb2NrX2hlaWdodFwiXTsgcisrKSB7XHJcbiAgICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCBsZXZlbE9ialtcImNvbW1hbmRfcGFsZXR0ZVwiXVtcImJsb2NrX3dpZHRoXCJdOyBjKyspIHtcclxuICAgICAgICAgICAgbmV3IEdyaWRCbG9jayhnYW1lU3RhdGUsIHhPZmZzZXQsIHlPZmZzZXQsIDUwLCA1MCwgciwgYywgcGFsZXR0ZUNvbG9yKTtcclxuICAgICAgICAgICAgeE9mZnNldCArPSA1NTtcclxuICAgICAgICB9XHJcbiAgICAgICAgeU9mZnNldCArPSA1NTtcclxuICAgICAgICBtYXhYT2Zmc2V0ID0geE9mZnNldDtcclxuICAgICAgICB4T2Zmc2V0ID0gNTtcclxuICAgIH1cclxuXHJcbiAgICBtYXhZT2Zmc2V0ID0geU9mZnNldDtcclxuICAgIHlPZmZzZXQgPSBtYXhZT2Zmc2V0ICsgMjA7XHJcblxyXG4gICAgLy8gc2V0IHVwIENvbW1hbmQgQmxvY2sgQnV0dG9uc1xyXG4gICAgLy8gQ09OU0lERVI6IEFjY29tbW9kYXRpbmcgZm9yIGNvbW1hbmQgcGFsZXR0ZSB3aWR0aFxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZXZlbE9ialtcImNvbW1hbmRfYmxvY2tzXCJdLmxlbmd0aDsgaSArKykge1xyXG4gICAgICAgIHN3aXRjaChsZXZlbE9ialtcImNvbW1hbmRfYmxvY2tzXCJdW2ldKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJzdGFydFwiOlxyXG4gICAgICAgICAgICAgICAgbmV3IENvbW1hbmRCbG9ja0J1dHRvbihnYW1lU3RhdGUsIHhPZmZzZXQsIHlPZmZzZXQsIDUwLCA1MCwgXCJ0aGlzdGxlXCIsIENvbW1hbmRCbG9ja1R5cGVzLlN0YXJ0KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwibW92ZVwiOlxyXG4gICAgICAgICAgICAgICAgbmV3IENvbW1hbmRCbG9ja0J1dHRvbihnYW1lU3RhdGUsIHhPZmZzZXQsIHlPZmZzZXQsIDUwLCA1MCwgXCJ0aGlzdGxlXCIsIENvbW1hbmRCbG9ja1R5cGVzLk1vdmUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJhbmdsZVwiOlxyXG4gICAgICAgICAgICAgICAgbmV3IENvbW1hbmRCbG9ja0J1dHRvbihnYW1lU3RhdGUsIHhPZmZzZXQsIHlPZmZzZXQsIDUwLCA1MCwgXCJ0aGlzdGxlXCIsIENvbW1hbmRCbG9ja1R5cGVzLkFuZ2xlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwibGFzZXJcIjpcclxuICAgICAgICAgICAgICAgIG5ldyBDb21tYW5kQmxvY2tCdXR0b24oZ2FtZVN0YXRlLCB4T2Zmc2V0LCB5T2Zmc2V0LCA1MCwgNTAsIFwiZ3JlZW5cIiwgQ29tbWFuZEJsb2NrVHlwZXMuTGFzZXIpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJzY2FuXCI6XHJcbiAgICAgICAgICAgICAgICBuZXcgQ29tbWFuZEJsb2NrQnV0dG9uKGdhbWVTdGF0ZSwgeE9mZnNldCwgeU9mZnNldCwgNTAsIDUwLCBcImRhcmtibHVlXCIsIENvbW1hbmRCbG9ja1R5cGVzLlNjYW4pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJncmFwcGxlXCI6XHJcbiAgICAgICAgICAgICAgICBuZXcgQ29tbWFuZEJsb2NrQnV0dG9uKGdhbWVTdGF0ZSwgeE9mZnNldCwgeU9mZnNldCwgNTAsIDUwLCBcIm1hcm9vblwiLCBDb21tYW5kQmxvY2tUeXBlcy5HcmFwcGxlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICB4T2Zmc2V0ICs9IDU1O1xyXG4gICAgfVxyXG5cclxuICAgIHhPZmZzZXQgPSBtYXhYT2Zmc2V0ICsgMjA7XHJcbiAgICB5T2Zmc2V0ID0gNTtcclxuXHJcbiAgICAvLyBzZXQgdXAgRmxvdyBCbG9jayBCdXR0b25zXHJcbiAgICAvLyBDT05TSURFUjogQWNjb21tb2RhdGluZyBmb3IgY29tbWFuZCBwYWxldHRlIGhlaWdodFxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZXZlbE9ialtcImZsb3dfYmxvY2tzXCJdLmxlbmd0aDsgaSArKykge1xyXG4gICAgICAgIHN3aXRjaChsZXZlbE9ialtcImZsb3dfYmxvY2tzXCJdW2ldKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJ1cFwiOlxyXG4gICAgICAgICAgICAgICAgbmV3IEZsb3dCbG9ja0J1dHRvbihnYW1lU3RhdGUsIHhPZmZzZXQsIHlPZmZzZXQsIDUwLCA1MCwgXCJ5ZWxsb3dcIiwgRmxvd0Jsb2NrVHlwZXMuVXApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJsZWZ0XCI6XHJcbiAgICAgICAgICAgICAgICBuZXcgRmxvd0Jsb2NrQnV0dG9uKGdhbWVTdGF0ZSwgeE9mZnNldCwgeU9mZnNldCwgNTAsIDUwLCBcInllbGxvd1wiLCBGbG93QmxvY2tUeXBlcy5MZWZ0KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwicmlnaHRcIjpcclxuICAgICAgICAgICAgICAgIG5ldyBGbG93QmxvY2tCdXR0b24oZ2FtZVN0YXRlLCB4T2Zmc2V0LCB5T2Zmc2V0LCA1MCwgNTAsIFwieWVsbG93XCIsIEZsb3dCbG9ja1R5cGVzLlJpZ2h0KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiZG93blwiOlxyXG4gICAgICAgICAgICAgICAgbmV3IEZsb3dCbG9ja0J1dHRvbihnYW1lU3RhdGUsIHhPZmZzZXQsIHlPZmZzZXQsIDUwLCA1MCwgXCJ5ZWxsb3dcIiwgRmxvd0Jsb2NrVHlwZXMuRG93bik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgeU9mZnNldCArPSA1NTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IEdhbWVTdGF0ZSB9IGZyb20gXCIuL21haW5cIjtcclxuaW1wb3J0IHsgQ29tbWFuZEJsb2NrLCBDb21tYW5kQmxvY2tCdXR0b24gfSBmcm9tIFwiLi9Db21tYW5kQmxvY2tcIjtcclxuaW1wb3J0IHsgR3JpZEJsb2NrIH0gZnJvbSBcIi4vR3JpZEJsb2NrXCI7XHJcbmltcG9ydCB7IEZsb3dCbG9jaywgRmxvd0Jsb2NrQnV0dG9uIH0gZnJvbSBcIi4vRmxvd0Jsb2NrXCI7XHJcbmltcG9ydCB7IENvbW1hbmRCbG9ja1R5cGVzLCBGbG93QmxvY2tUeXBlcyB9IGZyb20gXCIuL0VudW1zXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gU2V0VXBFdmVudExpc3RlbmVycyhnYW1lU3RhdGU6IEdhbWVTdGF0ZSkge1xyXG4gICAgZ2FtZVN0YXRlLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBmdW5jdGlvbigpIDogdm9pZCB7XHJcbiAgICAgICAgLy8gQ29sbGlzaW9uIGRldGVjdGlvbiBiZXR3ZWVuIGNsaWNrZWQgb2Zmc2V0IGFuZCBibG9jay5cclxuICAgICAgICBnYW1lU3RhdGUuYmxvY2tzLmZvckVhY2goZnVuY3Rpb24oYmxvY2spIDogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChnYW1lU3RhdGUubW91c2VZID4gYmxvY2sueSAmJiBnYW1lU3RhdGUubW91c2VZIDwgYmxvY2sueSArIGJsb2NrLmhcclxuICAgICAgICAgICAgICAgICYmIGdhbWVTdGF0ZS5tb3VzZVggPiBibG9jay54ICYmIGdhbWVTdGF0ZS5tb3VzZVggPCBibG9jay54ICsgYmxvY2sudykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGJsb2NrIGluc3RhbmNlb2YgQ29tbWFuZEJsb2NrICYmIGdhbWVTdGF0ZS5jb21tYW5kQ29udHJvbFxyXG4gICAgICAgICAgICAgICAgICAgIHx8IGJsb2NrIGluc3RhbmNlb2YgQ29tbWFuZEJsb2NrQnV0dG9uICYmIGdhbWVTdGF0ZS5jb21tYW5kQ29udHJvbFxyXG4gICAgICAgICAgICAgICAgICAgIHx8IGJsb2NrIGluc3RhbmNlb2YgRmxvd0Jsb2NrICYmIGdhbWVTdGF0ZS5mbG93Q29udHJvbFxyXG4gICAgICAgICAgICAgICAgICAgIHx8IGJsb2NrIGluc3RhbmNlb2YgRmxvd0Jsb2NrQnV0dG9uICYmIGdhbWVTdGF0ZS5mbG93Q29udHJvbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrLm1vdXNlRG93biA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChibG9jayBpbnN0YW5jZW9mIEdyaWRCbG9jaykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIHJhZGlvIGJ1dHRvbiBmb3IgZmxvdyBvciBjb21tYW5kIGNvbnRyb2xcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZVN0YXRlLmNvbW1hbmRDb250cm9sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLmNvbW1hbmRUeXBlID0gQ29tbWFuZEJsb2NrVHlwZXMuRW1wdHk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGdhbWVTdGF0ZS5mbG93Q29udHJvbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBibG9jay5mbG93VHlwZSA9IEZsb3dCbG9ja1R5cGVzLkVtcHR5O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9LCBmYWxzZSk7XHJcblxyXG4gICAgZ2FtZVN0YXRlLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZnVuY3Rpb24oKSA6IHZvaWQge1xyXG4gICAgICAgIGdhbWVTdGF0ZS5ibG9ja3MuZm9yRWFjaChmdW5jdGlvbihibG9jaykge1xyXG4gICAgICAgICAgICBpZiAoYmxvY2sgaW5zdGFuY2VvZiBDb21tYW5kQmxvY2tcclxuICAgICAgICAgICAgICAgIHx8IGJsb2NrIGluc3RhbmNlb2YgRmxvd0Jsb2NrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmxvY2subW91c2VEb3duKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmxvY2subW91c2VEb3duID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSwgZmFsc2UpO1xyXG5cclxuICAgIGdhbWVTdGF0ZS5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZnVuY3Rpb24oZXZ0OiBNb3VzZUV2ZW50KSA6IHZvaWQge1xyXG4gICAgICAgIGdhbWVTdGF0ZS5tb3VzZVggPSAoZXZ0LmNsaWVudFggLSBnYW1lU3RhdGUucmVjdC5sZWZ0KSAvIChnYW1lU3RhdGUucmVjdC5yaWdodCAtIGdhbWVTdGF0ZS5yZWN0LmxlZnQpICogZ2FtZVN0YXRlLmNhbnZhcy53aWR0aDtcclxuICAgICAgICBnYW1lU3RhdGUubW91c2VZID0gKGV2dC5jbGllbnRZIC0gZ2FtZVN0YXRlLnJlY3QudG9wKSAvIChnYW1lU3RhdGUucmVjdC5ib3R0b20gLSBnYW1lU3RhdGUucmVjdC50b3ApICogZ2FtZVN0YXRlLmNhbnZhcy5oZWlnaHQ7XHJcbiAgICB9LCBmYWxzZSk7XHJcblxyXG4gICAgd2luZG93Lm9ua2V5dXAgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgLy8gaS5lLiBTcGFjZUJhciBwcmVzc2VkXHJcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMzIpIHtcclxuICAgICAgICAgICAgaWYgKGdhbWVTdGF0ZS5mbG93Q29udHJvbCkge1xyXG4gICAgICAgICAgICAgICAgZ2FtZVN0YXRlLmZsb3dDb250cm9sID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBnYW1lU3RhdGUuY29tbWFuZENvbnRyb2wgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDb21tYW5kIENvbnRyb2whXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGdhbWVTdGF0ZS5jb21tYW5kQ29udHJvbCkge1xyXG4gICAgICAgICAgICAgICAgZ2FtZVN0YXRlLmNvbW1hbmRDb250cm9sID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBnYW1lU3RhdGUuZmxvd0NvbnRyb2wgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGbG93IENvbnRyb2whXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBpLmUuIFMga2V5IHByZXNzZWRcclxuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSA4Mykge1xyXG4gICAgICAgICAgICBsZXQgcHJvZ3JhbUJsb2NrcyA9IDA7XHJcbiAgICAgICAgICAgIGxldCB2aXNpdGVkQmxvY2tzID0gW107XHJcbiAgICAgICAgICAgIGxldCB0YXJnZXRSb3cgPSAtMTtcclxuICAgICAgICAgICAgbGV0IHRhcmdldENvbCA9IC0xO1xyXG4gICAgICAgICAgICAvLyBydW4gcHJvZ3JhbVxyXG4gICAgICAgICAgICBnYW1lU3RhdGUuYmxvY2tzLmZvckVhY2goYmxvY2sgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGJsb2NrIGluc3RhbmNlb2YgR3JpZEJsb2NrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJsb2NrLmNvbW1hbmRUeXBlICE9PSBDb21tYW5kQmxvY2tUeXBlcy5FbXB0eVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiBibG9jay5mbG93VHlwZSAhPT0gRmxvd0Jsb2NrVHlwZXMuRW1wdHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3JhbUJsb2NrcysrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmxvY2suY29tbWFuZFR5cGUgPT09IENvbW1hbmRCbG9ja1R5cGVzLlN0YXJ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRSb3cgPSBibG9jay5yO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q29sID0gYmxvY2suYztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2l0ZWRCbG9ja3MucHVzaChbdGFyZ2V0Um93LCB0YXJnZXRDb2xdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmNvbnNvbGUubG9nKFwicm93OiBcIiArIGJsb2NrLnIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmNvbnNvbGUubG9nKFwiY29sdW1uOiBcIiArIGJsb2NrLmMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmNvbnNvbGUubG9nKFwiZmxvdzogXCIgKyBibG9jay5mbG93VHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuY29uc29sZS5sb2coXCJjb21tYW5kOiBcIiArIGJsb2NrLmNvbW1hbmRUeXBlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9ncmFtQmxvY2tzOyBpICsrKSB7XHJcbiAgICAgICAgICAgICAgICBnYW1lU3RhdGUuYmxvY2tzLmZvckVhY2goYmxvY2sgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChibG9jayBpbnN0YW5jZW9mIEdyaWRCbG9jaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmxvY2suY29tbWFuZFR5cGUgIT09IENvbW1hbmRCbG9ja1R5cGVzLkVtcHR5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBibG9jay5mbG93VHlwZSAhPT0gRmxvd0Jsb2NrVHlwZXMuRW1wdHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChibG9jay5yID09PSB0YXJnZXRSb3cgJiYgYmxvY2suYyA9PT0gdGFyZ2V0Q29sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coQ29tbWFuZEJsb2NrVHlwZXNbYmxvY2suY29tbWFuZFR5cGVdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2goYmxvY2suZmxvd1R5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBGbG93QmxvY2tUeXBlcy5VcDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFJvdy0tO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2aXNpdGVkQmxvY2tzLmZpbHRlcihibG9jayA9PiBibG9jayA9PT0gW3RhcmdldFJvdywgdGFyZ2V0Q29sXSkubGVuZ3RoID4gMCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmFtQmxvY2tzKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpdGVkQmxvY2tzLnB1c2goW3RhcmdldFJvdywgdGFyZ2V0Q29sXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBGbG93QmxvY2tUeXBlcy5Eb3duOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Um93Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHZpc2l0ZWRCbG9ja3MuZmlsdGVyKGJsb2NrID0+IGJsb2NrID09PSBbdGFyZ2V0Um93LCB0YXJnZXRDb2xdKS5sZW5ndGggPiAwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyYW1CbG9ja3MrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2l0ZWRCbG9ja3MucHVzaChbdGFyZ2V0Um93LCB0YXJnZXRDb2xdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEZsb3dCbG9ja1R5cGVzLlJpZ2h0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q29sKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHZpc2l0ZWRCbG9ja3MuZmlsdGVyKGJsb2NrID0+IGJsb2NrID09PSBbdGFyZ2V0Um93LCB0YXJnZXRDb2xdKS5sZW5ndGggPiAwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyYW1CbG9ja3MrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2l0ZWRCbG9ja3MucHVzaChbdGFyZ2V0Um93LCB0YXJnZXRDb2xdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEZsb3dCbG9ja1R5cGVzLkxlZnQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRDb2wtLTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmlzaXRlZEJsb2Nrcy5maWx0ZXIoYmxvY2sgPT4gYmxvY2sgPT09IFt0YXJnZXRSb3csIHRhcmdldENvbF0pLmxlbmd0aCA+IDApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3JhbUJsb2NrcysrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaXRlZEJsb2Nrcy5wdXNoKFt0YXJnZXRSb3csIHRhcmdldENvbF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9