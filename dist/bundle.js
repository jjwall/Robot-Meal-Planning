!function(t){var e={};function a(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=1)}([function(t){t.exports={next_level:"level2",command_palette:{block_width:5,block_height:5},command_blocks:["start","move","angle"],flow_blocks:["up","down","left","right"]}},function(t,e,a){"use strict";a.r(e);var n,o,s=function(){return function(t){this.canvas=t&&t.canvas||document.getElementById("gameScreen"),this.ctx=t&&t.ctx||this.canvas.getContext("2d"),this.rect=t&&t.rect||this.canvas.getBoundingClientRect(),this.blocks=t&&t.blocks||[],this.sliders=t&&t.sliders||[],this.mouseX=t&&t.mouseX||0,this.mouseY=t&&t.mouseY||0,this.commandControl=t&&t.commandControl||!0,this.flowControl=t&&t.flowControl||!1,this.nextStack=t&&t.nextStack||[],this.programRunning=t&&t.programRunning||!1}}(),i=a(0),r=function(){function t(t,e,a,n,o,s){this.GameState=t,this.X=e,this.Y=a,this.H=n,this.W=o,this.Color=s,this.gameState=t,this.x=e,this.y=a,this.h=n,this.w=o,this.color=s}return t.prototype.draw=function(){},t.prototype.update=function(){},t}();!function(t){t[t.Empty=0]="Empty",t[t.Start=1]="Start",t[t.Move=2]="Move",t[t.Angle=3]="Angle",t[t.Thread=4]="Thread",t[t.Scan=5]="Scan",t[t.Laser=6]="Laser",t[t.Grapple=7]="Grapple"}(n||(n={})),function(t){t[t.Empty=0]="Empty",t[t.Up=1]="Up",t[t.Down=2]="Down",t[t.Left=3]="Left",t[t.Right=4]="Right",t[t.ConditionalLeftRight=5]="ConditionalLeftRight",t[t.ConditionalLeftUp=6]="ConditionalLeftUp",t[t.ConditionalLeftDown=7]="ConditionalLeftDown",t[t.ConditionalUpRight=8]="ConditionalUpRight",t[t.ConditionalUpDown=9]="ConditionalUpDown",t[t.ConditionalDownRight=10]="ConditionalDownRight"}(o||(o={}));var c=function(){var t=function(e,a){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(e,a)};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),l=function(t){function e(e,a,o,s,i,r,c,l,h){var u=t.call(this,e,a,o,s,i,l)||this;switch(u.baseUnits=r,u.callCount=c,u.totalUnits=u.baseUnits*u.callCount,u.mouseDown=!0,u.set=!1,u.type=h,u.image=new Image,h){case n.Start:u.image.src="data/textures/StartBlock.png";break;case n.Move:u.image.src="data/textures/MoveBlock.png";break;case n.Angle:u.image.src="data/textures/AngleBlock.png";break;case n.Thread:u.image.src="data/textures/ThreadBlock.png"}return u.gameState.blocks.push(u),u}return c(e,t),e.prototype.update=function(){if(this.mouseDown&&(this.x=this.gameState.mouseX-this.w/2,this.y=this.gameState.mouseY-this.h/2,this.set=!1),!this.mouseDown&&!this.set){var t=this.gameState.blocks.indexOf(this);this.gameState.blocks.splice(t,1)}},e.prototype.draw=function(){this.gameState.ctx.fillStyle=this.color,this.gameState.ctx.fillRect(this.x,this.y,this.w,this.h),this.gameState.ctx.translate(this.x,this.y),this.gameState.ctx.drawImage(this.image,0,0),this.gameState.ctx.translate(-this.x,-this.y),this.gameState.ctx.fillStyle="black",this.gameState.ctx.font="15px Arial";var t=30;this.totalUnits>99?t=25:this.totalUnits<10&&(t=35),this.gameState.ctx.fillText(this.totalUnits.toString(),this.x+t,this.y+48)},e}(r),h=function(t){function e(e,a,o,s,i,r,c){var l=t.call(this,e,a,o,s,i,r)||this;switch(l.mouseDown=!1,l.type=c,l.image=new Image,l.baseUnits=0,l.callCount=0,l.totalUnits=0,c){case n.Start:l.image.src="data/textures/StartBlock.png";break;case n.Move:l.image.src="data/textures/MoveBlock.png";break;case n.Angle:l.image.src="data/textures/AngleBlock.png";break;case n.Thread:l.image.src="data/textures/ThreadBlock.png"}return l.gameState.blocks.push(l),l}return c(e,t),e.prototype.update=function(){var t=this;this.gameState.sliders.forEach(function(e){e.type===t.type&&(t.callCount=Math.round(e.value*e.maxUnits/e.baseUnits),t.baseUnits=e.baseUnits,t.totalUnits=t.baseUnits*t.callCount)}),this.mouseDown&&(this.mouseDown=!1,new l(this.gameState,this.x,this.y,this.h,this.w,this.baseUnits,this.callCount,this.Color,this.type))},e.prototype.draw=function(){this.gameState.ctx.fillStyle=this.color,this.gameState.ctx.fillRect(this.x,this.y,this.w,this.h),this.gameState.ctx.translate(this.x,this.y),this.gameState.ctx.drawImage(this.image,0,0),this.gameState.ctx.translate(-this.x,-this.y),this.gameState.ctx.fillStyle="black",this.gameState.ctx.font="15px Arial";var t=30;this.totalUnits>99?t=25:this.totalUnits<10&&(t=35),this.gameState.ctx.fillText(this.totalUnits.toString(),this.x+t,this.y+48)},e}(r),u=function(){var t=function(e,a){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(e,a)};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),m=function(t){function e(e,a,n,s,i,r,c){var l=t.call(this,e,a,n,s,i,r)||this;switch(l.gameState=e,l.type=c,l.mouseDown=!0,l.set=!1,l.image=new Image,c){case o.Up:l.image.src="data/textures/UpArrow.png";break;case o.Down:l.image.src="data/textures/DownArrow.png";break;case o.Left:l.image.src="data/textures/LeftArrow.png";break;case o.Right:l.image.src="data/textures/RightArrow.png"}return l.gameState.blocks.push(l),l}return u(e,t),e.prototype.update=function(){if(this.mouseDown&&(this.x=this.gameState.mouseX-this.w/2,this.y=this.gameState.mouseY-this.h/2,this.set=!1),!this.mouseDown&&!this.set){var t=this.gameState.blocks.indexOf(this);this.gameState.blocks.splice(t,1)}},e.prototype.draw=function(){this.gameState.ctx.translate(this.x,this.y),this.gameState.ctx.drawImage(this.image,0,0),this.gameState.ctx.translate(-this.x,-this.y),this.gameState.ctx.strokeStyle=this.color,this.gameState.ctx.rect(this.x,this.y,this.w,this.h)},e}(r),f=function(t){function e(e,a,n,s,i,r,c){var l=t.call(this,e,a,n,s,i,r)||this;switch(l.type=c,l.mouseDown=!1,l.image=new Image,c){case o.Up:l.image.src="data/textures/UpArrow.png";break;case o.Down:l.image.src="data/textures/DownArrow.png";break;case o.Left:l.image.src="data/textures/LeftArrow.png";break;case o.Right:l.image.src="data/textures/RightArrow.png"}return l.gameState.blocks.push(l),l}return u(e,t),e.prototype.update=function(){this.mouseDown&&(this.mouseDown=!1,new m(this.gameState,this.x,this.y,this.h,this.w,this.Color,this.type))},e.prototype.draw=function(){this.gameState.ctx.translate(this.x,this.y),this.gameState.ctx.drawImage(this.image,0,0),this.gameState.ctx.translate(-this.x,-this.y),this.gameState.ctx.strokeStyle=this.color,this.gameState.ctx.rect(this.x,this.y,this.w,this.h)},e}(r),p=function(){var t=function(e,a){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(e,a)};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),g=function(t){function e(e,a,s,i,r,c,l,h){var u=t.call(this,e,a,s,i,r,h)||this;return u.r=c,u.c=l,u.flowType=o.Empty,u.gameState.blocks.push(u),u.commandData={baseUnits:0,totalUnits:0,callCount:0,type:n.Empty},u}return p(e,t),e.prototype.update=function(){var t=this;this.gameState.blocks.forEach(function(e){(e instanceof l||e instanceof m)&&!1===e.mouseDown&&e.x<t.x+t.w&&e.x+e.w>t.x&&e.y<t.y+t.h&&e.h+e.y>t.y&&(t.commandData.type===n.Empty&&e instanceof l?(e.x=t.x,e.y=t.y,e.set=!0,t.commandData.type=e.type,t.commandData.baseUnits=e.baseUnits,t.commandData.callCount=e.callCount,t.commandData.totalUnits=e.totalUnits,t.currentCallCount=e.callCount):t.flowType===o.Empty&&e instanceof m&&(e.x=t.x,e.y=t.y,e.set=!0,t.flowType=e.type))})},e.prototype.draw=function(){this.gameState.ctx.fillStyle=this.color,this.gameState.ctx.fillRect(this.x,this.y,this.w,this.h)},e}(r);function d(t,e){var a,s;switch(e.currentCallCount=e.commandData.callCount,e.flowType){case o.Up:a=e.r-1,s=e.c;break;case o.Down:a=e.r+1,s=e.c;break;case o.Right:s=e.c+1,a=e.r;break;case o.Left:s=e.c-1,a=e.r}t.blocks.forEach(function(e){if(e instanceof g&&e.r===a&&e.c===s&&e.commandData.type!==n.Empty&&e.flowType!==o.Empty)switch(e.commandData.type){case n.Angle:e.call=function(){return function(t,e){e.currentCallCount>0?(console.log("angle"),e.currentCallCount--):d(t,e)}(t,e)},t.nextStack.push(e);break;case n.Move:e.call=function(){return function(t,e){e.currentCallCount>0?(console.log("move"),e.currentCallCount--):d(t,e)}(t,e)},t.nextStack.push(e);break;case n.Start:e.call=function(){return function(t,e){console.log("start"),d(t,e)}(t,e)},t.nextStack.push(e)}})}var w=function(){function t(t,e,a,n,o,s){void 0===s&&(s=10),this.gameState=t,this.mouseDown=!1,this.maxUnits=n,this.snapAmount=s,this.baseUnits=Math.round(this.maxUnits/this.snapAmount),this.type=o,this.barH=75,this.barW=10,this.barX=e,this.barY=a,this.barColor="thistle",this.sliderH=10,this.sliderW=15,this.sliderX=e,this.sliderY=a+this.barH/2-this.sliderH/2,this.sliderColor="purple",this.percentage=1-(this.sliderY-this.barY+this.sliderH/2)/this.barH,this.value=Math.round(this.percentage*this.snapAmount)/this.snapAmount}return t.prototype.update=function(){if(this.mouseDown&&this.barY-this.sliderH/2<this.gameState.mouseY&&this.barY+this.barH-this.sliderH/2>this.gameState.mouseY){var t=this.gameState.mouseY;this.percentage=1-(t-this.barY+this.sliderH/2)/this.barH,this.value=Math.round(this.percentage*this.snapAmount)/this.snapAmount,this.sliderY=this.barH+this.barY-this.sliderH/2-this.value*this.barH}},t.prototype.draw=function(){this.gameState.ctx.fillStyle=this.barColor,this.gameState.ctx.fillRect(this.barX,this.barY,this.barW,this.barH),this.gameState.ctx.fillStyle=this.sliderColor,this.gameState.ctx.fillRect(this.sliderX-this.sliderH/4,this.sliderY,this.sliderW,this.sliderH)},t}(),y=new s;!function(t,e,a){for(var s=5,i=5,r=0,c=0;c<e.command_palette.block_height;c++){for(var l=0;l<e.command_palette.block_width;l++)new g(t,i,s,50,50,c,l,a),i+=55;s+=55,r=i,i=5}s+=20;for(var u=0;u<e.command_blocks.length;u++){switch(e.command_blocks[u]){case"start":new h(t,i,s,50,50,"thistle",n.Start);break;case"move":new h(t,i,s,50,50,"thistle",n.Move);break;case"angle":new h(t,i,s,50,50,"thistle",n.Angle);break;case"thread":new h(t,i,s,50,50,"thistle",n.Thread);break;case"laser":new h(t,i,s,50,50,"green",n.Laser);break;case"scan":new h(t,i,s,50,50,"darkblue",n.Scan);break;case"grapple":new h(t,i,s,50,50,"maroon",n.Grapple)}i+=55}for(i=r+20,s=5,u=0;u<e.flow_blocks.length;u++){switch(e.flow_blocks[u]){case"up":new f(t,i,s,50,50,"yellow",o.Up);break;case"left":new f(t,i,s,50,50,"yellow",o.Left);break;case"right":new f(t,i,s,50,50,"yellow",o.Right);break;case"down":new f(t,i,s,50,50,"yellow",o.Down)}s+=55}}(y,i,"lightblue"),function(t){t.canvas.addEventListener("mousedown",function(){t.blocks.forEach(function(e){t.mouseY>e.y&&t.mouseY<e.y+e.h&&t.mouseX>e.x&&t.mouseX<e.x+e.w&&(e instanceof l&&t.commandControl||e instanceof h&&t.commandControl||e instanceof m&&t.flowControl||e instanceof f&&t.flowControl?e.mouseDown=!0:e instanceof g&&(t.commandControl?e.commandData.type=n.Empty:t.flowControl&&(e.flowType=o.Empty)))}),t.sliders.forEach(function(e){t.mouseY>e.sliderY&&t.mouseY<e.sliderY+e.sliderH&&t.mouseX>e.sliderX&&t.mouseX<e.sliderX+e.sliderW&&(e.mouseDown=!0)})},!1),t.canvas.addEventListener("mouseup",function(){t.blocks.forEach(function(t){(t instanceof l||t instanceof m)&&t.mouseDown&&(t.mouseDown=!1)}),t.sliders.forEach(function(t){t.mouseDown=!1})},!1),t.canvas.addEventListener("mousemove",function(e){t.mouseX=(e.clientX-t.rect.left)/(t.rect.right-t.rect.left)*t.canvas.width,t.mouseY=(e.clientY-t.rect.top)/(t.rect.bottom-t.rect.top)*t.canvas.height},!1),window.onkeyup=function(e){32===e.keyCode&&(t.flowControl?(t.flowControl=!1,t.commandControl=!0,console.log("Command Control!")):t.commandControl&&(t.commandControl=!1,t.flowControl=!0,console.log("Flow Control!"))),83===e.keyCode&&(t.programRunning||(t.programRunning=!0,function(t,e){t.blocks.forEach(function(e){e instanceof g&&e.commandData.type===n.Start&&e.flowType!==o.Empty&&d(t,e)})}(t)))}}(y),y.sliders.push(new w(y,80,365,100,n.Move)),y.sliders.push(new w(y,130,365,360,n.Angle,8)),setInterval(function(){y.blocks.forEach(function(t){t.update()}),y.sliders.forEach(function(t){t.update()}),y.ctx.clearRect(0,0,y.canvas.width,y.canvas.height),y.ctx.beginPath(),y.sliders.forEach(function(t){t.draw()}),y.blocks.forEach(function(t){t instanceof m||t.draw()}),y.blocks.forEach(function(t){t instanceof m&&t.draw()}),y.ctx.stroke();var t=y.nextStack;y.nextStack=[],t.length>0?t.forEach(function(t){t.currentCallCount>0?(t.call(),y.nextStack.push(t)):t.call()}):y.programRunning=!1},12)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL0dhbWVTdGF0ZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvRW51bXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0Jhc2VCbG9jay50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tbWFuZEJsb2NrLnRzIiwid2VicGFjazovLy8uL3NyYy9GbG93QmxvY2sudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0dyaWRCbG9jay50cyIsIndlYnBhY2s6Ly8vLi9zcmMvUHJvZ3JhbUV4ZWN1dGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvU2xpZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9tYWluLnRzIiwid2VicGFjazovLy8uL3NyYy9HZW5lcmF0ZUxldmVsLnRzIiwid2VicGFjazovLy8uL3NyYy9TZXRVcEV2ZW50TGlzdGVuZXJzLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiQ29tbWFuZFR5cGVzIiwiRmxvd1R5cGVzIiwiR2FtZVN0YXRlX0dhbWVTdGF0ZSIsIm9iaiIsInRoaXMiLCJjYW52YXMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY3R4IiwiZ2V0Q29udGV4dCIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJibG9ja3MiLCJzbGlkZXJzIiwibW91c2VYIiwibW91c2VZIiwiY29tbWFuZENvbnRyb2wiLCJmbG93Q29udHJvbCIsIm5leHRTdGFjayIsInByb2dyYW1SdW5uaW5nIiwiQmFzZUJsb2NrIiwiR2FtZVN0YXRlIiwiWCIsIlkiLCJIIiwiVyIsIkNvbG9yIiwiZ2FtZVN0YXRlIiwieCIsInkiLCJoIiwidyIsImNvbG9yIiwiZHJhdyIsInVwZGF0ZSIsIkNvbW1hbmRCbG9ja19Db21tYW5kQmxvY2siLCJfc3VwZXIiLCJDb21tYW5kQmxvY2siLCJVbml0cyIsIkNhbGxDb3VudCIsIlR5cGUiLCJfdGhpcyIsImJhc2VVbml0cyIsImNhbGxDb3VudCIsInRvdGFsVW5pdHMiLCJtb3VzZURvd24iLCJzZXQiLCJ0eXBlIiwiaW1hZ2UiLCJJbWFnZSIsIlN0YXJ0Iiwic3JjIiwiTW92ZSIsIkFuZ2xlIiwiVGhyZWFkIiwicHVzaCIsIl9fZXh0ZW5kcyIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwidHJhbnNsYXRlIiwiZHJhd0ltYWdlIiwiZm9udCIsIm9mZnNldFgiLCJmaWxsVGV4dCIsInRvU3RyaW5nIiwiQ29tbWFuZEJsb2NrX0NvbW1hbmRCbG9ja0J1dHRvbiIsIkNvbW1hbmRCbG9ja0J1dHRvbiIsImZvckVhY2giLCJzbGlkZXIiLCJNYXRoIiwicm91bmQiLCJtYXhVbml0cyIsIkZsb3dCbG9ja19GbG93QmxvY2siLCJGbG93QmxvY2siLCJVcCIsIkRvd24iLCJMZWZ0IiwiUmlnaHQiLCJGbG93QmxvY2tfZXh0ZW5kcyIsInN0cm9rZVN0eWxlIiwiRmxvd0Jsb2NrX0Zsb3dCbG9ja0J1dHRvbiIsIkZsb3dCbG9ja0J1dHRvbiIsIkdyaWRCbG9ja19HcmlkQmxvY2siLCJHcmlkQmxvY2siLCJSb3ciLCJDb2x1bW4iLCJmbG93VHlwZSIsIkVtcHR5IiwiY29tbWFuZERhdGEiLCJHcmlkQmxvY2tfZXh0ZW5kcyIsImJsb2NrIiwiY3VycmVudENhbGxDb3VudCIsImZpbmROZXh0Q2FsbCIsInByZXZCbG9jayIsInRhcmdldFJvdyIsInRhcmdldENvbCIsImNvbnNvbGUiLCJsb2ciLCJhbmdsZUNhbGwiLCJtb3ZlQ2FsbCIsInN0YXJ0Q2FsbCIsIlNsaWRlciIsIk1heFVuaXRzIiwiU25hcEFtb3VudCIsInNuYXBBbW91bnQiLCJiYXJIIiwiYmFyVyIsImJhclgiLCJiYXJZIiwiYmFyQ29sb3IiLCJzbGlkZXJIIiwic2xpZGVyVyIsInNsaWRlclgiLCJzbGlkZXJZIiwic2xpZGVyQ29sb3IiLCJwZXJjZW50YWdlIiwidGVtcFNsaWRlclkiLCJtYWluX2dhbWVTdGF0ZSIsImxldmVsT2JqIiwicGFsZXR0ZUNvbG9yIiwieU9mZnNldCIsInhPZmZzZXQiLCJtYXhYT2Zmc2V0IiwibGVuZ3RoIiwiTGFzZXIiLCJTY2FuIiwiR3JhcHBsZSIsIkdlbmVyYXRlTGV2ZWwiLCJsZXZlbDEiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwiY2xpZW50WCIsImxlZnQiLCJyaWdodCIsIndpZHRoIiwiY2xpZW50WSIsInRvcCIsImJvdHRvbSIsImhlaWdodCIsIndpbmRvdyIsIm9ua2V5dXAiLCJlIiwia2V5Q29kZSIsInRocmVhZCIsInN0YXJ0TmV3VGhyZWFkQ2FsbCIsIlNldFVwRXZlbnRMaXN0ZW5lcnMiLCJzZXRJbnRlcnZhbCIsImNsZWFyUmVjdCIsImJlZ2luUGF0aCIsInN0cm9rZSIsImNhbGxTdGFjayJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFB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QUFpQixHQUVoQyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG4iLCJpbXBvcnQgeyBCYXNlQmxvY2sgfSBmcm9tIFwiLi9CYXNlQmxvY2tcIjtcclxuaW1wb3J0IHsgR3JpZEJsb2NrIH0gZnJvbSBcIi4vR3JpZEJsb2NrXCI7XHJcbmltcG9ydCB7IFNsaWRlciB9IGZyb20gXCIuL1NsaWRlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdhbWVTdGF0ZSB7XHJcbiAgICByZWFkb25seSBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgcmVhZG9ubHkgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcbiAgICByZWFkb25seSByZWN0OiBDbGllbnRSZWN0IHwgRE9NUmVjdDtcclxuICAgIHB1YmxpYyBibG9ja3M6IEJhc2VCbG9ja1tdO1xyXG4gICAgcHVibGljIHNsaWRlcnM6IFNsaWRlcltdO1xyXG4gICAgcHVibGljIG1vdXNlWDogbnVtYmVyO1xyXG4gICAgcHVibGljIG1vdXNlWTogbnVtYmVyO1xyXG4gICAgcHVibGljIGNvbW1hbmRDb250cm9sOiBib29sZWFuO1xyXG4gICAgcHVibGljIGZsb3dDb250cm9sOiBib29sZWFuO1xyXG4gICAgcHVibGljIG5leHRTdGFjazogR3JpZEJsb2NrW107XHJcbiAgICBwdWJsaWMgcHJvZ3JhbVJ1bm5pbmc6IGJvb2xlYW47XHJcbiAgICBjb25zdHJ1Y3RvcihvYmo/OiBJR2FtZVN0YXRlKSB7XHJcbiAgICAgICAgdGhpcy5jYW52YXMgPSBvYmogJiYgb2JqLmNhbnZhcyB8fCA8SFRNTENhbnZhc0VsZW1lbnQ+IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2FtZVNjcmVlblwiKTtcclxuICAgICAgICB0aGlzLmN0eCA9IG9iaiAmJiBvYmouY3R4IHx8IDxDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ+IHRoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICB0aGlzLnJlY3QgPSBvYmogJiYgb2JqLnJlY3QgfHwgPENsaWVudFJlY3QgfCBET01SZWN0PiB0aGlzLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICB0aGlzLmJsb2NrcyA9IG9iaiAmJiBvYmouYmxvY2tzIHx8IFtdO1xyXG4gICAgICAgIHRoaXMuc2xpZGVycyA9IG9iaiAmJiBvYmouc2xpZGVycyB8fCBbXTtcclxuICAgICAgICB0aGlzLm1vdXNlWCA9IG9iaiAmJiBvYmoubW91c2VYIHx8IDA7XHJcbiAgICAgICAgdGhpcy5tb3VzZVkgPSBvYmogJiYgb2JqLm1vdXNlWSB8fCAwO1xyXG4gICAgICAgIHRoaXMuY29tbWFuZENvbnRyb2wgPSBvYmogJiYgb2JqLmNvbW1hbmRDb250cm9sIHx8IHRydWU7XHJcbiAgICAgICAgdGhpcy5mbG93Q29udHJvbCA9IG9iaiAmJiBvYmouZmxvd0NvbnRyb2wgfHwgZmFsc2U7XHJcbiAgICAgICAgdGhpcy5uZXh0U3RhY2sgPSBvYmogJiYgb2JqLm5leHRTdGFjayB8fCBbXTtcclxuICAgICAgICB0aGlzLnByb2dyYW1SdW5uaW5nID0gb2JqICYmIG9iai5wcm9ncmFtUnVubmluZyB8fCBmYWxzZTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJR2FtZVN0YXRlIHtcclxuICAgIHJlYWRvbmx5IGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgICByZWFkb25seSBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgIHJlYWRvbmx5IHJlY3Q6IENsaWVudFJlY3QgfCBET01SZWN0O1xyXG4gICAgYmxvY2tzOiBCYXNlQmxvY2tbXTtcclxuICAgIHNsaWRlcnM6IFNsaWRlcltdO1xyXG4gICAgbW91c2VYOiBudW1iZXI7XHJcbiAgICBtb3VzZVk6IG51bWJlcjtcclxuICAgIGNvbW1hbmRDb250cm9sOiBib29sZWFuO1xyXG4gICAgZmxvd0NvbnRyb2w6IGJvb2xlYW47XHJcbiAgICBuZXh0U3RhY2s6IGFueVtdO1xyXG4gICAgcHJvZ3JhbVJ1bm5pbmc6IGJvb2xlYW47XHJcbn0iLCJleHBvcnQgZW51bSBDb21tYW5kVHlwZXMge1xyXG4gICAgRW1wdHksXHJcbiAgICBTdGFydCxcclxuICAgIE1vdmUsXHJcbiAgICBBbmdsZSxcclxuICAgIFRocmVhZCxcclxuICAgIFNjYW4sXHJcbiAgICBMYXNlcixcclxuICAgIEdyYXBwbGVcclxufVxyXG5cclxuZXhwb3J0IGVudW0gRmxvd1R5cGVzIHtcclxuICAgIEVtcHR5LFxyXG4gICAgVXAsXHJcbiAgICBEb3duLFxyXG4gICAgTGVmdCxcclxuICAgIFJpZ2h0LFxyXG4gICAgQ29uZGl0aW9uYWxMZWZ0UmlnaHQsXHJcbiAgICBDb25kaXRpb25hbExlZnRVcCxcclxuICAgIENvbmRpdGlvbmFsTGVmdERvd24sXHJcbiAgICBDb25kaXRpb25hbFVwUmlnaHQsXHJcbiAgICBDb25kaXRpb25hbFVwRG93bixcclxuICAgIENvbmRpdGlvbmFsRG93blJpZ2h0XHJcbn0iLCJpbXBvcnQgeyBHYW1lU3RhdGUgfSBmcm9tIFwiLi9HYW1lU3RhdGVcIjtcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlQmxvY2sge1xyXG4gICAgcHJvdGVjdGVkIGdhbWVTdGF0ZTogR2FtZVN0YXRlO1xyXG4gICAgcHVibGljIHg6IG51bWJlcjtcclxuICAgIHB1YmxpYyB5OiBudW1iZXI7XHJcbiAgICByZWFkb25seSBoOiBudW1iZXI7XHJcbiAgICByZWFkb25seSB3OiBudW1iZXI7XHJcbiAgICByZWFkb25seSBjb2xvcjogc3RyaW5nO1xyXG4gICAgY29uc3RydWN0b3IocHVibGljIEdhbWVTdGF0ZTogR2FtZVN0YXRlLFxyXG4gICAgICAgICAgICAgICAgcHVibGljIFg6IG51bWJlcixcclxuICAgICAgICAgICAgICAgIHB1YmxpYyBZOiBudW1iZXIsXHJcbiAgICAgICAgICAgICAgICBwdWJsaWMgSDogbnVtYmVyLFxyXG4gICAgICAgICAgICAgICAgcHVibGljIFc6IG51bWJlcixcclxuICAgICAgICAgICAgICAgIHB1YmxpYyBDb2xvcjogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUgPSBHYW1lU3RhdGU7XHJcbiAgICAgICAgdGhpcy54ID0gWDtcclxuICAgICAgICB0aGlzLnkgPSBZO1xyXG4gICAgICAgIHRoaXMuaCA9IEg7XHJcbiAgICAgICAgdGhpcy53ID0gVztcclxuICAgICAgICB0aGlzLmNvbG9yID0gQ29sb3I7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhdygpOiB2b2lkIHt9IFxyXG4gICAgdXBkYXRlKCk6IHZvaWQge31cclxufSIsImltcG9ydCB7IEdhbWVTdGF0ZSB9IGZyb20gXCIuL0dhbWVTdGF0ZVwiO1xyXG5pbXBvcnQgeyBCYXNlQmxvY2sgfSBmcm9tIFwiLi9CYXNlQmxvY2tcIjtcclxuaW1wb3J0IHsgQ29tbWFuZFR5cGVzIH0gZnJvbSBcIi4vRW51bXNcIjtcclxuaW1wb3J0IHsgSUNvbW1hbmREYXRhIH0gZnJvbSBcIi4vR3JpZEJsb2NrXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29tbWFuZEJsb2NrIGV4dGVuZHMgQmFzZUJsb2NrIGltcGxlbWVudHMgSUNvbW1hbmREYXRhIHtcclxuICAgIHByb3RlY3RlZCBnYW1lU3RhdGU6IEdhbWVTdGF0ZTtcclxuICAgIHB1YmxpYyB4OiBudW1iZXI7XHJcbiAgICBwdWJsaWMgeTogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgdzogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgaDogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgYmFzZVVuaXRzOiBudW1iZXI7XHJcbiAgICByZWFkb25seSBjYWxsQ291bnQ6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IHRvdGFsVW5pdHM6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IGNvbG9yOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgbW91c2VEb3duOiBib29sZWFuO1xyXG4gICAgcHVibGljIHNldDogYm9vbGVhbjtcclxuICAgIHJlYWRvbmx5IHR5cGU6IENvbW1hbmRUeXBlcztcclxuICAgIHJlYWRvbmx5IGltYWdlOiBIVE1MSW1hZ2VFbGVtZW50O1xyXG4gICAgY29uc3RydWN0b3IoR2FtZVN0YXRlOiBHYW1lU3RhdGUsIFg6IG51bWJlciwgWTogbnVtYmVyLCBIOiBudW1iZXIsIFc6IG51bWJlciwgVW5pdHM6IG51bWJlciwgQ2FsbENvdW50OiBudW1iZXIsIENvbG9yOiBzdHJpbmcsIFR5cGU6IENvbW1hbmRUeXBlcykge1xyXG4gICAgICAgIHN1cGVyKEdhbWVTdGF0ZSwgWCwgWSwgSCwgVywgQ29sb3IpO1xyXG4gICAgICAgIHRoaXMuYmFzZVVuaXRzID0gVW5pdHM7XHJcbiAgICAgICAgdGhpcy5jYWxsQ291bnQgPSBDYWxsQ291bnQ7XHJcbiAgICAgICAgdGhpcy50b3RhbFVuaXRzID0gdGhpcy5iYXNlVW5pdHMgKiB0aGlzLmNhbGxDb3VudDtcclxuICAgICAgICB0aGlzLm1vdXNlRG93biA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zZXQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnR5cGUgPSBUeXBlO1xyXG4gICAgICAgIHRoaXMuaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICBzd2l0Y2goVHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIENvbW1hbmRUeXBlcy5TdGFydDpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gXCJkYXRhL3RleHR1cmVzL1N0YXJ0QmxvY2sucG5nXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDb21tYW5kVHlwZXMuTW92ZTpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gXCJkYXRhL3RleHR1cmVzL01vdmVCbG9jay5wbmdcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENvbW1hbmRUeXBlcy5BbmdsZTpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gXCJkYXRhL3RleHR1cmVzL0FuZ2xlQmxvY2sucG5nXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDb21tYW5kVHlwZXMuVGhyZWFkOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSBcImRhdGEvdGV4dHVyZXMvVGhyZWFkQmxvY2sucG5nXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuYmxvY2tzLnB1c2godGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZSgpIDogdm9pZCB7XHJcbiAgICAgICAgLy8gZHJhZyBjb21tYW5kIGJsb2NrXHJcbiAgICAgICAgaWYgKHRoaXMubW91c2VEb3duKSB7XHJcbiAgICAgICAgICAgIHRoaXMueCA9IHRoaXMuZ2FtZVN0YXRlLm1vdXNlWCAtIHRoaXMudy8yO1xyXG4gICAgICAgICAgICB0aGlzLnkgPSB0aGlzLmdhbWVTdGF0ZS5tb3VzZVkgLSB0aGlzLmgvMjtcclxuICAgICAgICAgICAgdGhpcy5zZXQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGRlbGV0ZSBpZiBkcm9wcGluZyBibG9jayBhbmQgaXQgZG9lc24ndCBoYXZlIGEgZW1wdHkgZ3JpZCBibG9jayB0byBiZSBzZXQgb25cclxuICAgICAgICBpZiAoIXRoaXMubW91c2VEb3duICYmICF0aGlzLnNldCkge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmdhbWVTdGF0ZS5ibG9ja3MuaW5kZXhPZih0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5nYW1lU3RhdGUuYmxvY2tzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkcmF3KCkgOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHguZmlsbFN0eWxlID0gdGhpcy5jb2xvcjtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHguZmlsbFJlY3QodGhpcy54LCB0aGlzLnksIHRoaXMudywgdGhpcy5oKTtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHgudHJhbnNsYXRlKHRoaXMueCwgdGhpcy55KTtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHguZHJhd0ltYWdlKHRoaXMuaW1hZ2UsIDAsIDApO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC50cmFuc2xhdGUoLXRoaXMueCwgLXRoaXMueSk7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LmZpbGxTdHlsZSA9IFwiYmxhY2tcIjtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHguZm9udCA9IFwiMTVweCBBcmlhbFwiO1xyXG4gICAgICAgIGxldCBvZmZzZXRYID0gMzA7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnRvdGFsVW5pdHMgPiA5OSkge1xyXG4gICAgICAgICAgICBvZmZzZXRYID0gMjU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMudG90YWxVbml0cyA8IDEwKSB7XHJcbiAgICAgICAgICAgIG9mZnNldFggPSAzNTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC5maWxsVGV4dCgodGhpcy50b3RhbFVuaXRzKS50b1N0cmluZygpLCB0aGlzLnggKyBvZmZzZXRYLCB0aGlzLnkgKyA0OCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gb25DbGljaygpIHtcclxuICAgIC8vIH1cclxufVxyXG5cclxuLy8gQ09OU0lERVI6IGV4dGVuZGluZyBDb21tYW5kQmxvY2sgY2xhc3NcclxuZXhwb3J0IGNsYXNzIENvbW1hbmRCbG9ja0J1dHRvbiBleHRlbmRzIEJhc2VCbG9jayBpbXBsZW1lbnRzIElDb21tYW5kRGF0YSB7XHJcbiAgICBwcm90ZWN0ZWQgZ2FtZVN0YXRlOiBHYW1lU3RhdGU7XHJcbiAgICBwdWJsaWMgeDogbnVtYmVyO1xyXG4gICAgcHVibGljIHk6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IHc6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IGg6IG51bWJlcjtcclxuICAgIHB1YmxpYyBiYXNlVW5pdHM6IG51bWJlcjtcclxuICAgIHB1YmxpYyBjYWxsQ291bnQ6IG51bWJlcjtcclxuICAgIHB1YmxpYyB0b3RhbFVuaXRzOiBudW1iZXI7XHJcbiAgICByZWFkb25seSBjb2xvcjogc3RyaW5nO1xyXG4gICAgcHVibGljIG1vdXNlRG93bjogYm9vbGVhbjtcclxuICAgIHJlYWRvbmx5IHR5cGU6IENvbW1hbmRUeXBlcztcclxuICAgIHJlYWRvbmx5IGltYWdlOiBIVE1MSW1hZ2VFbGVtZW50O1xyXG4gICAgY29uc3RydWN0b3IoR2FtZVN0YXRlOiBHYW1lU3RhdGUsIFg6IG51bWJlciwgWTogbnVtYmVyLCBIOiBudW1iZXIsIFc6IG51bWJlciwgQ29sb3I6IHN0cmluZywgVHlwZTogQ29tbWFuZFR5cGVzKSB7XHJcbiAgICAgICAgc3VwZXIoR2FtZVN0YXRlLCBYLCBZLCBILCBXLCBDb2xvcik7XHJcbiAgICAgICAgdGhpcy5tb3VzZURvd24gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnR5cGUgPSBUeXBlO1xyXG4gICAgICAgIHRoaXMuaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICB0aGlzLmJhc2VVbml0cyA9IDA7XHJcbiAgICAgICAgdGhpcy5jYWxsQ291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMudG90YWxVbml0cyA9IDA7XHJcbiAgICAgICAgc3dpdGNoKFR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBDb21tYW5kVHlwZXMuU3RhcnQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlLnNyYyA9IFwiZGF0YS90ZXh0dXJlcy9TdGFydEJsb2NrLnBuZ1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ29tbWFuZFR5cGVzLk1vdmU6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlLnNyYyA9IFwiZGF0YS90ZXh0dXJlcy9Nb3ZlQmxvY2sucG5nXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDb21tYW5kVHlwZXMuQW5nbGU6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlLnNyYyA9IFwiZGF0YS90ZXh0dXJlcy9BbmdsZUJsb2NrLnBuZ1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ29tbWFuZFR5cGVzLlRocmVhZDpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gXCJkYXRhL3RleHR1cmVzL1RocmVhZEJsb2NrLnBuZ1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmJsb2Nrcy5wdXNoKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoKSA6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLnNsaWRlcnMuZm9yRWFjaChzbGlkZXIgPT4ge1xyXG4gICAgICAgICAgICBpZiAoc2xpZGVyLnR5cGUgPT09IHRoaXMudHlwZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYWxsQ291bnQgPSBNYXRoLnJvdW5kKChzbGlkZXIudmFsdWUgKiBzbGlkZXIubWF4VW5pdHMpL3NsaWRlci5iYXNlVW5pdHMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5iYXNlVW5pdHMgPSBzbGlkZXIuYmFzZVVuaXRzO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b3RhbFVuaXRzID0gdGhpcy5iYXNlVW5pdHMgKiB0aGlzLmNhbGxDb3VudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tb3VzZURvd24pIHtcclxuICAgICAgICAgICAgdGhpcy5tb3VzZURvd24gPSBmYWxzZTtcclxuICAgICAgICAgICAgbmV3IENvbW1hbmRCbG9jayh0aGlzLmdhbWVTdGF0ZSwgdGhpcy54LCB0aGlzLnksIHRoaXMuaCwgdGhpcy53LCB0aGlzLmJhc2VVbml0cywgdGhpcy5jYWxsQ291bnQsIHRoaXMuQ29sb3IsIHRoaXMudHlwZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkcmF3KCkgOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHguZmlsbFN0eWxlID0gdGhpcy5jb2xvcjtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHguZmlsbFJlY3QodGhpcy54LCB0aGlzLnksIHRoaXMudywgdGhpcy5oKTtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHgudHJhbnNsYXRlKHRoaXMueCwgdGhpcy55KTtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHguZHJhd0ltYWdlKHRoaXMuaW1hZ2UsIDAsIDApO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC50cmFuc2xhdGUoLXRoaXMueCwgLXRoaXMueSk7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LmZpbGxTdHlsZSA9IFwiYmxhY2tcIjtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHguZm9udCA9IFwiMTVweCBBcmlhbFwiO1xyXG4gICAgICAgIGxldCBvZmZzZXRYID0gMzA7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnRvdGFsVW5pdHMgPiA5OSkge1xyXG4gICAgICAgICAgICBvZmZzZXRYID0gMjU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBlbHNlIGlmICh0aGlzLnRvdGFsVW5pdHMgPCAxMCkge1xyXG4gICAgICAgICAgICBvZmZzZXRYID0gMzU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHguZmlsbFRleHQoKHRoaXMudG90YWxVbml0cykudG9TdHJpbmcoKSwgdGhpcy54ICsgb2Zmc2V0WCwgdGhpcy55ICsgNDgpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuLy8gZXhwb3J0IGZ1bmN0aW9uIGlzQ29tbWFuZEJsb2NrKG9iajogb2JqZWN0KSA6IG9iaiBpcyBDb21tYW5kQmxvY2sge1xyXG4vLyAgICAgdmFyIGNvbW1hbmRCbG9ja09iaiA6IENvbW1hbmRCbG9jayA9IDxDb21tYW5kQmxvY2s+b2JqO1xyXG4gICAgXHJcbi8vICAgICByZXR1cm4gY29tbWFuZEJsb2NrT2JqLm1vdXNlRG93biAhPT0gdW5kZWZpbmVkO1xyXG4vLyB9IiwiaW1wb3J0IHsgR2FtZVN0YXRlIH0gZnJvbSBcIi4vR2FtZVN0YXRlXCI7XHJcbmltcG9ydCB7IEJhc2VCbG9jayB9IGZyb20gXCIuL0Jhc2VCbG9ja1wiO1xyXG5pbXBvcnQgeyBGbG93VHlwZXMgfSBmcm9tIFwiLi9FbnVtc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEZsb3dCbG9jayBleHRlbmRzIEJhc2VCbG9jayB7XHJcbiAgICBwcm90ZWN0ZWQgZ2FtZVN0YXRlOiBHYW1lU3RhdGU7XHJcbiAgICByZWFkb25seSB0eXBlOiBGbG93VHlwZXM7XHJcbiAgICBwdWJsaWMgeDogbnVtYmVyO1xyXG4gICAgcHVibGljIHk6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IHc6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IGg6IG51bWJlcjtcclxuICAgIHB1YmxpYyBtb3VzZURvd246IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgc2V0OiBib29sZWFuO1xyXG4gICAgcmVhZG9ubHkgaW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQ7XHJcbiAgICBjb25zdHJ1Y3RvcihHYW1lU3RhdGU6IEdhbWVTdGF0ZSwgWDogbnVtYmVyLCBZOiBudW1iZXIsIEg6IG51bWJlciwgVzogbnVtYmVyLCBDb2xvcjogc3RyaW5nLCBUeXBlOiBGbG93VHlwZXMpIHtcclxuICAgICAgICBzdXBlcihHYW1lU3RhdGUsIFgsIFksIEgsIFcsIENvbG9yKTtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZSA9IEdhbWVTdGF0ZTtcclxuICAgICAgICB0aGlzLnR5cGUgPSBUeXBlO1xyXG4gICAgICAgIHRoaXMubW91c2VEb3duID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnNldCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICBzd2l0Y2goVHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIEZsb3dUeXBlcy5VcDpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gXCJkYXRhL3RleHR1cmVzL1VwQXJyb3cucG5nXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBGbG93VHlwZXMuRG93bjpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gXCJkYXRhL3RleHR1cmVzL0Rvd25BcnJvdy5wbmdcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEZsb3dUeXBlcy5MZWZ0OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSBcImRhdGEvdGV4dHVyZXMvTGVmdEFycm93LnBuZ1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgRmxvd1R5cGVzLlJpZ2h0OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSBcImRhdGEvdGV4dHVyZXMvUmlnaHRBcnJvdy5wbmdcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5ibG9ja3MucHVzaCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKCkgOiB2b2lkIHtcclxuICAgICAgICAvLyBkcmFnIGZsb3cgYmxvY2tcclxuICAgICAgICBpZiAodGhpcy5tb3VzZURvd24pIHtcclxuICAgICAgICAgICAgdGhpcy54ID0gdGhpcy5nYW1lU3RhdGUubW91c2VYIC0gdGhpcy53LzI7XHJcbiAgICAgICAgICAgIHRoaXMueSA9IHRoaXMuZ2FtZVN0YXRlLm1vdXNlWSAtIHRoaXMuaC8yO1xyXG4gICAgICAgICAgICB0aGlzLnNldCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZGVsZXRlIGlmIGRyb3BwaW5nIGJsb2NrIGFuZCBpdCBkb2Vzbid0IGhhdmUgYSBlbXB0eSBncmlkIGJsb2NrIHRvIGJlIHNldCBvblxyXG4gICAgICAgIGlmICghdGhpcy5tb3VzZURvd24gJiYgIXRoaXMuc2V0KSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuZ2FtZVN0YXRlLmJsb2Nrcy5pbmRleE9mKHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLmdhbWVTdGF0ZS5ibG9ja3Muc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXcoKSA6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC50cmFuc2xhdGUodGhpcy54LCB0aGlzLnkpO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC5kcmF3SW1hZ2UodGhpcy5pbWFnZSwgMCwgMCk7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LnRyYW5zbGF0ZSgtdGhpcy54LCAtdGhpcy55KTtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHguc3Ryb2tlU3R5bGUgPSB0aGlzLmNvbG9yO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC5yZWN0KHRoaXMueCwgdGhpcy55LCB0aGlzLncsIHRoaXMuaCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIENPTlNJREVSOiBFeHRlbmRpbmcgRmxvd0Jsb2NrIGhlcmVcclxuZXhwb3J0IGNsYXNzIEZsb3dCbG9ja0J1dHRvbiBleHRlbmRzIEJhc2VCbG9jayB7XHJcbiAgICBwcm90ZWN0ZWQgZ2FtZVN0YXRlOiBHYW1lU3RhdGU7XHJcbiAgICBwdWJsaWMgeDogbnVtYmVyO1xyXG4gICAgcHVibGljIHk6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IHc6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IGg6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IGNvbG9yOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgbW91c2VEb3duOiBib29sZWFuO1xyXG4gICAgcmVhZG9ubHkgdHlwZTogRmxvd1R5cGVzO1xyXG4gICAgcmVhZG9ubHkgaW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQ7XHJcbiAgICBjb25zdHJ1Y3RvcihHYW1lU3RhdGU6IEdhbWVTdGF0ZSwgWDogbnVtYmVyLCBZOiBudW1iZXIsIEg6IG51bWJlciwgVzogbnVtYmVyLCBDb2xvcjogc3RyaW5nLCBUeXBlOiBGbG93VHlwZXMpIHtcclxuICAgICAgICBzdXBlcihHYW1lU3RhdGUsIFgsIFksIEgsIFcsIENvbG9yKTtcclxuICAgICAgICB0aGlzLnR5cGUgPSBUeXBlO1xyXG4gICAgICAgIHRoaXMubW91c2VEb3duID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgIHN3aXRjaChUeXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgRmxvd1R5cGVzLlVwOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSBcImRhdGEvdGV4dHVyZXMvVXBBcnJvdy5wbmdcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEZsb3dUeXBlcy5Eb3duOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSBcImRhdGEvdGV4dHVyZXMvRG93bkFycm93LnBuZ1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgRmxvd1R5cGVzLkxlZnQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlLnNyYyA9IFwiZGF0YS90ZXh0dXJlcy9MZWZ0QXJyb3cucG5nXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBGbG93VHlwZXMuUmlnaHQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlLnNyYyA9IFwiZGF0YS90ZXh0dXJlcy9SaWdodEFycm93LnBuZ1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5ibG9ja3MucHVzaCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKCkgOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5tb3VzZURvd24pIHtcclxuICAgICAgICAgICAgdGhpcy5tb3VzZURvd24gPSBmYWxzZTtcclxuICAgICAgICAgICAgbmV3IEZsb3dCbG9jayh0aGlzLmdhbWVTdGF0ZSwgdGhpcy54LCB0aGlzLnksIHRoaXMuaCwgdGhpcy53LCB0aGlzLkNvbG9yLCB0aGlzLnR5cGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhdygpIDogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LnRyYW5zbGF0ZSh0aGlzLngsIHRoaXMueSk7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LmRyYXdJbWFnZSh0aGlzLmltYWdlLCAwLCAwKTtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHgudHJhbnNsYXRlKC10aGlzLngsIC10aGlzLnkpO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC5zdHJva2VTdHlsZSA9IHRoaXMuY29sb3I7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LnJlY3QodGhpcy54LCB0aGlzLnksIHRoaXMudywgdGhpcy5oKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IEdhbWVTdGF0ZSB9IGZyb20gXCIuL0dhbWVTdGF0ZVwiO1xyXG5pbXBvcnQgeyBCYXNlQmxvY2sgfSBmcm9tIFwiLi9CYXNlQmxvY2tcIjtcclxuaW1wb3J0IHsgQ29tbWFuZEJsb2NrIH0gZnJvbSBcIi4vQ29tbWFuZEJsb2NrXCI7XHJcbmltcG9ydCB7IEZsb3dCbG9jayB9IGZyb20gXCIuL0Zsb3dCbG9ja1wiO1xyXG5pbXBvcnQgeyBDb21tYW5kVHlwZXMsIEZsb3dUeXBlcyB9IGZyb20gXCIuL0VudW1zXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgR3JpZEJsb2NrIGV4dGVuZHMgQmFzZUJsb2NrIHtcclxuICAgIHByb3RlY3RlZCBnYW1lU3RhdGU6IEdhbWVTdGF0ZTtcclxuICAgIHB1YmxpYyB4OiBudW1iZXI7XHJcbiAgICBwdWJsaWMgeTogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgaDogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgdzogbnVtYmVyO1xyXG4gICAgcHVibGljIHI6IG51bWJlcjtcclxuICAgIHB1YmxpYyBjOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgY29tbWFuZERhdGE6IElDb21tYW5kRGF0YTtcclxuICAgIHB1YmxpYyBjdXJyZW50Q2FsbENvdW50OiBudW1iZXI7XHJcbiAgICBwdWJsaWMgZmxvd1R5cGU6IEZsb3dUeXBlcztcclxuICAgIHB1YmxpYyBjYWxsOiBhbnk7IC8vIGNoYW5nZSB0eXBlIGhlcmUgdG8gZ2VuZXJpYyBtZXRob2Qgc2lnbmF0dXJlXHJcbiAgICByZWFkb25seSBjb2xvcjogc3RyaW5nO1xyXG4gICAgY29uc3RydWN0b3IoR2FtZVN0YXRlOiBHYW1lU3RhdGUsIFg6IG51bWJlciwgWTogbnVtYmVyLCBIOiBudW1iZXIsIFc6IG51bWJlciwgUm93OiBudW1iZXIsIENvbHVtbjogbnVtYmVyLCBDb2xvcjogc3RyaW5nKSB7XHJcbiAgICAgICAgc3VwZXIoR2FtZVN0YXRlLCBYLCBZLCBILCBXLCBDb2xvcik7XHJcbiAgICAgICAgdGhpcy5yID0gUm93O1xyXG4gICAgICAgIHRoaXMuYyA9IENvbHVtbjtcclxuICAgICAgICB0aGlzLmZsb3dUeXBlID0gRmxvd1R5cGVzLkVtcHR5O1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmJsb2Nrcy5wdXNoKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuY29tbWFuZERhdGEgPSB7XHJcbiAgICAgICAgICAgIGJhc2VVbml0czogMCxcclxuICAgICAgICAgICAgdG90YWxVbml0czogMCxcclxuICAgICAgICAgICAgY2FsbENvdW50OiAwLFxyXG4gICAgICAgICAgICB0eXBlOiBDb21tYW5kVHlwZXMuRW1wdHlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZSgpIDogdm9pZCB7XHJcbiAgICAgICAgLy8gc2VlIGlmIGNvbW1hbmQgYmxvY2sgaXMgYmVpbmcgZHJvcHBlZCBvbiBlbXB0eSBncmlkIGJsb2NrXHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuYmxvY2tzLmZvckVhY2goYmxvY2sgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYmxvY2sgaW5zdGFuY2VvZiBDb21tYW5kQmxvY2tcclxuICAgICAgICAgICAgICAgIHx8IGJsb2NrIGluc3RhbmNlb2YgRmxvd0Jsb2NrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmxvY2subW91c2VEb3duID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChibG9jay54IDwgdGhpcy54ICsgdGhpcy53ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLnggKyBibG9jay53ID4gdGhpcy54ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLnkgPCB0aGlzLnkgKyB0aGlzLmggJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2suaCArIGJsb2NrLnkgPiB0aGlzLnkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb21tYW5kRGF0YS50eXBlID09PSBDb21tYW5kVHlwZXMuRW1wdHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIGJsb2NrIGluc3RhbmNlb2YgQ29tbWFuZEJsb2NrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzbmFwIGNvbW1hbmQgYmxvY2sgdG8gdGhpcyBlbXB0eSBncmlkIHNxdWFyZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sueCA9IHRoaXMueDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLnkgPSB0aGlzLnk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jay5zZXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGNvbW1hbmREYXRhIGFuZCBjdXJyZW50Q2FsbENvdW50IHByb3BlcnRpZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZERhdGEudHlwZSA9IGJsb2NrLnR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmREYXRhLmJhc2VVbml0cyA9IGJsb2NrLmJhc2VVbml0cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZERhdGEuY2FsbENvdW50ID0gYmxvY2suY2FsbENvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kRGF0YS50b3RhbFVuaXRzID0gYmxvY2sudG90YWxVbml0cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudENhbGxDb3VudCA9IGJsb2NrLmNhbGxDb3VudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmZsb3dUeXBlID09PSBGbG93VHlwZXMuRW1wdHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBibG9jayBpbnN0YW5jZW9mIEZsb3dCbG9jaylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sueCA9IHRoaXMueDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLnkgPSB0aGlzLnk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jay5zZXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mbG93VHlwZSA9IGJsb2NrLnR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY29uZGl0aW9uYWwgcHJvcGVydGllcyBoZXJlIGlmIGNvbmRpdGlvbmFsIGJsb2NrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhdygpIDogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LmZpbGxTdHlsZSA9IHRoaXMuY29sb3I7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LmZpbGxSZWN0KHRoaXMueCwgdGhpcy55LCB0aGlzLncsIHRoaXMuaCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4qIEludGVyZmFjZSB0byBjb21tdW5pY2F0ZSBjb21tYW5kIGRhdGEuXHJcbiovXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUNvbW1hbmREYXRhIHtcclxuICAgIC8qKlxyXG4gICAgKiBBbW91bnQgb2YgdW5pdHMgcGVyIGNhbGwuXHJcbiAgICAqL1xyXG4gICAgYmFzZVVuaXRzOiBudW1iZXI7XHJcbiAgICAvKipcclxuICAgICogVG90YWwgdW5pdHMgYWZ0ZXIgYWxsIGNhbGwocykuXHJcbiAgICAqL1xyXG4gICAgdG90YWxVbml0czogbnVtYmVyO1xyXG4gICAgLyoqXHJcbiAgICAqIEFtb3VudCBvZiBjYWxscyBmb3IgYSBzaW5nbGUgcGFzcyBvZiBleGVjdXRpb24uXHJcbiAgICAqL1xyXG4gICAgY2FsbENvdW50OiBudW1iZXI7XHJcbiAgICAvKipcclxuICAgICogVHlwZSBvZiBjb21tYW5kIGZvciB0aGUgZXhlY3V0aW9uIHByb2Nlc3MuXHJcbiAgICAqL1xyXG4gICAgdHlwZTogQ29tbWFuZFR5cGVzO1xyXG59IiwiaW1wb3J0IHsgR2FtZVN0YXRlIH0gZnJvbSBcIi4vR2FtZVN0YXRlXCI7XHJcbmltcG9ydCB7IEdyaWRCbG9jayB9IGZyb20gXCIuL0dyaWRCbG9ja1wiO1xyXG5pbXBvcnQgeyBDb21tYW5kVHlwZXMsIEZsb3dUeXBlcyB9IGZyb20gXCIuL0VudW1zXCI7XHJcblxyXG5mdW5jdGlvbiBtb3ZlQ2FsbChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgYmxvY2s6IEdyaWRCbG9jaykge1xyXG4gICAgaWYgKGJsb2NrLmN1cnJlbnRDYWxsQ291bnQgPiAwKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJtb3ZlXCIpO1xyXG4gICAgICAgIGJsb2NrLmN1cnJlbnRDYWxsQ291bnQtLTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGZpbmROZXh0Q2FsbChnYW1lU3RhdGUsIGJsb2NrKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gYW5nbGVDYWxsKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBibG9jazogR3JpZEJsb2NrKSB7XHJcbiAgICBpZiAoYmxvY2suY3VycmVudENhbGxDb3VudCA+IDApIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImFuZ2xlXCIpO1xyXG4gICAgICAgIGJsb2NrLmN1cnJlbnRDYWxsQ291bnQtLTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGZpbmROZXh0Q2FsbChnYW1lU3RhdGUsIGJsb2NrKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gZnVuY3Rpb24gd2lsbCBvbmx5IGhhdmUgZmluZE5leHRFeGVjdXRpb24gYml0XHJcbi8vIHdvbid0IGRvIGFueXRoaW5nIGV4Y2VwdCBjb250aW51ZSBleGVjdXRpb24gaWYgcGxheWVycyB1c2UgaXQgbGlrZSBhIG5vcm1hbCBjb21tYW5kIGJsb2NrXHJcbmZ1bmN0aW9uIHN0YXJ0Q2FsbChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgYmxvY2s6IEdyaWRCbG9jaykge1xyXG4gICAgY29uc29sZS5sb2coXCJzdGFydFwiKTtcclxuICAgIGZpbmROZXh0Q2FsbChnYW1lU3RhdGUsIGJsb2NrKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0TmV3VGhyZWFkQ2FsbChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgdGhyZWFkOiBudW1iZXIpIHtcclxuICAgIC8vIGxvY2F0ZSB0aHJlYWRcclxuICAgIGdhbWVTdGF0ZS5ibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XHJcbiAgICAgICAgaWYgKGJsb2NrIGluc3RhbmNlb2YgR3JpZEJsb2NrKSB7XHJcbiAgICAgICAgICAgIGlmIChibG9jay5jb21tYW5kRGF0YS50eXBlID09PSBDb21tYW5kVHlwZXMuU3RhcnQgLy8mJiB0aHJlYWROdW1iZXIgPT09IHRocmVhZFxyXG4gICAgICAgICAgICAgICAgJiYgYmxvY2suZmxvd1R5cGUgIT09IEZsb3dUeXBlcy5FbXB0eSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy8gc3RhcnQgdGhyZWFkXHJcbiAgICAgICAgICAgICAgICBmaW5kTmV4dENhbGwoZ2FtZVN0YXRlLCBibG9jayk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZmluZE5leHRDYWxsKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBwcmV2QmxvY2s6IEdyaWRCbG9jaykgOiB2b2lkIHtcclxuICAgIGxldCB0YXJnZXRSb3c6IG51bWJlcjtcclxuICAgIGxldCB0YXJnZXRDb2w6IG51bWJlcjtcclxuICAgIC8vIHJlc2V0IGNhbGwgY291bnRcclxuICAgIHByZXZCbG9jay5jdXJyZW50Q2FsbENvdW50ID0gcHJldkJsb2NrLmNvbW1hbmREYXRhLmNhbGxDb3VudDtcclxuICAgIC8vIFRPRE86IGFkZCBjb25kaXRpb25hbHNcclxuICAgIC8vIHRoaXMgd2lsbCB3b3JrIHdlbGwgaGVyZSBzaW5jZSBlYWNoIGNhbGwgZmluZHMgdGhlIG5leHQgY2FsbFxyXG4gICAgLy8gYWZ0ZXIgaXQgaGFzIGFscmVhZHkgZXhlY3V0ZWRcclxuICAgIHN3aXRjaChwcmV2QmxvY2suZmxvd1R5cGUpIHtcclxuICAgICAgICBjYXNlIEZsb3dUeXBlcy5VcDpcclxuICAgICAgICAgICAgdGFyZ2V0Um93ID0gcHJldkJsb2NrLnIgLSAxO1xyXG4gICAgICAgICAgICB0YXJnZXRDb2wgPSBwcmV2QmxvY2suYztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBGbG93VHlwZXMuRG93bjpcclxuICAgICAgICAgICAgdGFyZ2V0Um93ID0gcHJldkJsb2NrLnIgKyAxO1xyXG4gICAgICAgICAgICB0YXJnZXRDb2wgPSBwcmV2QmxvY2suYztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBGbG93VHlwZXMuUmlnaHQ6XHJcbiAgICAgICAgICAgIHRhcmdldENvbCA9IHByZXZCbG9jay5jICsgMTtcclxuICAgICAgICAgICAgdGFyZ2V0Um93ID0gcHJldkJsb2NrLnI7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgRmxvd1R5cGVzLkxlZnQ6XHJcbiAgICAgICAgICAgIHRhcmdldENvbCA9IHByZXZCbG9jay5jIC0gMTtcclxuICAgICAgICAgICAgdGFyZ2V0Um93ID0gcHJldkJsb2NrLnI7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG5cclxuICAgIGdhbWVTdGF0ZS5ibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XHJcbiAgICAgICAgaWYgKGJsb2NrIGluc3RhbmNlb2YgR3JpZEJsb2NrKSB7XHJcbiAgICAgICAgICAgIGlmIChibG9jay5yID09PSB0YXJnZXRSb3cgJiYgYmxvY2suYyA9PT0gdGFyZ2V0Q29sXHJcbiAgICAgICAgICAgICAgICAmJiBibG9jay5jb21tYW5kRGF0YS50eXBlICE9PSBDb21tYW5kVHlwZXMuRW1wdHlcclxuICAgICAgICAgICAgICAgICYmIGJsb2NrLmZsb3dUeXBlICE9PSBGbG93VHlwZXMuRW1wdHkpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaChibG9jay5jb21tYW5kRGF0YS50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBDb21tYW5kVHlwZXMuQW5nbGU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLmNhbGwgPSAoKSA9PiBhbmdsZUNhbGwoZ2FtZVN0YXRlLCBibG9jayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVTdGF0ZS5uZXh0U3RhY2sucHVzaChibG9jayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgQ29tbWFuZFR5cGVzLk1vdmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLmNhbGwgPSAoKSA9PiBtb3ZlQ2FsbChnYW1lU3RhdGUsIGJsb2NrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZVN0YXRlLm5leHRTdGFjay5wdXNoKGJsb2NrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBDb21tYW5kVHlwZXMuU3RhcnQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLmNhbGwgPSAoKSA9PiBzdGFydENhbGwoZ2FtZVN0YXRlLCBibG9jayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVTdGF0ZS5uZXh0U3RhY2sucHVzaChibG9jayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn0iLCJpbXBvcnQgeyBHYW1lU3RhdGUgfSBmcm9tIFwiLi9HYW1lU3RhdGVcIjtcclxuaW1wb3J0IHsgQ29tbWFuZFR5cGVzLCBGbG93VHlwZXMgfSBmcm9tIFwiLi9FbnVtc1wiO1xyXG5cclxuLy8gYWRkIGNvbW1hbmQgYW5kIGNvbmRpdGlvbmFsIHNsaWRlciB0eXBlcyBhcyBhIHBhcmFtIGFuZCB0byBFbnVtcy50c1xyXG4vLyBhZGQgdG8gR2VuZXJhdGVMZXZlbFxyXG4vLyBtYXliZSBhZGQgc3VwcG9ydCBmb3IgdGhyZWFkIHN0YXJ0ZXI/XHJcbmV4cG9ydCBjbGFzcyBTbGlkZXIge1xyXG4gICAgcHJvdGVjdGVkIGdhbWVTdGF0ZTogR2FtZVN0YXRlO1xyXG4gICAgcHVibGljIG1vdXNlRG93bjogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgc25hcEFtb3VudDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBwZXJjZW50YWdlOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgdmFsdWU6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IG1heFVuaXRzOiBudW1iZXI7XHJcbiAgICByZWFkb25seSBiYXNlVW5pdHM6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IHR5cGU6IENvbW1hbmRUeXBlcyB8IEZsb3dUeXBlcztcclxuICAgIHB1YmxpYyBzbGlkZXJYOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgc2xpZGVyWTogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgc2xpZGVySDogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgc2xpZGVyVzogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgc2xpZGVyQ29sb3I6IHN0cmluZztcclxuICAgIHB1YmxpYyBiYXJYOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgYmFyWTogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgYmFySDogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgYmFyVzogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgYmFyQ29sb3I6IHN0cmluZztcclxuICAgIGNvbnN0cnVjdG9yKEdhbWVTdGF0ZTogR2FtZVN0YXRlLCBYIDpudW1iZXIsIFk6IG51bWJlciwgTWF4VW5pdHM6IG51bWJlciwgVHlwZTogQ29tbWFuZFR5cGVzIHwgRmxvd1R5cGVzLCBTbmFwQW1vdW50OiBudW1iZXIgPSAxMCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlID0gR2FtZVN0YXRlO1xyXG4gICAgICAgIHRoaXMubW91c2VEb3duID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5tYXhVbml0cyA9IE1heFVuaXRzO1xyXG4gICAgICAgIHRoaXMuc25hcEFtb3VudCA9IFNuYXBBbW91bnQ7XHJcbiAgICAgICAgdGhpcy5iYXNlVW5pdHMgPSBNYXRoLnJvdW5kKHRoaXMubWF4VW5pdHMgLyB0aGlzLnNuYXBBbW91bnQpO1xyXG4gICAgICAgIHRoaXMudHlwZSA9IFR5cGU7XHJcbiAgICAgICAgdGhpcy5iYXJIID0gNzU7XHJcbiAgICAgICAgdGhpcy5iYXJXID0gMTA7XHJcbiAgICAgICAgdGhpcy5iYXJYID0gWDtcclxuICAgICAgICB0aGlzLmJhclkgPSBZO1xyXG4gICAgICAgIHRoaXMuYmFyQ29sb3IgPSBcInRoaXN0bGVcIjtcclxuICAgICAgICB0aGlzLnNsaWRlckggPSAxMDtcclxuICAgICAgICB0aGlzLnNsaWRlclcgPSAxNTtcclxuICAgICAgICB0aGlzLnNsaWRlclggPSBYO1xyXG4gICAgICAgIHRoaXMuc2xpZGVyWSA9IFkgKyB0aGlzLmJhckgvMiAtIHRoaXMuc2xpZGVySC8yO1xyXG4gICAgICAgIHRoaXMuc2xpZGVyQ29sb3IgPSBcInB1cnBsZVwiO1xyXG4gICAgICAgIHRoaXMucGVyY2VudGFnZSA9IDEgLSAodGhpcy5zbGlkZXJZIC0gdGhpcy5iYXJZICsgdGhpcy5zbGlkZXJILzIpIC8gdGhpcy5iYXJIO1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSBNYXRoLnJvdW5kKHRoaXMucGVyY2VudGFnZSAqIHRoaXMuc25hcEFtb3VudCkgLyB0aGlzLnNuYXBBbW91bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZSgpIDogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMubW91c2VEb3duKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmJhclkgLSB0aGlzLnNsaWRlckgvMiA8IHRoaXMuZ2FtZVN0YXRlLm1vdXNlWSAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5iYXJZICsgdGhpcy5iYXJIIC0gdGhpcy5zbGlkZXJILzIgPiB0aGlzLmdhbWVTdGF0ZS5tb3VzZVkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBTbGlkZXJZID0gdGhpcy5nYW1lU3RhdGUubW91c2VZO1xyXG4gICAgICAgICAgICAgICAgLy8gZmluZCBwZXJjZW50YWdlIHNsaWRlciBpcyB1cCB2ZXJ0aWNhbCBvbiBiYXJcclxuICAgICAgICAgICAgICAgIHRoaXMucGVyY2VudGFnZSA9IDEgLSAodGVtcFNsaWRlclkgLSB0aGlzLmJhclkgKyB0aGlzLnNsaWRlckgvMikgLyB0aGlzLmJhckg7XHJcbiAgICAgICAgICAgICAgICAvLyBzZXQgdGhlIHZhbHVlIHRvIGJlIHRoZSByb3VuZGVkIHBlcmNlbnRhZ2UgYmFzZWQgb24gc25hcCBhbW91bnRcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBNYXRoLnJvdW5kKHRoaXMucGVyY2VudGFnZSAqIHRoaXMuc25hcEFtb3VudCkgLyB0aGlzLnNuYXBBbW91bnQ7XHJcbiAgICAgICAgICAgICAgICAvLyBzZXQgc2xpZGVyWSB2YWx1ZSBiYXNlZCBvbiBuZXcgdmFsdWUgZnJvbSB0aGUgcm91bmRlZCBwZXJjYW50YWdlXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlclkgPSB0aGlzLmJhckggKyB0aGlzLmJhclkgLSAodGhpcy5zbGlkZXJILzIpIC0gKHRoaXMudmFsdWUgKiB0aGlzLmJhckgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkcmF3KCkgOiB2b2lkIHtcclxuICAgICAgICAvLyBkcmF3IGJhclxyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC5maWxsU3R5bGUgPSB0aGlzLmJhckNvbG9yO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC5maWxsUmVjdCh0aGlzLmJhclgsIHRoaXMuYmFyWSwgdGhpcy5iYXJXLCB0aGlzLmJhckgpO1xyXG5cclxuICAgICAgICAvLyBkcmF3IHNsaWRlclxyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC5maWxsU3R5bGUgPSB0aGlzLnNsaWRlckNvbG9yO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC5maWxsUmVjdCh0aGlzLnNsaWRlclggLSB0aGlzLnNsaWRlckgvNCwgdGhpcy5zbGlkZXJZLCB0aGlzLnNsaWRlclcsIHRoaXMuc2xpZGVySCk7XHJcbiAgICB9XHJcbn0iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi9kZWNsYXJhdGlvbnMvanNvbi5kLnRzXCIgLz5cclxuaW1wb3J0IHsgR2FtZVN0YXRlIH0gZnJvbSBcIi4vR2FtZVN0YXRlXCI7XHJcbmltcG9ydCBsZXZlbDEgZnJvbSAnLi4vZGF0YS9sZXZlbHMvbGV2ZWwxLmpzb24nO1xyXG5pbXBvcnQgeyBHZW5lcmF0ZUxldmVsIH0gZnJvbSBcIi4vR2VuZXJhdGVMZXZlbFwiO1xyXG5pbXBvcnQgeyBTZXRVcEV2ZW50TGlzdGVuZXJzIH0gZnJvbSBcIi4vU2V0VXBFdmVudExpc3RlbmVyc1wiO1xyXG5pbXBvcnQgeyBGbG93QmxvY2sgfSBmcm9tIFwiLi9GbG93QmxvY2tcIjtcclxuaW1wb3J0IHsgU2xpZGVyIH0gZnJvbSBcIi4vU2xpZGVyXCI7XHJcbmltcG9ydCB7IENvbW1hbmRUeXBlcyB9IGZyb20gXCIuL0VudW1zXCI7XHJcblxyXG4vLyBUT0RPOiBhZGQgc3BlY2lhbCB1bml0IGxvZ2ljIGZvciBzdGFydCBibG9jayAvIHRocmVhZCBibG9ja3Mgc2luY2UgdGhleSBkb24ndCBmb2xsb3cgc2FtZSBydWxlc1xyXG4vLyAtPiBpLmUuIHdpbGwgbmVlZCB0byBkbyBhIHN3aXRjaCBvbiB0eXBlIHdoZW4gdXBkYXRpbmcgdW5pdCB2YWx1ZXMgd2l0aGluIGNvbW1hbmQgYmxvY2sgYnV0dG9ucyB1cGRhdGUgbWV0aG9kXHJcbi8vIFRPRE86IGFkZCBiaWcgeWVsbG93IGJsb2NrIHRoYXQgcmVuZGVycyBiZWhpbmQgZ3JpZCBibG9ja3MgdG8gaW5kaWNhdGUgd2hpY2ggYmxvY2sgaXMgY3VycmVudGx5IGJlaW5nIGV4ZWN1dGVkXHJcbi8vIFRPRE86IGhhdmUgRmxvd0Jsb2NrQnV0dG9uIGFuZCBDb21tYW5kQmxvY2tCdXR0b25zIGV4dGVuZCBmcm9tIHRoZWlyIHJlc3BlY3RpdmUgYmxvY2tzXHJcbi8vIFRPRE86IHB1c2ggbW9zdCByZWNlbnRseSBjbGlja2VkIGNvbW1hbmQgLyBmbG93IGJsb2NrIHRvIHRvcCBvZiBibG9jayBhcnJheSB0byByZW5kZXIgaXQgb24gdG9wIG9mIGV2ZXJ5dGhpbmcgZWxzZVxyXG4vLyBUT0RPOiBzd2l0Y2ggc3BhY2ViYXIgY29udHJvbCBidXR0b24gdG8gY2xpY2thYmxlIHJhZGlvIGJ1dHRvblxyXG4vLyBUT0RPOiBhZGQgYmFzZSBVSSBjbGFzcyAvIHN3aXRjaCBzbGlkZXJbXSB0byBiYXNlVUlFbGVtZW50W10gaW4gR2FtZVN0YXRlXHJcbi8vIFRPRE86IGFkZCBleGVjdXRlIHByb2dyYW0gLyBzdG9wIHByb2dyYW0gYnV0dG9uc1xyXG4vLyBUT0RPOiBhZGQgbWFuaWZvbGQgY29sbGlzaW9uIHN5c3RlbSBmb3IgZ3JpZGJsb2NrIGNvbGxpc2lvbiB3aXRoIGZsb3cgYW5kIGNvbW1hbmQgYmxvY2tzLlxyXG4vLyAtPiBpLmUuIHNuYXAgY29tbWFuZCBibG9jayB0byBncmlkIGJsb2NrIHRoYXQgaGFzIHRoZSBiaWdnZXN0IG1hbmlmb2xkXHJcblxyXG4vLyBzZXQgdXAgZ2FtZSBzdGF0ZVxyXG52YXIgZ2FtZVN0YXRlID0gbmV3IEdhbWVTdGF0ZSgpO1xyXG5HZW5lcmF0ZUxldmVsKGdhbWVTdGF0ZSwgbGV2ZWwxLCBcImxpZ2h0Ymx1ZVwiKTtcclxuU2V0VXBFdmVudExpc3RlbmVycyhnYW1lU3RhdGUpO1xyXG5cclxuLy8gc2V0IHVwIHRlc3QgdWkgZWxlbWVudHNcclxuZ2FtZVN0YXRlLnNsaWRlcnMucHVzaChuZXcgU2xpZGVyKGdhbWVTdGF0ZSwgODAsIDM2NSwgMTAwLCBDb21tYW5kVHlwZXMuTW92ZSkpO1xyXG5nYW1lU3RhdGUuc2xpZGVycy5wdXNoKG5ldyBTbGlkZXIoZ2FtZVN0YXRlLCAxMzAsIDM2NSwgMzYwLCBDb21tYW5kVHlwZXMuQW5nbGUsIDgpKTtcclxuXHJcbmZ1bmN0aW9uIGRyYXcoKSA6IHZvaWQge1xyXG4gICAgZ2FtZVN0YXRlLmN0eC5jbGVhclJlY3QoMCwgMCwgZ2FtZVN0YXRlLmNhbnZhcy53aWR0aCwgZ2FtZVN0YXRlLmNhbnZhcy5oZWlnaHQpO1xyXG4gICAgZ2FtZVN0YXRlLmN0eC5iZWdpblBhdGgoKTtcclxuXHJcbiAgICAvLyByZW5kZXIgVUkgZWxlbWVudHNcclxuICAgIGdhbWVTdGF0ZS5zbGlkZXJzLmZvckVhY2goc2xpZGVyID0+IHtcclxuICAgICAgICBzbGlkZXIuZHJhdygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gcmVuZGVyIGFsbCBub24tZmxvdyBibG9ja3MgZmlyc3RcclxuICAgIGdhbWVTdGF0ZS5ibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XHJcbiAgICAgICAgaWYgKCEoYmxvY2sgaW5zdGFuY2VvZiBGbG93QmxvY2spKSB7XHJcbiAgICAgICAgICAgIGJsb2NrLmRyYXcoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyByZW5kZXIgYWxsIGZsb3cgYmxvY2tzIGxhc3QgdG8gbGF5ZXIgdGhlbSBvbiB0b3Agb2YgY29tbWFuZCBibG9ja3NcclxuICAgIGdhbWVTdGF0ZS5ibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XHJcbiAgICAgICAgaWYgKGJsb2NrIGluc3RhbmNlb2YgRmxvd0Jsb2NrKSB7XHJcbiAgICAgICAgICAgIGJsb2NrLmRyYXcoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBnYW1lU3RhdGUuY3R4LnN0cm9rZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGUoKSA6IHZvaWQge1xyXG4gICAgZ2FtZVN0YXRlLmJsb2Nrcy5mb3JFYWNoKGJsb2NrID0+IHtcclxuICAgICAgICBibG9jay51cGRhdGUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGdhbWVTdGF0ZS5zbGlkZXJzLmZvckVhY2goc2xpZGVyID0+IHtcclxuICAgICAgICBzbGlkZXIudXBkYXRlKCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSA6IHZvaWQge1xyXG4gICAgdXBkYXRlKCk7XHJcbiAgICBkcmF3KCk7XHJcblxyXG4gICAgY29uc3QgY2FsbFN0YWNrID0gZ2FtZVN0YXRlLm5leHRTdGFjaztcclxuICAgIGdhbWVTdGF0ZS5uZXh0U3RhY2sgPSBbXTtcclxuXHJcbiAgICBpZiAoY2FsbFN0YWNrLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjYWxsU3RhY2suZm9yRWFjaChibG9jayA9PiB7XHJcbiAgICAgICAgICAgIC8vIHdpbGwgY2FsbCBjb21tYW5kIGFuZCBwdXNoIGl0IGJhY2sgb24gc3RhY2tcclxuICAgICAgICAgICAgaWYgKGJsb2NrLmN1cnJlbnRDYWxsQ291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBibG9jay5jYWxsKCk7XHJcbiAgICAgICAgICAgICAgICBnYW1lU3RhdGUubmV4dFN0YWNrLnB1c2goYmxvY2spO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGVsc2UganVzdCBjYWxsIG9uY2UgYW5kIGZpbmQgbmV4dCBjYWxsXHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYmxvY2suY2FsbCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBnYW1lU3RhdGUucHJvZ3JhbVJ1bm5pbmcgPSBmYWxzZTtcclxuICAgIH1cclxufSwgMTIpOyIsImltcG9ydCB7IEdhbWVTdGF0ZSB9IGZyb20gXCIuL0dhbWVTdGF0ZVwiO1xyXG5pbXBvcnQgeyBHcmlkQmxvY2sgfSBmcm9tIFwiLi9HcmlkQmxvY2tcIjtcclxuaW1wb3J0IHsgQ29tbWFuZEJsb2NrQnV0dG9uIH0gZnJvbSBcIi4vQ29tbWFuZEJsb2NrXCI7XHJcbmltcG9ydCB7IEZsb3dCbG9ja0J1dHRvbiB9IGZyb20gXCIuL0Zsb3dCbG9ja1wiO1xyXG5pbXBvcnQgeyBDb21tYW5kVHlwZXMsIEZsb3dUeXBlcyB9IGZyb20gXCIuL0VudW1zXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gR2VuZXJhdGVMZXZlbChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgbGV2ZWxPYmo6IG9iamVjdCwgcGFsZXR0ZUNvbG9yOiBzdHJpbmcpIHtcclxuICAgIGxldCB5T2Zmc2V0OiBudW1iZXIgPSA1O1xyXG4gICAgbGV0IHhPZmZzZXQ6IG51bWJlciA9IDU7XHJcbiAgICBsZXQgbWF4WE9mZnNldDogbnVtYmVyID0gMDtcclxuICAgIGxldCBtYXhZT2Zmc2V0OiBudW1iZXIgPSAwO1xyXG5cclxuICAgIC8vIHNldCB1cCBncmlkIGZvciBDb21tYW5kIFBhbGV0dGVcclxuICAgIC8vIGFzc2lnbiByb3cgYW5kIGNvbHVtbiB2YWx1ZXMgdG8gZ3JpZCBibG9ja3NcclxuICAgIGZvciAodmFyIHIgPSAwOyByIDwgbGV2ZWxPYmpbXCJjb21tYW5kX3BhbGV0dGVcIl1bXCJibG9ja19oZWlnaHRcIl07IHIrKykge1xyXG4gICAgICAgIGZvciAodmFyIGMgPSAwOyBjIDwgbGV2ZWxPYmpbXCJjb21tYW5kX3BhbGV0dGVcIl1bXCJibG9ja193aWR0aFwiXTsgYysrKSB7XHJcbiAgICAgICAgICAgIG5ldyBHcmlkQmxvY2soZ2FtZVN0YXRlLCB4T2Zmc2V0LCB5T2Zmc2V0LCA1MCwgNTAsIHIsIGMsIHBhbGV0dGVDb2xvcik7XHJcbiAgICAgICAgICAgIHhPZmZzZXQgKz0gNTU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHlPZmZzZXQgKz0gNTU7XHJcbiAgICAgICAgbWF4WE9mZnNldCA9IHhPZmZzZXQ7XHJcbiAgICAgICAgeE9mZnNldCA9IDU7XHJcbiAgICB9XHJcblxyXG4gICAgbWF4WU9mZnNldCA9IHlPZmZzZXQ7XHJcbiAgICB5T2Zmc2V0ID0gbWF4WU9mZnNldCArIDIwO1xyXG5cclxuICAgIC8vIHNldCB1cCBDb21tYW5kIEJsb2NrIEJ1dHRvbnNcclxuICAgIC8vIENPTlNJREVSOiBBY2NvbW1vZGF0aW5nIGZvciBjb21tYW5kIHBhbGV0dGUgd2lkdGhcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGV2ZWxPYmpbXCJjb21tYW5kX2Jsb2Nrc1wiXS5sZW5ndGg7IGkgKyspIHtcclxuICAgICAgICBzd2l0Y2gobGV2ZWxPYmpbXCJjb21tYW5kX2Jsb2Nrc1wiXVtpXSkge1xyXG4gICAgICAgICAgICBjYXNlIFwic3RhcnRcIjpcclxuICAgICAgICAgICAgICAgIG5ldyBDb21tYW5kQmxvY2tCdXR0b24oZ2FtZVN0YXRlLCB4T2Zmc2V0LCB5T2Zmc2V0LCA1MCwgNTAsIFwidGhpc3RsZVwiLCBDb21tYW5kVHlwZXMuU3RhcnQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJtb3ZlXCI6XHJcbiAgICAgICAgICAgICAgICBuZXcgQ29tbWFuZEJsb2NrQnV0dG9uKGdhbWVTdGF0ZSwgeE9mZnNldCwgeU9mZnNldCwgNTAsIDUwLCBcInRoaXN0bGVcIiwgQ29tbWFuZFR5cGVzLk1vdmUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJhbmdsZVwiOlxyXG4gICAgICAgICAgICAgICAgbmV3IENvbW1hbmRCbG9ja0J1dHRvbihnYW1lU3RhdGUsIHhPZmZzZXQsIHlPZmZzZXQsIDUwLCA1MCwgXCJ0aGlzdGxlXCIsIENvbW1hbmRUeXBlcy5BbmdsZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInRocmVhZFwiOlxyXG4gICAgICAgICAgICAgICAgbmV3IENvbW1hbmRCbG9ja0J1dHRvbihnYW1lU3RhdGUsIHhPZmZzZXQsIHlPZmZzZXQsIDUwLCA1MCwgXCJ0aGlzdGxlXCIsIENvbW1hbmRUeXBlcy5UaHJlYWQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJsYXNlclwiOlxyXG4gICAgICAgICAgICAgICAgbmV3IENvbW1hbmRCbG9ja0J1dHRvbihnYW1lU3RhdGUsIHhPZmZzZXQsIHlPZmZzZXQsIDUwLCA1MCwgXCJncmVlblwiLCBDb21tYW5kVHlwZXMuTGFzZXIpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJzY2FuXCI6XHJcbiAgICAgICAgICAgICAgICBuZXcgQ29tbWFuZEJsb2NrQnV0dG9uKGdhbWVTdGF0ZSwgeE9mZnNldCwgeU9mZnNldCwgNTAsIDUwLCBcImRhcmtibHVlXCIsIENvbW1hbmRUeXBlcy5TY2FuKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiZ3JhcHBsZVwiOlxyXG4gICAgICAgICAgICAgICAgbmV3IENvbW1hbmRCbG9ja0J1dHRvbihnYW1lU3RhdGUsIHhPZmZzZXQsIHlPZmZzZXQsIDUwLCA1MCwgXCJtYXJvb25cIiwgQ29tbWFuZFR5cGVzLkdyYXBwbGUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHhPZmZzZXQgKz0gNTU7XHJcbiAgICB9XHJcblxyXG4gICAgeE9mZnNldCA9IG1heFhPZmZzZXQgKyAyMDtcclxuICAgIHlPZmZzZXQgPSA1O1xyXG5cclxuICAgIC8vIHNldCB1cCBGbG93IEJsb2NrIEJ1dHRvbnNcclxuICAgIC8vIENPTlNJREVSOiBBY2NvbW1vZGF0aW5nIGZvciBjb21tYW5kIHBhbGV0dGUgaGVpZ2h0XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxldmVsT2JqW1wiZmxvd19ibG9ja3NcIl0ubGVuZ3RoOyBpICsrKSB7XHJcbiAgICAgICAgc3dpdGNoKGxldmVsT2JqW1wiZmxvd19ibG9ja3NcIl1baV0pIHtcclxuICAgICAgICAgICAgY2FzZSBcInVwXCI6XHJcbiAgICAgICAgICAgICAgICBuZXcgRmxvd0Jsb2NrQnV0dG9uKGdhbWVTdGF0ZSwgeE9mZnNldCwgeU9mZnNldCwgNTAsIDUwLCBcInllbGxvd1wiLCBGbG93VHlwZXMuVXApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJsZWZ0XCI6XHJcbiAgICAgICAgICAgICAgICBuZXcgRmxvd0Jsb2NrQnV0dG9uKGdhbWVTdGF0ZSwgeE9mZnNldCwgeU9mZnNldCwgNTAsIDUwLCBcInllbGxvd1wiLCBGbG93VHlwZXMuTGVmdCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInJpZ2h0XCI6XHJcbiAgICAgICAgICAgICAgICBuZXcgRmxvd0Jsb2NrQnV0dG9uKGdhbWVTdGF0ZSwgeE9mZnNldCwgeU9mZnNldCwgNTAsIDUwLCBcInllbGxvd1wiLCBGbG93VHlwZXMuUmlnaHQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJkb3duXCI6XHJcbiAgICAgICAgICAgICAgICBuZXcgRmxvd0Jsb2NrQnV0dG9uKGdhbWVTdGF0ZSwgeE9mZnNldCwgeU9mZnNldCwgNTAsIDUwLCBcInllbGxvd1wiLCBGbG93VHlwZXMuRG93bik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgeU9mZnNldCArPSA1NTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IEdhbWVTdGF0ZSB9IGZyb20gXCIuL0dhbWVTdGF0ZVwiO1xyXG5pbXBvcnQgeyBDb21tYW5kQmxvY2ssIENvbW1hbmRCbG9ja0J1dHRvbiB9IGZyb20gXCIuL0NvbW1hbmRCbG9ja1wiO1xyXG5pbXBvcnQgeyBHcmlkQmxvY2sgfSBmcm9tIFwiLi9HcmlkQmxvY2tcIjtcclxuaW1wb3J0IHsgRmxvd0Jsb2NrLCBGbG93QmxvY2tCdXR0b24gfSBmcm9tIFwiLi9GbG93QmxvY2tcIjtcclxuaW1wb3J0IHsgQ29tbWFuZFR5cGVzLCBGbG93VHlwZXMgfSBmcm9tIFwiLi9FbnVtc1wiO1xyXG5pbXBvcnQgeyBzdGFydE5ld1RocmVhZENhbGwgfSBmcm9tIFwiLi9Qcm9ncmFtRXhlY3V0aW9uXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gU2V0VXBFdmVudExpc3RlbmVycyhnYW1lU3RhdGU6IEdhbWVTdGF0ZSkge1xyXG4gICAgZ2FtZVN0YXRlLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBmdW5jdGlvbigpIDogdm9pZCB7XHJcbiAgICAgICAgLy8gQ29sbGlzaW9uIGRldGVjdGlvbiBiZXR3ZWVuIGNsaWNrZWQgb2Zmc2V0IGFuZCBibG9jay5cclxuICAgICAgICBnYW1lU3RhdGUuYmxvY2tzLmZvckVhY2goYmxvY2sgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZ2FtZVN0YXRlLm1vdXNlWSA+IGJsb2NrLnkgJiYgZ2FtZVN0YXRlLm1vdXNlWSA8IGJsb2NrLnkgKyBibG9jay5oXHJcbiAgICAgICAgICAgICAgICAmJiBnYW1lU3RhdGUubW91c2VYID4gYmxvY2sueCAmJiBnYW1lU3RhdGUubW91c2VYIDwgYmxvY2sueCArIGJsb2NrLncpIHtcclxuICAgICAgICAgICAgICAgIGlmIChibG9jayBpbnN0YW5jZW9mIENvbW1hbmRCbG9jayAmJiBnYW1lU3RhdGUuY29tbWFuZENvbnRyb2xcclxuICAgICAgICAgICAgICAgICAgICB8fCBibG9jayBpbnN0YW5jZW9mIENvbW1hbmRCbG9ja0J1dHRvbiAmJiBnYW1lU3RhdGUuY29tbWFuZENvbnRyb2xcclxuICAgICAgICAgICAgICAgICAgICB8fCBibG9jayBpbnN0YW5jZW9mIEZsb3dCbG9jayAmJiBnYW1lU3RhdGUuZmxvd0NvbnRyb2xcclxuICAgICAgICAgICAgICAgICAgICB8fCBibG9jayBpbnN0YW5jZW9mIEZsb3dCbG9ja0J1dHRvbiAmJiBnYW1lU3RhdGUuZmxvd0NvbnRyb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICBibG9jay5tb3VzZURvd24gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYmxvY2sgaW5zdGFuY2VvZiBHcmlkQmxvY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayByYWRpbyBidXR0b24gZm9yIGZsb3cgb3IgY29tbWFuZCBjb250cm9sXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVTdGF0ZS5jb21tYW5kQ29udHJvbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBibG9jay5jb21tYW5kRGF0YS50eXBlID0gQ29tbWFuZFR5cGVzLkVtcHR5O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChnYW1lU3RhdGUuZmxvd0NvbnRyb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2suZmxvd1R5cGUgPSBGbG93VHlwZXMuRW1wdHk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGNoZWNrIGZvciBzbGlkZXJzIGJlaW5nIGNsaWNrZWRcclxuICAgICAgICBnYW1lU3RhdGUuc2xpZGVycy5mb3JFYWNoKHMgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZ2FtZVN0YXRlLm1vdXNlWSA+IHMuc2xpZGVyWSAmJiBnYW1lU3RhdGUubW91c2VZIDwgcy5zbGlkZXJZICsgcy5zbGlkZXJIXHJcbiAgICAgICAgICAgICAgICAmJiBnYW1lU3RhdGUubW91c2VYID4gcy5zbGlkZXJYICYmIGdhbWVTdGF0ZS5tb3VzZVggPCBzLnNsaWRlclggKyBzLnNsaWRlclcpIHtcclxuICAgICAgICAgICAgICAgIHMubW91c2VEb3duID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuICAgIH0sIGZhbHNlKTtcclxuXHJcbiAgICAvLyBtYWtlIHN1cmUgYWxsIGNsaWNrYWJsZSBlbnRpdGllcyBhcmVuJ3QgY2xpY2thYmxlIG9uIG1vdXNldXBcclxuICAgIGdhbWVTdGF0ZS5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGZ1bmN0aW9uKCkgOiB2b2lkIHtcclxuICAgICAgICBnYW1lU3RhdGUuYmxvY2tzLmZvckVhY2goYmxvY2sgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYmxvY2sgaW5zdGFuY2VvZiBDb21tYW5kQmxvY2tcclxuICAgICAgICAgICAgICAgIHx8IGJsb2NrIGluc3RhbmNlb2YgRmxvd0Jsb2NrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmxvY2subW91c2VEb3duKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmxvY2subW91c2VEb3duID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZ2FtZVN0YXRlLnNsaWRlcnMuZm9yRWFjaChzID0+IHtcclxuICAgICAgICAgICAgcy5tb3VzZURvd24gPSBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgIH0sIGZhbHNlKTtcclxuXHJcbiAgICBnYW1lU3RhdGUuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGZ1bmN0aW9uKGV2dDogTW91c2VFdmVudCkgOiB2b2lkIHtcclxuICAgICAgICBnYW1lU3RhdGUubW91c2VYID0gKGV2dC5jbGllbnRYIC0gZ2FtZVN0YXRlLnJlY3QubGVmdCkgLyAoZ2FtZVN0YXRlLnJlY3QucmlnaHQgLSBnYW1lU3RhdGUucmVjdC5sZWZ0KSAqIGdhbWVTdGF0ZS5jYW52YXMud2lkdGg7XHJcbiAgICAgICAgZ2FtZVN0YXRlLm1vdXNlWSA9IChldnQuY2xpZW50WSAtIGdhbWVTdGF0ZS5yZWN0LnRvcCkgLyAoZ2FtZVN0YXRlLnJlY3QuYm90dG9tIC0gZ2FtZVN0YXRlLnJlY3QudG9wKSAqIGdhbWVTdGF0ZS5jYW52YXMuaGVpZ2h0O1xyXG4gICAgfSwgZmFsc2UpO1xyXG5cclxuICAgIHdpbmRvdy5vbmtleXVwID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIC8vIGkuZS4gU3BhY2VCYXIgcHJlc3NlZFxyXG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IDMyKSB7XHJcbiAgICAgICAgICAgIGlmIChnYW1lU3RhdGUuZmxvd0NvbnRyb2wpIHtcclxuICAgICAgICAgICAgICAgIGdhbWVTdGF0ZS5mbG93Q29udHJvbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgZ2FtZVN0YXRlLmNvbW1hbmRDb250cm9sID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ29tbWFuZCBDb250cm9sIVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChnYW1lU3RhdGUuY29tbWFuZENvbnRyb2wpIHtcclxuICAgICAgICAgICAgICAgIGdhbWVTdGF0ZS5jb21tYW5kQ29udHJvbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgZ2FtZVN0YXRlLmZsb3dDb250cm9sID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRmxvdyBDb250cm9sIVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gaS5lLiBTIGtleSBwcmVzc2VkXHJcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gODMpIHtcclxuICAgICAgICAgICAgaWYgKCFnYW1lU3RhdGUucHJvZ3JhbVJ1bm5pbmcpIHtcclxuICAgICAgICAgICAgICAgIGdhbWVTdGF0ZS5wcm9ncmFtUnVubmluZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBzdGFydE5ld1RocmVhZENhbGwoZ2FtZVN0YXRlLCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=