!function(t){var e={};function o(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(n,s,function(e){return t[e]}.bind(null,s));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=1)}([function(t){t.exports={next_level:"level2",command_palette:{block_width:5,block_height:5},command_blocks:["start","move","angle"],flow_blocks:["up","down","left","right"]}},function(t,e,o){"use strict";o.r(e);var n,s,a=function(){return function(t){this.canvas=t&&t.canvas||document.getElementById("gameScreen"),this.ctx=t&&t.ctx||this.canvas.getContext("2d"),this.rect=t&&t.rect||this.canvas.getBoundingClientRect(),this.blocks=t&&t.blocks||[],this.sliders=t&&t.sliders||[],this.mouseX=t&&t.mouseX||0,this.mouseY=t&&t.mouseY||0,this.commandControl=t&&t.commandControl||!0,this.flowControl=t&&t.flowControl||!1,this.nextStack=t&&t.nextStack||[],this.programRunning=t&&t.programRunning||!1}}(),i=o(0),r=function(){function t(t,e,o,n,s,a){this.GameState=t,this.X=e,this.Y=o,this.H=n,this.W=s,this.Color=a,this.gameState=t,this.x=e,this.y=o,this.h=n,this.w=s,this.color=a}return t.prototype.draw=function(){},t.prototype.update=function(){},t}();!function(t){t[t.Empty=0]="Empty",t[t.Start=1]="Start",t[t.Move=2]="Move",t[t.Angle=3]="Angle",t[t.Thread=4]="Thread",t[t.Scan=5]="Scan",t[t.Laser=6]="Laser",t[t.Grapple=7]="Grapple"}(n||(n={})),function(t){t[t.Empty=0]="Empty",t[t.Up=1]="Up",t[t.Down=2]="Down",t[t.Left=3]="Left",t[t.Right=4]="Right",t[t.ConditionalLeftRight=5]="ConditionalLeftRight",t[t.ConditionalLeftUp=6]="ConditionalLeftUp",t[t.ConditionalLeftDown=7]="ConditionalLeftDown",t[t.ConditionalUpRight=8]="ConditionalUpRight",t[t.ConditionalUpDown=9]="ConditionalUpDown",t[t.ConditionalDownRight=10]="ConditionalDownRight"}(s||(s={}));var c=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),h=function(t){function e(e,o,s,a,i,r,c,h,l){var u=t.call(this,e,o,s,a,i,h)||this;switch(u.units=r,u.callCount=c,u.mouseDown=!0,u.set=!1,u.type=l,u.image=new Image,l){case n.Start:u.image.src="data/textures/StartBlock.png";break;case n.Move:u.image.src="data/textures/MoveBlock.png";break;case n.Angle:u.image.src="data/textures/AngleBlock.png";break;case n.Thread:u.image.src="data/textures/ThreadBlock.png"}return u.gameState.blocks.push(u),u}return c(e,t),e.prototype.update=function(){if(this.mouseDown&&(this.x=this.gameState.mouseX-this.w/2,this.y=this.gameState.mouseY-this.h/2,this.set=!1),!this.mouseDown&&!this.set){var t=this.gameState.blocks.indexOf(this);this.gameState.blocks.splice(t,1)}},e.prototype.draw=function(){this.gameState.ctx.fillStyle=this.color,this.gameState.ctx.fillRect(this.x,this.y,this.w,this.h),this.gameState.ctx.translate(this.x,this.y),this.gameState.ctx.drawImage(this.image,0,0),this.gameState.ctx.translate(-this.x,-this.y)},e}(r),l=function(t){function e(e,o,s,a,i,r,c){var h=t.call(this,e,o,s,a,i,r)||this;switch(h.mouseDown=!1,h.type=c,h.image=new Image,h.units=0,h.callCount=0,c){case n.Start:h.image.src="data/textures/StartBlock.png";break;case n.Move:h.image.src="data/textures/MoveBlock.png";break;case n.Angle:h.image.src="data/textures/AngleBlock.png";break;case n.Thread:h.image.src="data/textures/ThreadBlock.png"}return h.gameState.blocks.push(h),h}return c(e,t),e.prototype.update=function(){var t=this;this.mouseDown&&(this.mouseDown=!1,this.gameState.sliders.forEach(function(e){e.type===t.type&&(t.callCount=Math.round(e.value*e.maxUnits/e.baseUnits),t.units=e.baseUnits)}),new h(this.gameState,this.x,this.y,this.h,this.w,this.units,this.callCount,this.Color,this.type))},e.prototype.draw=function(){this.gameState.ctx.fillStyle=this.color,this.gameState.ctx.fillRect(this.x,this.y,this.w,this.h),this.gameState.ctx.translate(this.x,this.y),this.gameState.ctx.drawImage(this.image,0,0),this.gameState.ctx.translate(-this.x,-this.y)},e}(r),u=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),m=function(t){function e(e,o,n,a,i,r,c){var h=t.call(this,e,o,n,a,i,r)||this;switch(h.gameState=e,h.type=c,h.mouseDown=!0,h.set=!1,h.image=new Image,c){case s.Up:h.image.src="data/textures/UpArrow.png";break;case s.Down:h.image.src="data/textures/DownArrow.png";break;case s.Left:h.image.src="data/textures/LeftArrow.png";break;case s.Right:h.image.src="data/textures/RightArrow.png"}return h.gameState.blocks.push(h),h}return u(e,t),e.prototype.update=function(){if(this.mouseDown&&(this.x=this.gameState.mouseX-this.w/2,this.y=this.gameState.mouseY-this.h/2,this.set=!1),!this.mouseDown&&!this.set){var t=this.gameState.blocks.indexOf(this);this.gameState.blocks.splice(t,1)}},e.prototype.draw=function(){this.gameState.ctx.translate(this.x,this.y),this.gameState.ctx.drawImage(this.image,0,0),this.gameState.ctx.translate(-this.x,-this.y),this.gameState.ctx.strokeStyle=this.color,this.gameState.ctx.rect(this.x,this.y,this.w,this.h)},e}(r),f=function(t){function e(e,o,n,a,i,r,c){var h=t.call(this,e,o,n,a,i,r)||this;switch(h.type=c,h.mouseDown=!1,h.image=new Image,c){case s.Up:h.image.src="data/textures/UpArrow.png";break;case s.Down:h.image.src="data/textures/DownArrow.png";break;case s.Left:h.image.src="data/textures/LeftArrow.png";break;case s.Right:h.image.src="data/textures/RightArrow.png"}return h.gameState.blocks.push(h),h}return u(e,t),e.prototype.update=function(){this.mouseDown&&(this.mouseDown=!1,new m(this.gameState,this.x,this.y,this.h,this.w,this.Color,this.type))},e.prototype.draw=function(){this.gameState.ctx.translate(this.x,this.y),this.gameState.ctx.drawImage(this.image,0,0),this.gameState.ctx.translate(-this.x,-this.y),this.gameState.ctx.strokeStyle=this.color,this.gameState.ctx.rect(this.x,this.y,this.w,this.h)},e}(r),p=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),g=function(t){function e(e,o,a,i,r,c,h,l){var u=t.call(this,e,o,a,i,r,l)||this;return u.r=c,u.c=h,u.commandType=n.Empty,u.flowType=s.Empty,u.gameState.blocks.push(u),u}return p(e,t),e.prototype.update=function(){var t=this;this.gameState.blocks.forEach(function(e){(e instanceof h||e instanceof m)&&!1===e.mouseDown&&e.x<t.x+t.w&&e.x+e.w>t.x&&e.y<t.y+t.h&&e.h+e.y>t.y&&(t.commandType===n.Empty&&e instanceof h?(e.x=t.x,e.y=t.y,e.set=!0,t.commandType=e.type,t.units=e.units,t.callCount=e.callCount,t.currentCallCount=e.callCount):t.flowType===s.Empty&&e instanceof m&&(e.x=t.x,e.y=t.y,e.set=!0,t.flowType=e.type))})},e.prototype.draw=function(){this.gameState.ctx.fillStyle=this.color,this.gameState.ctx.fillRect(this.x,this.y,this.w,this.h)},e}(r);function d(t,e){var o,a;switch(e.currentCallCount=e.callCount,e.flowType){case s.Up:o=e.r-1,a=e.c;break;case s.Down:o=e.r+1,a=e.c;break;case s.Right:a=e.c+1,o=e.r;break;case s.Left:a=e.c-1,o=e.r}t.blocks.forEach(function(e){if(e instanceof g&&e.r===o&&e.c===a&&e.commandType!==n.Empty&&e.flowType!==s.Empty)switch(e.commandType){case n.Angle:e.call=function(){return function(t,e){e.currentCallCount>0?(console.log("angle"),e.currentCallCount--):d(t,e)}(t,e)},t.nextStack.push(e);break;case n.Move:e.call=function(){return function(t,e){e.currentCallCount>0?(console.log("move"),e.currentCallCount--):d(t,e)}(t,e)},t.nextStack.push(e);break;case n.Start:e.call=function(){return function(t,e){console.log("start"),d(t,e)}(t,e)},t.nextStack.push(e)}})}var w=function(){function t(t,e,o,n,s,a){void 0===a&&(a=10),this.gameState=t,this.mouseDown=!1,this.maxUnits=n,this.snapAmount=a,this.baseUnits=Math.round(this.maxUnits/this.snapAmount),this.type=s,this.barH=75,this.barW=10,this.barX=e,this.barY=o,this.barColor="thistle",this.sliderH=10,this.sliderW=15,this.sliderX=e,this.sliderY=o+this.barH/2-this.sliderH/2,this.sliderColor="purple",this.percentage=1-(this.sliderY-this.barY+this.sliderH/2)/this.barH,this.value=Math.round(this.percentage*this.snapAmount)/this.snapAmount}return t.prototype.update=function(){if(this.mouseDown&&this.barY-this.sliderH/2<this.gameState.mouseY&&this.barY+this.barH-this.sliderH/2>this.gameState.mouseY){var t=this.gameState.mouseY;this.percentage=1-(t-this.barY+this.sliderH/2)/this.barH,this.value=Math.round(this.percentage*this.snapAmount)/this.snapAmount,this.sliderY=this.barH+this.barY-this.sliderH/2-this.value*this.barH,console.log(Math.round(this.value*this.maxUnits))}},t.prototype.draw=function(){this.gameState.ctx.fillStyle=this.barColor,this.gameState.ctx.fillRect(this.barX,this.barY,this.barW,this.barH),this.gameState.ctx.fillStyle=this.sliderColor,this.gameState.ctx.fillRect(this.sliderX-this.sliderH/4,this.sliderY,this.sliderW,this.sliderH)},t}(),y=new a;!function(t,e,o){for(var a=5,i=5,r=0,c=0;c<e.command_palette.block_height;c++){for(var h=0;h<e.command_palette.block_width;h++)new g(t,i,a,50,50,c,h,o),i+=55;a+=55,r=i,i=5}a+=20;for(var u=0;u<e.command_blocks.length;u++){switch(e.command_blocks[u]){case"start":new l(t,i,a,50,50,"thistle",n.Start);break;case"move":new l(t,i,a,50,50,"thistle",n.Move);break;case"angle":new l(t,i,a,50,50,"thistle",n.Angle);break;case"thread":new l(t,i,a,50,50,"thistle",n.Thread);break;case"laser":new l(t,i,a,50,50,"green",n.Laser);break;case"scan":new l(t,i,a,50,50,"darkblue",n.Scan);break;case"grapple":new l(t,i,a,50,50,"maroon",n.Grapple)}i+=55}for(i=r+20,a=5,u=0;u<e.flow_blocks.length;u++){switch(e.flow_blocks[u]){case"up":new f(t,i,a,50,50,"yellow",s.Up);break;case"left":new f(t,i,a,50,50,"yellow",s.Left);break;case"right":new f(t,i,a,50,50,"yellow",s.Right);break;case"down":new f(t,i,a,50,50,"yellow",s.Down)}a+=55}}(y,i,"lightblue"),function(t){t.canvas.addEventListener("mousedown",function(){t.blocks.forEach(function(e){t.mouseY>e.y&&t.mouseY<e.y+e.h&&t.mouseX>e.x&&t.mouseX<e.x+e.w&&(e instanceof h&&t.commandControl||e instanceof l&&t.commandControl||e instanceof m&&t.flowControl||e instanceof f&&t.flowControl?e.mouseDown=!0:e instanceof g&&(t.commandControl?e.commandType=n.Empty:t.flowControl&&(e.flowType=s.Empty)))}),t.sliders.forEach(function(e){t.mouseY>e.sliderY&&t.mouseY<e.sliderY+e.sliderH&&t.mouseX>e.sliderX&&t.mouseX<e.sliderX+e.sliderW&&(e.mouseDown=!0)})},!1),t.canvas.addEventListener("mouseup",function(){t.blocks.forEach(function(t){(t instanceof h||t instanceof m)&&t.mouseDown&&(t.mouseDown=!1)}),t.sliders.forEach(function(t){t.mouseDown=!1})},!1),t.canvas.addEventListener("mousemove",function(e){t.mouseX=(e.clientX-t.rect.left)/(t.rect.right-t.rect.left)*t.canvas.width,t.mouseY=(e.clientY-t.rect.top)/(t.rect.bottom-t.rect.top)*t.canvas.height},!1),window.onkeyup=function(e){32===e.keyCode&&(t.flowControl?(t.flowControl=!1,t.commandControl=!0,console.log("Command Control!")):t.commandControl&&(t.commandControl=!1,t.flowControl=!0,console.log("Flow Control!"))),83===e.keyCode&&(t.programRunning||(t.programRunning=!0,function(t,e){t.blocks.forEach(function(e){e instanceof g&&e.commandType===n.Start&&e.flowType!==s.Empty&&d(t,e)})}(t)))}}(y),y.sliders.push(new w(y,80,365,100,n.Move)),y.sliders.push(new w(y,130,365,360,n.Angle,8)),setInterval(function(){y.blocks.forEach(function(t){t.update()}),y.sliders.forEach(function(t){t.update()}),y.ctx.clearRect(0,0,y.canvas.width,y.canvas.height),y.ctx.beginPath(),y.sliders.forEach(function(t){t.draw()}),y.blocks.forEach(function(t){t instanceof m||t.draw()}),y.blocks.forEach(function(t){t instanceof m&&t.draw()}),y.ctx.stroke();var t=y.nextStack;y.nextStack=[],t.length>0?t.forEach(function(t){t.currentCallCount>0?(t.call(),y.nextStack.push(t)):t.call()}):y.programRunning=!1},12)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL0dhbWVTdGF0ZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvRW51bXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0Jhc2VCbG9jay50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tbWFuZEJsb2NrLnRzIiwid2VicGFjazovLy8uL3NyYy9GbG93QmxvY2sudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0dyaWRCbG9jay50cyIsIndlYnBhY2s6Ly8vLi9zcmMvUHJvZ3JhbUV4ZWN1dGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvU2xpZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9tYWluLnRzIiwid2VicGFjazovLy8uL3NyYy9HZW5lcmF0ZUxldmVsLnRzIiwid2VicGFjazovLy8uL3NyYy9TZXRVcEV2ZW50TGlzdGVuZXJzLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiQ29tbWFuZEJsb2NrVHlwZXMiLCJGbG93QmxvY2tUeXBlcyIsIkdhbWVTdGF0ZV9HYW1lU3RhdGUiLCJvYmoiLCJ0aGlzIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImN0eCIsImdldENvbnRleHQiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiYmxvY2tzIiwic2xpZGVycyIsIm1vdXNlWCIsIm1vdXNlWSIsImNvbW1hbmRDb250cm9sIiwiZmxvd0NvbnRyb2wiLCJuZXh0U3RhY2siLCJwcm9ncmFtUnVubmluZyIsIkJhc2VCbG9jayIsIkdhbWVTdGF0ZSIsIlgiLCJZIiwiSCIsIlciLCJDb2xvciIsImdhbWVTdGF0ZSIsIngiLCJ5IiwiaCIsInciLCJjb2xvciIsImRyYXciLCJ1cGRhdGUiLCJDb21tYW5kQmxvY2tfQ29tbWFuZEJsb2NrIiwiX3N1cGVyIiwiQ29tbWFuZEJsb2NrIiwiVW5pdHMiLCJDYWxsQ291bnQiLCJUeXBlIiwiX3RoaXMiLCJ1bml0cyIsImNhbGxDb3VudCIsIm1vdXNlRG93biIsInNldCIsInR5cGUiLCJpbWFnZSIsIkltYWdlIiwiU3RhcnQiLCJzcmMiLCJNb3ZlIiwiQW5nbGUiLCJUaHJlYWQiLCJwdXNoIiwiX19leHRlbmRzIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJ0cmFuc2xhdGUiLCJkcmF3SW1hZ2UiLCJDb21tYW5kQmxvY2tfQ29tbWFuZEJsb2NrQnV0dG9uIiwiQ29tbWFuZEJsb2NrQnV0dG9uIiwiZm9yRWFjaCIsInNsaWRlciIsIk1hdGgiLCJyb3VuZCIsIm1heFVuaXRzIiwiYmFzZVVuaXRzIiwiRmxvd0Jsb2NrX0Zsb3dCbG9jayIsIkZsb3dCbG9jayIsIlVwIiwiRG93biIsIkxlZnQiLCJSaWdodCIsIkZsb3dCbG9ja19leHRlbmRzIiwic3Ryb2tlU3R5bGUiLCJGbG93QmxvY2tfRmxvd0Jsb2NrQnV0dG9uIiwiRmxvd0Jsb2NrQnV0dG9uIiwiR3JpZEJsb2NrX0dyaWRCbG9jayIsIkdyaWRCbG9jayIsIlJvdyIsIkNvbHVtbiIsImNvbW1hbmRUeXBlIiwiRW1wdHkiLCJmbG93VHlwZSIsIkdyaWRCbG9ja19leHRlbmRzIiwiYmxvY2siLCJjdXJyZW50Q2FsbENvdW50IiwiZmluZE5leHRDYWxsIiwicHJldkJsb2NrIiwidGFyZ2V0Um93IiwidGFyZ2V0Q29sIiwiY29uc29sZSIsImxvZyIsImFuZ2xlQ2FsbCIsIm1vdmVDYWxsIiwic3RhcnRDYWxsIiwiU2xpZGVyIiwiTWF4VW5pdHMiLCJTbmFwQW1vdW50Iiwic25hcEFtb3VudCIsImJhckgiLCJiYXJXIiwiYmFyWCIsImJhclkiLCJiYXJDb2xvciIsInNsaWRlckgiLCJzbGlkZXJXIiwic2xpZGVyWCIsInNsaWRlclkiLCJzbGlkZXJDb2xvciIsInBlcmNlbnRhZ2UiLCJ0ZW1wU2xpZGVyWSIsIm1haW5fZ2FtZVN0YXRlIiwibGV2ZWxPYmoiLCJwYWxldHRlQ29sb3IiLCJ5T2Zmc2V0IiwieE9mZnNldCIsIm1heFhPZmZzZXQiLCJsZW5ndGgiLCJMYXNlciIsIlNjYW4iLCJHcmFwcGxlIiwiR2VuZXJhdGVMZXZlbCIsImxldmVsMSIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiLCJjbGllbnRYIiwibGVmdCIsInJpZ2h0Iiwid2lkdGgiLCJjbGllbnRZIiwidG9wIiwiYm90dG9tIiwiaGVpZ2h0Iiwid2luZG93Iiwib25rZXl1cCIsImUiLCJrZXlDb2RlIiwidGhyZWFkIiwic3RhcnROZXdUaHJlYWRDYWxsIiwiU2V0VXBFdmVudExpc3RlbmVycyIsInNldEludGVydmFsIiwiY2xlYXJSZWN0IiwiYmVnaW5QYXRoIiwic3Ryb2tlIiwiY2FsbFN0YWNrIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFB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QU14RCxTQUtkbUYsRUFBVXhHLE9BQU9xRCxRQUFRLFNBQUF3QixHQUNqQkEsYUFBaUJsQixHQUNqQmtCLEVBQU14RCxTQUlkbUYsRUFBVTVHLElBQUk0SSxTQWlCZCxJQUFNQyxFQUFZakMsRUFBVWxHLFVBQzVCa0csRUFBVWxHLGFBRU5tSSxFQUFVM0IsT0FBUyxFQUNuQjJCLEVBQVVwRixRQUFRLFNBQUF3QixHQUVWQSxFQUFNQyxpQkFBbUIsR0FDekJELEVBQU10SCxPQUNOaUosRUFBVWxHLFVBQVVvQyxLQUFLbUMsSUFJekJBLEVBQU10SCxTQUtkaUosRUFBVWpHLGdCQUFpQixHQUVoQyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG4iLCJpbXBvcnQgeyBCYXNlQmxvY2sgfSBmcm9tIFwiLi9CYXNlQmxvY2tcIjtcclxuaW1wb3J0IHsgR3JpZEJsb2NrIH0gZnJvbSBcIi4vR3JpZEJsb2NrXCI7XHJcbmltcG9ydCB7IFNsaWRlciB9IGZyb20gXCIuL1NsaWRlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdhbWVTdGF0ZSB7XHJcbiAgICBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcbiAgICByZWN0OiBDbGllbnRSZWN0IHwgRE9NUmVjdDtcclxuICAgIGJsb2NrczogQmFzZUJsb2NrW107XHJcbiAgICBzbGlkZXJzOiBTbGlkZXJbXTtcclxuICAgIG1vdXNlWDogbnVtYmVyO1xyXG4gICAgbW91c2VZOiBudW1iZXI7XHJcbiAgICBjb21tYW5kQ29udHJvbDogYm9vbGVhbjtcclxuICAgIGZsb3dDb250cm9sOiBib29sZWFuO1xyXG4gICAgbmV4dFN0YWNrOiBHcmlkQmxvY2tbXTtcclxuICAgIHByb2dyYW1SdW5uaW5nOiBib29sZWFuO1xyXG4gICAgY29uc3RydWN0b3Iob2JqPzogSUdhbWVTdGF0ZSkge1xyXG4gICAgICAgIHRoaXMuY2FudmFzID0gb2JqICYmIG9iai5jYW52YXMgfHwgPEhUTUxDYW52YXNFbGVtZW50PiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdhbWVTY3JlZW5cIik7XHJcbiAgICAgICAgdGhpcy5jdHggPSBvYmogJiYgb2JqLmN0eCB8fCA8Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEPiB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgdGhpcy5yZWN0ID0gb2JqICYmIG9iai5yZWN0IHx8IDxDbGllbnRSZWN0IHwgRE9NUmVjdD4gdGhpcy5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgdGhpcy5ibG9ja3MgPSBvYmogJiYgb2JqLmJsb2NrcyB8fCBbXTtcclxuICAgICAgICB0aGlzLnNsaWRlcnMgPSBvYmogJiYgb2JqLnNsaWRlcnMgfHwgW107XHJcbiAgICAgICAgdGhpcy5tb3VzZVggPSBvYmogJiYgb2JqLm1vdXNlWCB8fCAwO1xyXG4gICAgICAgIHRoaXMubW91c2VZID0gb2JqICYmIG9iai5tb3VzZVkgfHwgMDtcclxuICAgICAgICB0aGlzLmNvbW1hbmRDb250cm9sID0gb2JqICYmIG9iai5jb21tYW5kQ29udHJvbCB8fCB0cnVlO1xyXG4gICAgICAgIHRoaXMuZmxvd0NvbnRyb2wgPSBvYmogJiYgb2JqLmZsb3dDb250cm9sIHx8IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubmV4dFN0YWNrID0gb2JqICYmIG9iai5uZXh0U3RhY2sgfHwgW107XHJcbiAgICAgICAgdGhpcy5wcm9ncmFtUnVubmluZyA9IG9iaiAmJiBvYmoucHJvZ3JhbVJ1bm5pbmcgfHwgZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUdhbWVTdGF0ZSB7XHJcbiAgICBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcbiAgICByZWN0OiBDbGllbnRSZWN0IHwgRE9NUmVjdDtcclxuICAgIGJsb2NrczogQmFzZUJsb2NrW107XHJcbiAgICBzbGlkZXJzOiBTbGlkZXJbXTtcclxuICAgIG1vdXNlWDogbnVtYmVyO1xyXG4gICAgbW91c2VZOiBudW1iZXI7XHJcbiAgICBjb21tYW5kQ29udHJvbDogYm9vbGVhbjtcclxuICAgIGZsb3dDb250cm9sOiBib29sZWFuO1xyXG4gICAgbmV4dFN0YWNrOiBhbnlbXTtcclxuICAgIHByb2dyYW1SdW5uaW5nOiBib29sZWFuO1xyXG59IiwiZXhwb3J0IGVudW0gQ29tbWFuZEJsb2NrVHlwZXMge1xyXG4gICAgRW1wdHksXHJcbiAgICBTdGFydCxcclxuICAgIE1vdmUsXHJcbiAgICBBbmdsZSxcclxuICAgIFRocmVhZCxcclxuICAgIFNjYW4sXHJcbiAgICBMYXNlcixcclxuICAgIEdyYXBwbGVcclxufVxyXG5cclxuZXhwb3J0IGVudW0gRmxvd0Jsb2NrVHlwZXMge1xyXG4gICAgRW1wdHksXHJcbiAgICBVcCxcclxuICAgIERvd24sXHJcbiAgICBMZWZ0LFxyXG4gICAgUmlnaHQsXHJcbiAgICBDb25kaXRpb25hbExlZnRSaWdodCxcclxuICAgIENvbmRpdGlvbmFsTGVmdFVwLFxyXG4gICAgQ29uZGl0aW9uYWxMZWZ0RG93bixcclxuICAgIENvbmRpdGlvbmFsVXBSaWdodCxcclxuICAgIENvbmRpdGlvbmFsVXBEb3duLFxyXG4gICAgQ29uZGl0aW9uYWxEb3duUmlnaHRcclxufSIsImltcG9ydCB7IEdhbWVTdGF0ZSB9IGZyb20gXCIuL0dhbWVTdGF0ZVwiO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEJhc2VCbG9jayB7XHJcbiAgICBnYW1lU3RhdGU6IEdhbWVTdGF0ZTtcclxuICAgIHg6IG51bWJlcjtcclxuICAgIHk6IG51bWJlcjtcclxuICAgIGg6IG51bWJlcjtcclxuICAgIHc6IG51bWJlcjtcclxuICAgIGNvbG9yOiBzdHJpbmc7XHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgR2FtZVN0YXRlOiBHYW1lU3RhdGUsXHJcbiAgICAgICAgICAgICAgICBwdWJsaWMgWDogbnVtYmVyLFxyXG4gICAgICAgICAgICAgICAgcHVibGljIFk6IG51bWJlcixcclxuICAgICAgICAgICAgICAgIHB1YmxpYyBIOiBudW1iZXIsXHJcbiAgICAgICAgICAgICAgICBwdWJsaWMgVzogbnVtYmVyLFxyXG4gICAgICAgICAgICAgICAgcHVibGljIENvbG9yOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZSA9IEdhbWVTdGF0ZTtcclxuICAgICAgICB0aGlzLnggPSBYO1xyXG4gICAgICAgIHRoaXMueSA9IFk7XHJcbiAgICAgICAgdGhpcy5oID0gSDtcclxuICAgICAgICB0aGlzLncgPSBXO1xyXG4gICAgICAgIHRoaXMuY29sb3IgPSBDb2xvcjtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3KCk6IHZvaWQge30gXHJcbiAgICB1cGRhdGUoKTogdm9pZCB7fVxyXG59IiwiaW1wb3J0IHsgR2FtZVN0YXRlIH0gZnJvbSBcIi4vR2FtZVN0YXRlXCI7XHJcbmltcG9ydCB7IEJhc2VCbG9jayB9IGZyb20gXCIuL0Jhc2VCbG9ja1wiO1xyXG5pbXBvcnQgeyBDb21tYW5kQmxvY2tUeXBlcyB9IGZyb20gXCIuL0VudW1zXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29tbWFuZEJsb2NrIGV4dGVuZHMgQmFzZUJsb2NrIHtcclxuICAgIGdhbWVTdGF0ZTogR2FtZVN0YXRlO1xyXG4gICAgeDogbnVtYmVyO1xyXG4gICAgeTogbnVtYmVyO1xyXG4gICAgdzogbnVtYmVyO1xyXG4gICAgaDogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgdW5pdHM6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IGNhbGxDb3VudDogbnVtYmVyO1xyXG4gICAgY29sb3I6IHN0cmluZztcclxuICAgIG1vdXNlRG93bjogYm9vbGVhbjtcclxuICAgIHNldDogYm9vbGVhbjtcclxuICAgIHR5cGU6IENvbW1hbmRCbG9ja1R5cGVzO1xyXG4gICAgaW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQ7XHJcbiAgICBjb25zdHJ1Y3RvcihHYW1lU3RhdGU6IEdhbWVTdGF0ZSwgWDogbnVtYmVyLCBZOiBudW1iZXIsIEg6IG51bWJlciwgVzogbnVtYmVyLCBVbml0czogbnVtYmVyLCBDYWxsQ291bnQ6IG51bWJlciwgQ29sb3I6IHN0cmluZywgVHlwZTogQ29tbWFuZEJsb2NrVHlwZXMpIHtcclxuICAgICAgICBzdXBlcihHYW1lU3RhdGUsIFgsIFksIEgsIFcsIENvbG9yKTtcclxuICAgICAgICB0aGlzLnVuaXRzID0gVW5pdHM7XHJcbiAgICAgICAgdGhpcy5jYWxsQ291bnQgPSBDYWxsQ291bnQ7XHJcbiAgICAgICAgdGhpcy5tb3VzZURvd24gPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc2V0ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy50eXBlID0gVHlwZTtcclxuICAgICAgICB0aGlzLmltYWdlID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgc3dpdGNoKFR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBDb21tYW5kQmxvY2tUeXBlcy5TdGFydDpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gXCJkYXRhL3RleHR1cmVzL1N0YXJ0QmxvY2sucG5nXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDb21tYW5kQmxvY2tUeXBlcy5Nb3ZlOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSBcImRhdGEvdGV4dHVyZXMvTW92ZUJsb2NrLnBuZ1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ29tbWFuZEJsb2NrVHlwZXMuQW5nbGU6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlLnNyYyA9IFwiZGF0YS90ZXh0dXJlcy9BbmdsZUJsb2NrLnBuZ1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ29tbWFuZEJsb2NrVHlwZXMuVGhyZWFkOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSBcImRhdGEvdGV4dHVyZXMvVGhyZWFkQmxvY2sucG5nXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuYmxvY2tzLnB1c2godGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKCkgOiB2b2lkIHtcclxuICAgICAgICAvLyBkcmFnIGNvbW1hbmQgYmxvY2tcclxuICAgICAgICBpZiAodGhpcy5tb3VzZURvd24pIHtcclxuICAgICAgICAgICAgdGhpcy54ID0gdGhpcy5nYW1lU3RhdGUubW91c2VYIC0gdGhpcy53LzI7XHJcbiAgICAgICAgICAgIHRoaXMueSA9IHRoaXMuZ2FtZVN0YXRlLm1vdXNlWSAtIHRoaXMuaC8yO1xyXG4gICAgICAgICAgICB0aGlzLnNldCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZGVsZXRlIGlmIGRyb3BwaW5nIGJsb2NrIGFuZCBpdCBkb2Vzbid0IGhhdmUgYSBlbXB0eSBncmlkIGJsb2NrIHRvIGJlIHNldCBvblxyXG4gICAgICAgIGlmICghdGhpcy5tb3VzZURvd24gJiYgIXRoaXMuc2V0KSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuZ2FtZVN0YXRlLmJsb2Nrcy5pbmRleE9mKHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLmdhbWVTdGF0ZS5ibG9ja3Muc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZHJhdygpIDogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LmZpbGxTdHlsZSA9IHRoaXMuY29sb3I7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LmZpbGxSZWN0KHRoaXMueCwgdGhpcy55LCB0aGlzLncsIHRoaXMuaCk7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LnRyYW5zbGF0ZSh0aGlzLngsIHRoaXMueSk7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LmRyYXdJbWFnZSh0aGlzLmltYWdlLCAwLCAwKTtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHgudHJhbnNsYXRlKC10aGlzLngsIC10aGlzLnkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIG9uQ2xpY2soKSB7XHJcbiAgICAvLyB9XHJcbn1cclxuXHJcbi8vIENPTlNJREVSOiBleHRlbmRpbmcgQ29tbWFuZEJsb2NrIGNsYXNzXHJcbmV4cG9ydCBjbGFzcyBDb21tYW5kQmxvY2tCdXR0b24gZXh0ZW5kcyBCYXNlQmxvY2sge1xyXG4gICAgZ2FtZVN0YXRlOiBHYW1lU3RhdGU7XHJcbiAgICB4OiBudW1iZXI7XHJcbiAgICB5OiBudW1iZXI7XHJcbiAgICB3OiBudW1iZXI7XHJcbiAgICBoOiBudW1iZXI7XHJcbiAgICB1bml0czogbnVtYmVyO1xyXG4gICAgY2FsbENvdW50OiBudW1iZXI7XHJcbiAgICBjb2xvcjogc3RyaW5nO1xyXG4gICAgbW91c2VEb3duOiBib29sZWFuO1xyXG4gICAgdHlwZTogQ29tbWFuZEJsb2NrVHlwZXM7XHJcbiAgICBpbWFnZTogSFRNTEltYWdlRWxlbWVudDtcclxuICAgIGNvbnN0cnVjdG9yKEdhbWVTdGF0ZTogR2FtZVN0YXRlLCBYOiBudW1iZXIsIFk6IG51bWJlciwgSDogbnVtYmVyLCBXOiBudW1iZXIsIENvbG9yOiBzdHJpbmcsIFR5cGU6IENvbW1hbmRCbG9ja1R5cGVzKSB7XHJcbiAgICAgICAgc3VwZXIoR2FtZVN0YXRlLCBYLCBZLCBILCBXLCBDb2xvcik7XHJcbiAgICAgICAgdGhpcy5tb3VzZURvd24gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnR5cGUgPSBUeXBlO1xyXG4gICAgICAgIHRoaXMuaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICB0aGlzLnVuaXRzID0gMDtcclxuICAgICAgICB0aGlzLmNhbGxDb3VudCA9IDA7XHJcbiAgICAgICAgc3dpdGNoKFR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBDb21tYW5kQmxvY2tUeXBlcy5TdGFydDpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gXCJkYXRhL3RleHR1cmVzL1N0YXJ0QmxvY2sucG5nXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDb21tYW5kQmxvY2tUeXBlcy5Nb3ZlOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSBcImRhdGEvdGV4dHVyZXMvTW92ZUJsb2NrLnBuZ1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ29tbWFuZEJsb2NrVHlwZXMuQW5nbGU6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlLnNyYyA9IFwiZGF0YS90ZXh0dXJlcy9BbmdsZUJsb2NrLnBuZ1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ29tbWFuZEJsb2NrVHlwZXMuVGhyZWFkOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSBcImRhdGEvdGV4dHVyZXMvVGhyZWFkQmxvY2sucG5nXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuYmxvY2tzLnB1c2godGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKCkgOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5tb3VzZURvd24pIHtcclxuICAgICAgICAgICAgdGhpcy5tb3VzZURvd24gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZVN0YXRlLnNsaWRlcnMuZm9yRWFjaChzbGlkZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNsaWRlci50eXBlID09PSB0aGlzLnR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGxDb3VudCA9IE1hdGgucm91bmQoKHNsaWRlci52YWx1ZSAqIHNsaWRlci5tYXhVbml0cykvc2xpZGVyLmJhc2VVbml0cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bml0cyA9IHNsaWRlci5iYXNlVW5pdHM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBuZXcgQ29tbWFuZEJsb2NrKHRoaXMuZ2FtZVN0YXRlLCB0aGlzLngsIHRoaXMueSwgdGhpcy5oLCB0aGlzLncsIHRoaXMudW5pdHMsIHRoaXMuY2FsbENvdW50LCB0aGlzLkNvbG9yLCB0aGlzLnR5cGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkcmF3KCkgOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHguZmlsbFN0eWxlID0gdGhpcy5jb2xvcjtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHguZmlsbFJlY3QodGhpcy54LCB0aGlzLnksIHRoaXMudywgdGhpcy5oKTtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHgudHJhbnNsYXRlKHRoaXMueCwgdGhpcy55KTtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHguZHJhd0ltYWdlKHRoaXMuaW1hZ2UsIDAsIDApO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC50cmFuc2xhdGUoLXRoaXMueCwgLXRoaXMueSk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG4vLyBleHBvcnQgZnVuY3Rpb24gaXNDb21tYW5kQmxvY2sob2JqOiBvYmplY3QpIDogb2JqIGlzIENvbW1hbmRCbG9jayB7XHJcbi8vICAgICB2YXIgY29tbWFuZEJsb2NrT2JqIDogQ29tbWFuZEJsb2NrID0gPENvbW1hbmRCbG9jaz5vYmo7XHJcbiAgICBcclxuLy8gICAgIHJldHVybiBjb21tYW5kQmxvY2tPYmoubW91c2VEb3duICE9PSB1bmRlZmluZWQ7XHJcbi8vIH0iLCJpbXBvcnQgeyBHYW1lU3RhdGUgfSBmcm9tIFwiLi9HYW1lU3RhdGVcIjtcclxuaW1wb3J0IHsgQmFzZUJsb2NrIH0gZnJvbSBcIi4vQmFzZUJsb2NrXCI7XHJcbmltcG9ydCB7IEZsb3dCbG9ja1R5cGVzIH0gZnJvbSBcIi4vRW51bXNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBGbG93QmxvY2sgZXh0ZW5kcyBCYXNlQmxvY2sge1xyXG4gICAgZ2FtZVN0YXRlOiBHYW1lU3RhdGU7XHJcbiAgICB0eXBlOiBGbG93QmxvY2tUeXBlcztcclxuICAgIHg6IG51bWJlcjtcclxuICAgIHk6IG51bWJlcjtcclxuICAgIHc6IG51bWJlcjtcclxuICAgIGg6IG51bWJlcjtcclxuICAgIG1vdXNlRG93bjogYm9vbGVhbjtcclxuICAgIHNldDogYm9vbGVhbjtcclxuICAgIGltYWdlOiBIVE1MSW1hZ2VFbGVtZW50O1xyXG4gICAgY29uc3RydWN0b3IoR2FtZVN0YXRlOiBHYW1lU3RhdGUsIFg6IG51bWJlciwgWTogbnVtYmVyLCBIOiBudW1iZXIsIFc6IG51bWJlciwgQ29sb3I6IHN0cmluZywgVHlwZTogRmxvd0Jsb2NrVHlwZXMpIHtcclxuICAgICAgICBzdXBlcihHYW1lU3RhdGUsIFgsIFksIEgsIFcsIENvbG9yKTtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZSA9IEdhbWVTdGF0ZTtcclxuICAgICAgICB0aGlzLnR5cGUgPSBUeXBlO1xyXG4gICAgICAgIHRoaXMubW91c2VEb3duID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnNldCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICBzd2l0Y2goVHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIEZsb3dCbG9ja1R5cGVzLlVwOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSBcImRhdGEvdGV4dHVyZXMvVXBBcnJvdy5wbmdcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEZsb3dCbG9ja1R5cGVzLkRvd246XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlLnNyYyA9IFwiZGF0YS90ZXh0dXJlcy9Eb3duQXJyb3cucG5nXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBGbG93QmxvY2tUeXBlcy5MZWZ0OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSBcImRhdGEvdGV4dHVyZXMvTGVmdEFycm93LnBuZ1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgRmxvd0Jsb2NrVHlwZXMuUmlnaHQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlLnNyYyA9IFwiZGF0YS90ZXh0dXJlcy9SaWdodEFycm93LnBuZ1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmJsb2Nrcy5wdXNoKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSgpIDogdm9pZCB7XHJcbiAgICAgICAgLy8gZHJhZyBmbG93IGJsb2NrXHJcbiAgICAgICAgaWYgKHRoaXMubW91c2VEb3duKSB7XHJcbiAgICAgICAgICAgIHRoaXMueCA9IHRoaXMuZ2FtZVN0YXRlLm1vdXNlWCAtIHRoaXMudy8yO1xyXG4gICAgICAgICAgICB0aGlzLnkgPSB0aGlzLmdhbWVTdGF0ZS5tb3VzZVkgLSB0aGlzLmgvMjtcclxuICAgICAgICAgICAgdGhpcy5zZXQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGRlbGV0ZSBpZiBkcm9wcGluZyBibG9jayBhbmQgaXQgZG9lc24ndCBoYXZlIGEgZW1wdHkgZ3JpZCBibG9jayB0byBiZSBzZXQgb25cclxuICAgICAgICBpZiAoIXRoaXMubW91c2VEb3duICYmICF0aGlzLnNldCkge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmdhbWVTdGF0ZS5ibG9ja3MuaW5kZXhPZih0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5nYW1lU3RhdGUuYmxvY2tzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRyYXcoKSA6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC50cmFuc2xhdGUodGhpcy54LCB0aGlzLnkpO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC5kcmF3SW1hZ2UodGhpcy5pbWFnZSwgMCwgMCk7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LnRyYW5zbGF0ZSgtdGhpcy54LCAtdGhpcy55KTtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHguc3Ryb2tlU3R5bGUgPSB0aGlzLmNvbG9yO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC5yZWN0KHRoaXMueCwgdGhpcy55LCB0aGlzLncsIHRoaXMuaCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIENPTlNJREVSOiBFeHRlbmRpbmcgRmxvd0Jsb2NrIGhlcmVcclxuZXhwb3J0IGNsYXNzIEZsb3dCbG9ja0J1dHRvbiBleHRlbmRzIEJhc2VCbG9jayB7XHJcbiAgICBnYW1lU3RhdGU6IEdhbWVTdGF0ZTtcclxuICAgIHg6IG51bWJlcjtcclxuICAgIHk6IG51bWJlcjtcclxuICAgIHc6IG51bWJlcjtcclxuICAgIGg6IG51bWJlcjtcclxuICAgIGNvbG9yOiBzdHJpbmc7XHJcbiAgICBtb3VzZURvd246IGJvb2xlYW47XHJcbiAgICB0eXBlOiBGbG93QmxvY2tUeXBlcztcclxuICAgIGltYWdlOiBIVE1MSW1hZ2VFbGVtZW50O1xyXG4gICAgY29uc3RydWN0b3IoR2FtZVN0YXRlOiBHYW1lU3RhdGUsIFg6IG51bWJlciwgWTogbnVtYmVyLCBIOiBudW1iZXIsIFc6IG51bWJlciwgQ29sb3I6IHN0cmluZywgVHlwZTogRmxvd0Jsb2NrVHlwZXMpIHtcclxuICAgICAgICBzdXBlcihHYW1lU3RhdGUsIFgsIFksIEgsIFcsIENvbG9yKTtcclxuICAgICAgICB0aGlzLnR5cGUgPSBUeXBlO1xyXG4gICAgICAgIHRoaXMubW91c2VEb3duID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgIHN3aXRjaChUeXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgRmxvd0Jsb2NrVHlwZXMuVXA6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlLnNyYyA9IFwiZGF0YS90ZXh0dXJlcy9VcEFycm93LnBuZ1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgRmxvd0Jsb2NrVHlwZXMuRG93bjpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gXCJkYXRhL3RleHR1cmVzL0Rvd25BcnJvdy5wbmdcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEZsb3dCbG9ja1R5cGVzLkxlZnQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlLnNyYyA9IFwiZGF0YS90ZXh0dXJlcy9MZWZ0QXJyb3cucG5nXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBGbG93QmxvY2tUeXBlcy5SaWdodDpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gXCJkYXRhL3RleHR1cmVzL1JpZ2h0QXJyb3cucG5nXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmJsb2Nrcy5wdXNoKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlKCkgOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5tb3VzZURvd24pIHtcclxuICAgICAgICAgICAgdGhpcy5tb3VzZURvd24gPSBmYWxzZTtcclxuICAgICAgICAgICAgbmV3IEZsb3dCbG9jayh0aGlzLmdhbWVTdGF0ZSwgdGhpcy54LCB0aGlzLnksIHRoaXMuaCwgdGhpcy53LCB0aGlzLkNvbG9yLCB0aGlzLnR5cGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkcmF3KCkgOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHgudHJhbnNsYXRlKHRoaXMueCwgdGhpcy55KTtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHguZHJhd0ltYWdlKHRoaXMuaW1hZ2UsIDAsIDApO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC50cmFuc2xhdGUoLXRoaXMueCwgLXRoaXMueSk7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LnN0cm9rZVN0eWxlID0gdGhpcy5jb2xvcjtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHgucmVjdCh0aGlzLngsIHRoaXMueSwgdGhpcy53LCB0aGlzLmgpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgR2FtZVN0YXRlIH0gZnJvbSBcIi4vR2FtZVN0YXRlXCI7XHJcbmltcG9ydCB7IEJhc2VCbG9jayB9IGZyb20gXCIuL0Jhc2VCbG9ja1wiO1xyXG5pbXBvcnQgeyBDb21tYW5kQmxvY2sgfSBmcm9tIFwiLi9Db21tYW5kQmxvY2tcIjtcclxuaW1wb3J0IHsgRmxvd0Jsb2NrIH0gZnJvbSBcIi4vRmxvd0Jsb2NrXCI7XHJcbmltcG9ydCB7IENvbW1hbmRCbG9ja1R5cGVzLCBGbG93QmxvY2tUeXBlcyB9IGZyb20gXCIuL0VudW1zXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgR3JpZEJsb2NrIGV4dGVuZHMgQmFzZUJsb2NrIHtcclxuICAgIGdhbWVTdGF0ZTogR2FtZVN0YXRlO1xyXG4gICAgeDogbnVtYmVyO1xyXG4gICAgeTogbnVtYmVyO1xyXG4gICAgaDogbnVtYmVyO1xyXG4gICAgdzogbnVtYmVyO1xyXG4gICAgcjogbnVtYmVyO1xyXG4gICAgYzogbnVtYmVyO1xyXG4gICAgdW5pdHM6IG51bWJlcjsgLy8gXCJyZWFkb25seVwiXHJcbiAgICBjYWxsQ291bnQ6IG51bWJlcjsgLy8gXCJyZWFkb25seVwiXHJcbiAgICBjdXJyZW50Q2FsbENvdW50OiBudW1iZXI7XHJcbiAgICBjb21tYW5kVHlwZTogQ29tbWFuZEJsb2NrVHlwZXM7XHJcbiAgICBmbG93VHlwZTogRmxvd0Jsb2NrVHlwZXM7XHJcbiAgICBjYWxsOiBhbnk7XHJcbiAgICBjb2xvcjogc3RyaW5nO1xyXG4gICAgY29uc3RydWN0b3IoR2FtZVN0YXRlOiBHYW1lU3RhdGUsIFg6IG51bWJlciwgWTogbnVtYmVyLCBIOiBudW1iZXIsIFc6IG51bWJlciwgUm93OiBudW1iZXIsIENvbHVtbjogbnVtYmVyLCBDb2xvcjogc3RyaW5nKSB7XHJcbiAgICAgICAgc3VwZXIoR2FtZVN0YXRlLCBYLCBZLCBILCBXLCBDb2xvcik7XHJcbiAgICAgICAgdGhpcy5yID0gUm93O1xyXG4gICAgICAgIHRoaXMuYyA9IENvbHVtbjtcclxuICAgICAgICB0aGlzLmNvbW1hbmRUeXBlID0gQ29tbWFuZEJsb2NrVHlwZXMuRW1wdHk7XHJcbiAgICAgICAgdGhpcy5mbG93VHlwZSA9IEZsb3dCbG9ja1R5cGVzLkVtcHR5O1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmJsb2Nrcy5wdXNoKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSgpIDogdm9pZCB7XHJcbiAgICAgICAgLy8gc2VlIGlmIGNvbW1hbmQgYmxvY2sgaXMgYmVpbmcgZHJvcHBlZCBvbiBlbXB0eSBncmlkIGJsb2NrXHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuYmxvY2tzLmZvckVhY2goYmxvY2sgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYmxvY2sgaW5zdGFuY2VvZiBDb21tYW5kQmxvY2tcclxuICAgICAgICAgICAgICAgIHx8IGJsb2NrIGluc3RhbmNlb2YgRmxvd0Jsb2NrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmxvY2subW91c2VEb3duID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChibG9jay54IDwgdGhpcy54ICsgdGhpcy53ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLnggKyBibG9jay53ID4gdGhpcy54ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLnkgPCB0aGlzLnkgKyB0aGlzLmggJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2suaCArIGJsb2NrLnkgPiB0aGlzLnkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb21tYW5kVHlwZSA9PT0gQ29tbWFuZEJsb2NrVHlwZXMuRW1wdHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIGJsb2NrIGluc3RhbmNlb2YgQ29tbWFuZEJsb2NrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jay54ID0gdGhpcy54O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sueSA9IHRoaXMueTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLnNldCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRUeXBlID0gYmxvY2sudHlwZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudW5pdHMgPSBibG9jay51bml0cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsbENvdW50ID0gYmxvY2suY2FsbENvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Q2FsbENvdW50ID0gYmxvY2suY2FsbENvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuZmxvd1R5cGUgPT09IEZsb3dCbG9ja1R5cGVzLkVtcHR5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgYmxvY2sgaW5zdGFuY2VvZiBGbG93QmxvY2spXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLnggPSB0aGlzLng7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jay55ID0gdGhpcy55O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2suc2V0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmxvd1R5cGUgPSBibG9jay50eXBlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGNvbmRpdGlvbmFsIHByb3BlcnRpZXMgaGVyZSBpZiBjb25kaXRpb25hbCBibG9ja1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhdygpIDogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LmZpbGxTdHlsZSA9IHRoaXMuY29sb3I7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LmZpbGxSZWN0KHRoaXMueCwgdGhpcy55LCB0aGlzLncsIHRoaXMuaCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBHYW1lU3RhdGUgfSBmcm9tIFwiLi9HYW1lU3RhdGVcIjtcclxuaW1wb3J0IHsgR3JpZEJsb2NrIH0gZnJvbSBcIi4vR3JpZEJsb2NrXCI7XHJcbmltcG9ydCB7IENvbW1hbmRCbG9ja1R5cGVzLCBGbG93QmxvY2tUeXBlcyB9IGZyb20gXCIuL0VudW1zXCI7XHJcblxyXG5mdW5jdGlvbiBtb3ZlQ2FsbChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgYmxvY2s6IEdyaWRCbG9jaykge1xyXG4gICAgaWYgKGJsb2NrLmN1cnJlbnRDYWxsQ291bnQgPiAwKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJtb3ZlXCIpO1xyXG4gICAgICAgIGJsb2NrLmN1cnJlbnRDYWxsQ291bnQtLTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGZpbmROZXh0Q2FsbChnYW1lU3RhdGUsIGJsb2NrKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gYW5nbGVDYWxsKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBibG9jazogR3JpZEJsb2NrKSB7XHJcbiAgICBpZiAoYmxvY2suY3VycmVudENhbGxDb3VudCA+IDApIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImFuZ2xlXCIpO1xyXG4gICAgICAgIGJsb2NrLmN1cnJlbnRDYWxsQ291bnQtLTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGZpbmROZXh0Q2FsbChnYW1lU3RhdGUsIGJsb2NrKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gZnVuY3Rpb24gd2lsbCBvbmx5IGhhdmUgZmluZE5leHRFeGVjdXRpb24gYml0XHJcbi8vIHdvbid0IGRvIGFueXRoaW5nIGV4Y2VwdCBjb250aW51ZSBleGVjdXRpb24gaWYgcGxheWVycyB1c2UgaXQgbGlrZSBhIG5vcm1hbCBjb21tYW5kIGJsb2NrXHJcbmZ1bmN0aW9uIHN0YXJ0Q2FsbChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgYmxvY2s6IEdyaWRCbG9jaykge1xyXG4gICAgY29uc29sZS5sb2coXCJzdGFydFwiKTtcclxuICAgIGZpbmROZXh0Q2FsbChnYW1lU3RhdGUsIGJsb2NrKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0TmV3VGhyZWFkQ2FsbChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgdGhyZWFkOiBudW1iZXIpIHtcclxuICAgIC8vIGxvY2F0ZSB0aHJlYWRcclxuICAgIGdhbWVTdGF0ZS5ibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XHJcbiAgICAgICAgaWYgKGJsb2NrIGluc3RhbmNlb2YgR3JpZEJsb2NrKSB7XHJcbiAgICAgICAgICAgIGlmIChibG9jay5jb21tYW5kVHlwZSA9PT0gQ29tbWFuZEJsb2NrVHlwZXMuU3RhcnQgLy8mJiB0aHJlYWROdW1iZXIgPT09IHRocmVhZFxyXG4gICAgICAgICAgICAgICAgJiYgYmxvY2suZmxvd1R5cGUgIT09IEZsb3dCbG9ja1R5cGVzLkVtcHR5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvLyBzdGFydCB0aHJlYWRcclxuICAgICAgICAgICAgICAgIGZpbmROZXh0Q2FsbChnYW1lU3RhdGUsIGJsb2NrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmaW5kTmV4dENhbGwoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHByZXZCbG9jazogR3JpZEJsb2NrKSA6IHZvaWQge1xyXG4gICAgbGV0IHRhcmdldFJvdzogbnVtYmVyO1xyXG4gICAgbGV0IHRhcmdldENvbDogbnVtYmVyO1xyXG4gICAgLy8gcmVzZXQgY2FsbCBjb3VudFxyXG4gICAgcHJldkJsb2NrLmN1cnJlbnRDYWxsQ291bnQgPSBwcmV2QmxvY2suY2FsbENvdW50O1xyXG4gICAgLy8gVE9ETzogYWRkIGNvbmRpdGlvbmFsc1xyXG4gICAgLy8gdGhpcyB3aWxsIHdvcmsgd2VsbCBoZXJlIHNpbmNlIGVhY2ggY2FsbCBmaW5kcyB0aGUgbmV4dCBjYWxsXHJcbiAgICAvLyBhZnRlciBpdCBoYXMgYWxyZWFkeSBleGVjdXRlZFxyXG4gICAgc3dpdGNoKHByZXZCbG9jay5mbG93VHlwZSkge1xyXG4gICAgICAgIGNhc2UgRmxvd0Jsb2NrVHlwZXMuVXA6XHJcbiAgICAgICAgICAgIHRhcmdldFJvdyA9IHByZXZCbG9jay5yIC0gMTtcclxuICAgICAgICAgICAgdGFyZ2V0Q29sID0gcHJldkJsb2NrLmM7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgRmxvd0Jsb2NrVHlwZXMuRG93bjpcclxuICAgICAgICAgICAgdGFyZ2V0Um93ID0gcHJldkJsb2NrLnIgKyAxO1xyXG4gICAgICAgICAgICB0YXJnZXRDb2wgPSBwcmV2QmxvY2suYztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBGbG93QmxvY2tUeXBlcy5SaWdodDpcclxuICAgICAgICAgICAgdGFyZ2V0Q29sID0gcHJldkJsb2NrLmMgKyAxO1xyXG4gICAgICAgICAgICB0YXJnZXRSb3cgPSBwcmV2QmxvY2sucjtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBGbG93QmxvY2tUeXBlcy5MZWZ0OlxyXG4gICAgICAgICAgICB0YXJnZXRDb2wgPSBwcmV2QmxvY2suYyAtIDE7XHJcbiAgICAgICAgICAgIHRhcmdldFJvdyA9IHByZXZCbG9jay5yO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxuXHJcbiAgICBnYW1lU3RhdGUuYmxvY2tzLmZvckVhY2goYmxvY2sgPT4ge1xyXG4gICAgICAgIGlmIChibG9jayBpbnN0YW5jZW9mIEdyaWRCbG9jaykge1xyXG4gICAgICAgICAgICBpZiAoYmxvY2suciA9PT0gdGFyZ2V0Um93ICYmIGJsb2NrLmMgPT09IHRhcmdldENvbFxyXG4gICAgICAgICAgICAgICAgJiYgYmxvY2suY29tbWFuZFR5cGUgIT09IENvbW1hbmRCbG9ja1R5cGVzLkVtcHR5XHJcbiAgICAgICAgICAgICAgICAmJiBibG9jay5mbG93VHlwZSAhPT0gRmxvd0Jsb2NrVHlwZXMuRW1wdHkpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaChibG9jay5jb21tYW5kVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgQ29tbWFuZEJsb2NrVHlwZXMuQW5nbGU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLmNhbGwgPSAoKSA9PiBhbmdsZUNhbGwoZ2FtZVN0YXRlLCBibG9jayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVTdGF0ZS5uZXh0U3RhY2sucHVzaChibG9jayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgQ29tbWFuZEJsb2NrVHlwZXMuTW92ZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2suY2FsbCA9ICgpID0+IG1vdmVDYWxsKGdhbWVTdGF0ZSwgYmxvY2spO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lU3RhdGUubmV4dFN0YWNrLnB1c2goYmxvY2spO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIENvbW1hbmRCbG9ja1R5cGVzLlN0YXJ0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBibG9jay5jYWxsID0gKCkgPT4gc3RhcnRDYWxsKGdhbWVTdGF0ZSwgYmxvY2spO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBibG9jay5jYWxsQ291bnQgPSAwOyAvLyB0ZXN0IGNvZGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZVN0YXRlLm5leHRTdGFjay5wdXNoKGJsb2NrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufSIsImltcG9ydCB7IEdhbWVTdGF0ZSB9IGZyb20gXCIuL0dhbWVTdGF0ZVwiO1xyXG5pbXBvcnQgeyBDb21tYW5kQmxvY2tUeXBlcywgRmxvd0Jsb2NrVHlwZXMgfSBmcm9tIFwiLi9FbnVtc1wiO1xyXG5cclxuLy8gYWRkIGNvbW1hbmQgYW5kIGNvbmRpdGlvbmFsIHNsaWRlciB0eXBlcyBhcyBhIHBhcmFtIGFuZCB0byBFbnVtcy50c1xyXG4vLyBhZGQgdG8gR2VuZXJhdGVMZXZlbFxyXG4vLyBtYXliZSBhZGQgc3VwcG9ydCBmb3IgdGhyZWFkIHN0YXJ0ZXI/XHJcbmV4cG9ydCBjbGFzcyBTbGlkZXIge1xyXG4gICAgZ2FtZVN0YXRlOiBHYW1lU3RhdGU7XHJcbiAgICBtb3VzZURvd246IGJvb2xlYW47XHJcbiAgICBzbmFwQW1vdW50OiBudW1iZXI7XHJcbiAgICBwZXJjZW50YWdlOiBudW1iZXI7XHJcbiAgICB2YWx1ZTogbnVtYmVyO1xyXG4gICAgbWF4VW5pdHM6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IGJhc2VVbml0czogbnVtYmVyO1xyXG4gICAgdHlwZTogQ29tbWFuZEJsb2NrVHlwZXMgfCBGbG93QmxvY2tUeXBlcztcclxuICAgIHNsaWRlclg6IG51bWJlcjtcclxuICAgIHNsaWRlclk6IG51bWJlcjtcclxuICAgIHNsaWRlckg6IG51bWJlcjtcclxuICAgIHNsaWRlclc6IG51bWJlcjtcclxuICAgIHNsaWRlckNvbG9yOiBzdHJpbmc7XHJcbiAgICBiYXJYOiBudW1iZXI7XHJcbiAgICBiYXJZOiBudW1iZXI7XHJcbiAgICBiYXJIOiBudW1iZXI7XHJcbiAgICBiYXJXOiBudW1iZXI7XHJcbiAgICBiYXJDb2xvcjogc3RyaW5nO1xyXG4gICAgY29uc3RydWN0b3IoR2FtZVN0YXRlOiBHYW1lU3RhdGUsIFggOm51bWJlciwgWTogbnVtYmVyLCBNYXhVbml0czogbnVtYmVyLCBUeXBlOiBDb21tYW5kQmxvY2tUeXBlcyB8IEZsb3dCbG9ja1R5cGVzLCBTbmFwQW1vdW50OiBudW1iZXIgPSAxMCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlID0gR2FtZVN0YXRlO1xyXG4gICAgICAgIHRoaXMubW91c2VEb3duID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5tYXhVbml0cyA9IE1heFVuaXRzO1xyXG4gICAgICAgIHRoaXMuc25hcEFtb3VudCA9IFNuYXBBbW91bnQ7XHJcbiAgICAgICAgdGhpcy5iYXNlVW5pdHMgPSBNYXRoLnJvdW5kKHRoaXMubWF4VW5pdHMgLyB0aGlzLnNuYXBBbW91bnQpO1xyXG4gICAgICAgIHRoaXMudHlwZSA9IFR5cGU7XHJcbiAgICAgICAgdGhpcy5iYXJIID0gNzU7XHJcbiAgICAgICAgdGhpcy5iYXJXID0gMTA7XHJcbiAgICAgICAgdGhpcy5iYXJYID0gWDtcclxuICAgICAgICB0aGlzLmJhclkgPSBZO1xyXG4gICAgICAgIHRoaXMuYmFyQ29sb3IgPSBcInRoaXN0bGVcIjtcclxuICAgICAgICB0aGlzLnNsaWRlckggPSAxMDtcclxuICAgICAgICB0aGlzLnNsaWRlclcgPSAxNTtcclxuICAgICAgICB0aGlzLnNsaWRlclggPSBYO1xyXG4gICAgICAgIHRoaXMuc2xpZGVyWSA9IFkgKyB0aGlzLmJhckgvMiAtIHRoaXMuc2xpZGVySC8yO1xyXG4gICAgICAgIHRoaXMuc2xpZGVyQ29sb3IgPSBcInB1cnBsZVwiO1xyXG4gICAgICAgIHRoaXMucGVyY2VudGFnZSA9IDEgLSAodGhpcy5zbGlkZXJZIC0gdGhpcy5iYXJZICsgdGhpcy5zbGlkZXJILzIpIC8gdGhpcy5iYXJIO1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSBNYXRoLnJvdW5kKHRoaXMucGVyY2VudGFnZSAqIHRoaXMuc25hcEFtb3VudCkgLyB0aGlzLnNuYXBBbW91bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKCkgOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5tb3VzZURvd24pIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYmFyWSAtIHRoaXMuc2xpZGVySC8yIDwgdGhpcy5nYW1lU3RhdGUubW91c2VZICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLmJhclkgKyB0aGlzLmJhckggLSB0aGlzLnNsaWRlckgvMiA+IHRoaXMuZ2FtZVN0YXRlLm1vdXNlWSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGVtcFNsaWRlclkgPSB0aGlzLmdhbWVTdGF0ZS5tb3VzZVk7XHJcbiAgICAgICAgICAgICAgICAvLyBmaW5kIHBlcmNlbnRhZ2Ugc2xpZGVyIGlzIHVwIHZlcnRpY2FsIG9uIGJhclxyXG4gICAgICAgICAgICAgICAgdGhpcy5wZXJjZW50YWdlID0gMSAtICh0ZW1wU2xpZGVyWSAtIHRoaXMuYmFyWSArIHRoaXMuc2xpZGVySC8yKSAvIHRoaXMuYmFySDtcclxuICAgICAgICAgICAgICAgIC8vIHNldCB0aGUgdmFsdWUgdG8gYmUgdGhlIHJvdW5kZWQgcGVyY2VudGFnZSBiYXNlZCBvbiBzbmFwIGFtb3VudFxyXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IE1hdGgucm91bmQodGhpcy5wZXJjZW50YWdlICogdGhpcy5zbmFwQW1vdW50KSAvIHRoaXMuc25hcEFtb3VudDtcclxuICAgICAgICAgICAgICAgIC8vIHNldCBzbGlkZXJZIHZhbHVlIGJhc2VkIG9uIG5ldyB2YWx1ZSBmcm9tIHRoZSByb3VuZGVkIHBlcmNhbnRhZ2VcclxuICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVyWSA9IHRoaXMuYmFySCArIHRoaXMuYmFyWSAtICh0aGlzLnNsaWRlckgvMikgLSAodGhpcy52YWx1ZSAqIHRoaXMuYmFySCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhNYXRoLnJvdW5kKCh0aGlzLnZhbHVlICogdGhpcy5tYXhVbml0cykpKTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMudmFsdWUgKiAxMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZHJhdygpIDogdm9pZCB7XHJcbiAgICAgICAgLy8gZHJhdyBiYXJcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHguZmlsbFN0eWxlID0gdGhpcy5iYXJDb2xvcjtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHguZmlsbFJlY3QodGhpcy5iYXJYLCB0aGlzLmJhclksIHRoaXMuYmFyVywgdGhpcy5iYXJIKTtcclxuXHJcbiAgICAgICAgLy8gZHJhdyBzbGlkZXJcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHguZmlsbFN0eWxlID0gdGhpcy5zbGlkZXJDb2xvcjtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHguZmlsbFJlY3QodGhpcy5zbGlkZXJYIC0gdGhpcy5zbGlkZXJILzQsIHRoaXMuc2xpZGVyWSwgdGhpcy5zbGlkZXJXLCB0aGlzLnNsaWRlckgpO1xyXG4gICAgfVxyXG59IiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4vZGVjbGFyYXRpb25zL2pzb24uZC50c1wiIC8+XHJcbmltcG9ydCB7IEdhbWVTdGF0ZSB9IGZyb20gXCIuL0dhbWVTdGF0ZVwiO1xyXG5pbXBvcnQgbGV2ZWwxIGZyb20gJy4uL2RhdGEvbGV2ZWxzL2xldmVsMS5qc29uJztcclxuaW1wb3J0IHsgR2VuZXJhdGVMZXZlbCB9IGZyb20gXCIuL0dlbmVyYXRlTGV2ZWxcIjtcclxuaW1wb3J0IHsgU2V0VXBFdmVudExpc3RlbmVycyB9IGZyb20gXCIuL1NldFVwRXZlbnRMaXN0ZW5lcnNcIjtcclxuaW1wb3J0IHsgRmxvd0Jsb2NrIH0gZnJvbSBcIi4vRmxvd0Jsb2NrXCI7XHJcbmltcG9ydCB7IFNsaWRlciB9IGZyb20gXCIuL1NsaWRlclwiO1xyXG5pbXBvcnQgeyBDb21tYW5kQmxvY2tUeXBlcyB9IGZyb20gXCIuL0VudW1zXCI7XHJcblxyXG4vLyBUT0RPOiBhZGQgdGV4dC1iYXNlZCAobnVtYmVycykgdWkgZWxlbWVudHMgdG8gY29tbWFuZCBibG9ja1xyXG4vLyBUT0RPOiBtYWtlIHNsaWRlcnMgZnVuY3Rpb25hbFxyXG4vLyBUT0RPOiByZW1vdmUgdGVzdCBjYWxsQ291bnQgdmFsdWVzIGluIFByb2dyYW1FeGVjdXRpb25cclxuLy8gVE9ETzogYWRkIGJpZyB5ZWxsb3cgYmxvY2sgdGhhdCByZW5kZXJzIGJlaGluZCBncmlkIGJsb2NrcyB0byBpbmRpY2F0ZSB3aGljaCBibG9jayBpcyBjdXJyZW50bHkgYmVpbmcgZXhlY3V0ZWRcclxuLy8gVE9ETzogaGF2ZSBGbG93QmxvY2tCdXR0b24gYW5kIENvbW1hbmRCbG9ja0J1dHRvbnMgZXh0ZW5kIGZyb20gdGhlaXIgcmVzcGVjdGl2ZSBibG9ja3NcclxuLy8gVE9ETzogcHVzaCBtb3N0IHJlY2VudGx5IGNsaWNrZWQgY29tbWFuZCAvIGZsb3cgYmxvY2sgdG8gdG9wIG9mIGJsb2NrIGFycmF5IHRvIHJlbmRlciBpdCBvbiB0b3Agb2YgZXZlcnl0aGluZyBlbHNlXHJcbi8vIFRPRE86IHN3aXRjaCBzcGFjZWJhciBjb250cm9sIGJ1dHRvbiB0byBjbGlja2FibGUgcmFkaW8gYnV0dG9uXHJcbi8vIFRPRE86IGFkZCBiYXNlIFVJIGNsYXNzIC8gc3dpdGNoIHNsaWRlcltdIHRvIGJhc2VVSUVsZW1lbnRbXSBpbiBHYW1lU3RhdGVcclxuLy8gVE9ETzogYWRkIGV4ZWN1dGUgcHJvZ3JhbSAvIHN0b3AgcHJvZ3JhbSBidXR0b25zXHJcbi8vIFRPRE86IGFkZCBtYW5pZm9sZCBjb2xsaXNpb24gc3lzdGVtIGZvciBncmlkYmxvY2sgY29sbGlzaW9uIHdpdGggZmxvdyBhbmQgY29tbWFuZCBibG9ja3MuXHJcbi8vIC0+IGkuZS4gc25hcCBjb21tYW5kIGJsb2NrIHRvIGdyaWQgYmxvY2sgdGhhdCBoYXMgdGhlIGJpZ2dlc3QgbWFuaWZvbGRcclxuXHJcbi8vIHNldCB1cCBnYW1lIHN0YXRlXHJcbnZhciBnYW1lU3RhdGUgPSBuZXcgR2FtZVN0YXRlKCk7XHJcbkdlbmVyYXRlTGV2ZWwoZ2FtZVN0YXRlLCBsZXZlbDEsIFwibGlnaHRibHVlXCIpO1xyXG5TZXRVcEV2ZW50TGlzdGVuZXJzKGdhbWVTdGF0ZSk7XHJcblxyXG4vLyBzZXQgdXAgdGVzdCB1aSBlbGVtZW50c1xyXG5nYW1lU3RhdGUuc2xpZGVycy5wdXNoKG5ldyBTbGlkZXIoZ2FtZVN0YXRlLCA4MCwgMzY1LCAxMDAsIENvbW1hbmRCbG9ja1R5cGVzLk1vdmUpKTtcclxuZ2FtZVN0YXRlLnNsaWRlcnMucHVzaChuZXcgU2xpZGVyKGdhbWVTdGF0ZSwgMTMwLCAzNjUsIDM2MCwgQ29tbWFuZEJsb2NrVHlwZXMuQW5nbGUsIDgpKTtcclxuXHJcbmZ1bmN0aW9uIGRyYXcoKSA6IHZvaWQge1xyXG4gICAgZ2FtZVN0YXRlLmN0eC5jbGVhclJlY3QoMCwgMCwgZ2FtZVN0YXRlLmNhbnZhcy53aWR0aCwgZ2FtZVN0YXRlLmNhbnZhcy5oZWlnaHQpO1xyXG4gICAgZ2FtZVN0YXRlLmN0eC5iZWdpblBhdGgoKTtcclxuXHJcbiAgICAvLyByZW5kZXIgVUkgZWxlbWVudHNcclxuICAgIGdhbWVTdGF0ZS5zbGlkZXJzLmZvckVhY2goc2xpZGVyID0+IHtcclxuICAgICAgICBzbGlkZXIuZHJhdygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gcmVuZGVyIGFsbCBub24tZmxvdyBibG9ja3MgZmlyc3RcclxuICAgIGdhbWVTdGF0ZS5ibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XHJcbiAgICAgICAgaWYgKCEoYmxvY2sgaW5zdGFuY2VvZiBGbG93QmxvY2spKSB7XHJcbiAgICAgICAgICAgIGJsb2NrLmRyYXcoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyByZW5kZXIgYWxsIGZsb3cgYmxvY2tzIGxhc3QgdG8gbGF5ZXIgdGhlbSBvbiB0b3Agb2YgY29tbWFuZCBibG9ja3NcclxuICAgIGdhbWVTdGF0ZS5ibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XHJcbiAgICAgICAgaWYgKGJsb2NrIGluc3RhbmNlb2YgRmxvd0Jsb2NrKSB7XHJcbiAgICAgICAgICAgIGJsb2NrLmRyYXcoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBnYW1lU3RhdGUuY3R4LnN0cm9rZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGUoKSA6IHZvaWQge1xyXG4gICAgZ2FtZVN0YXRlLmJsb2Nrcy5mb3JFYWNoKGJsb2NrID0+IHtcclxuICAgICAgICBibG9jay51cGRhdGUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGdhbWVTdGF0ZS5zbGlkZXJzLmZvckVhY2goc2xpZGVyID0+IHtcclxuICAgICAgICBzbGlkZXIudXBkYXRlKCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSA6IHZvaWQge1xyXG4gICAgdXBkYXRlKCk7XHJcbiAgICBkcmF3KCk7XHJcblxyXG4gICAgY29uc3QgY2FsbFN0YWNrID0gZ2FtZVN0YXRlLm5leHRTdGFjaztcclxuICAgIGdhbWVTdGF0ZS5uZXh0U3RhY2sgPSBbXTtcclxuXHJcbiAgICBpZiAoY2FsbFN0YWNrLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjYWxsU3RhY2suZm9yRWFjaChibG9jayA9PiB7XHJcbiAgICAgICAgICAgIC8vIHdpbGwgY2FsbCBjb21tYW5kIGFuZCBwdXNoIGl0IGJhY2sgb24gc3RhY2tcclxuICAgICAgICAgICAgaWYgKGJsb2NrLmN1cnJlbnRDYWxsQ291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBibG9jay5jYWxsKCk7XHJcbiAgICAgICAgICAgICAgICBnYW1lU3RhdGUubmV4dFN0YWNrLnB1c2goYmxvY2spO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGVsc2UganVzdCBjYWxsIG9uY2UgYW5kIGZpbmQgbmV4dCBjYWxsXHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYmxvY2suY2FsbCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBnYW1lU3RhdGUucHJvZ3JhbVJ1bm5pbmcgPSBmYWxzZTtcclxuICAgIH1cclxufSwgMTIpOyIsImltcG9ydCB7IEdhbWVTdGF0ZSB9IGZyb20gXCIuL0dhbWVTdGF0ZVwiO1xyXG5pbXBvcnQgeyBHcmlkQmxvY2sgfSBmcm9tIFwiLi9HcmlkQmxvY2tcIjtcclxuaW1wb3J0IHsgQ29tbWFuZEJsb2NrQnV0dG9uIH0gZnJvbSBcIi4vQ29tbWFuZEJsb2NrXCI7XHJcbmltcG9ydCB7IEZsb3dCbG9ja0J1dHRvbiB9IGZyb20gXCIuL0Zsb3dCbG9ja1wiO1xyXG5pbXBvcnQgeyBDb21tYW5kQmxvY2tUeXBlcywgRmxvd0Jsb2NrVHlwZXMgfSBmcm9tIFwiLi9FbnVtc1wiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEdlbmVyYXRlTGV2ZWwoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIGxldmVsT2JqOiBvYmplY3QsIHBhbGV0dGVDb2xvcjogc3RyaW5nKSB7XHJcbiAgICBsZXQgeU9mZnNldDogbnVtYmVyID0gNTtcclxuICAgIGxldCB4T2Zmc2V0OiBudW1iZXIgPSA1O1xyXG4gICAgbGV0IG1heFhPZmZzZXQ6IG51bWJlciA9IDA7XHJcbiAgICBsZXQgbWF4WU9mZnNldDogbnVtYmVyID0gMDtcclxuXHJcbiAgICAvLyBzZXQgdXAgZ3JpZCBmb3IgQ29tbWFuZCBQYWxldHRlXHJcbiAgICAvLyBhc3NpZ24gcm93IGFuZCBjb2x1bW4gdmFsdWVzIHRvIGdyaWQgYmxvY2tzXHJcbiAgICBmb3IgKHZhciByID0gMDsgciA8IGxldmVsT2JqW1wiY29tbWFuZF9wYWxldHRlXCJdW1wiYmxvY2tfaGVpZ2h0XCJdOyByKyspIHtcclxuICAgICAgICBmb3IgKHZhciBjID0gMDsgYyA8IGxldmVsT2JqW1wiY29tbWFuZF9wYWxldHRlXCJdW1wiYmxvY2tfd2lkdGhcIl07IGMrKykge1xyXG4gICAgICAgICAgICBuZXcgR3JpZEJsb2NrKGdhbWVTdGF0ZSwgeE9mZnNldCwgeU9mZnNldCwgNTAsIDUwLCByLCBjLCBwYWxldHRlQ29sb3IpO1xyXG4gICAgICAgICAgICB4T2Zmc2V0ICs9IDU1O1xyXG4gICAgICAgIH1cclxuICAgICAgICB5T2Zmc2V0ICs9IDU1O1xyXG4gICAgICAgIG1heFhPZmZzZXQgPSB4T2Zmc2V0O1xyXG4gICAgICAgIHhPZmZzZXQgPSA1O1xyXG4gICAgfVxyXG5cclxuICAgIG1heFlPZmZzZXQgPSB5T2Zmc2V0O1xyXG4gICAgeU9mZnNldCA9IG1heFlPZmZzZXQgKyAyMDtcclxuXHJcbiAgICAvLyBzZXQgdXAgQ29tbWFuZCBCbG9jayBCdXR0b25zXHJcbiAgICAvLyBDT05TSURFUjogQWNjb21tb2RhdGluZyBmb3IgY29tbWFuZCBwYWxldHRlIHdpZHRoXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxldmVsT2JqW1wiY29tbWFuZF9ibG9ja3NcIl0ubGVuZ3RoOyBpICsrKSB7XHJcbiAgICAgICAgc3dpdGNoKGxldmVsT2JqW1wiY29tbWFuZF9ibG9ja3NcIl1baV0pIHtcclxuICAgICAgICAgICAgY2FzZSBcInN0YXJ0XCI6XHJcbiAgICAgICAgICAgICAgICBuZXcgQ29tbWFuZEJsb2NrQnV0dG9uKGdhbWVTdGF0ZSwgeE9mZnNldCwgeU9mZnNldCwgNTAsIDUwLCBcInRoaXN0bGVcIiwgQ29tbWFuZEJsb2NrVHlwZXMuU3RhcnQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJtb3ZlXCI6XHJcbiAgICAgICAgICAgICAgICBuZXcgQ29tbWFuZEJsb2NrQnV0dG9uKGdhbWVTdGF0ZSwgeE9mZnNldCwgeU9mZnNldCwgNTAsIDUwLCBcInRoaXN0bGVcIiwgQ29tbWFuZEJsb2NrVHlwZXMuTW92ZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImFuZ2xlXCI6XHJcbiAgICAgICAgICAgICAgICBuZXcgQ29tbWFuZEJsb2NrQnV0dG9uKGdhbWVTdGF0ZSwgeE9mZnNldCwgeU9mZnNldCwgNTAsIDUwLCBcInRoaXN0bGVcIiwgQ29tbWFuZEJsb2NrVHlwZXMuQW5nbGUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJ0aHJlYWRcIjpcclxuICAgICAgICAgICAgICAgIG5ldyBDb21tYW5kQmxvY2tCdXR0b24oZ2FtZVN0YXRlLCB4T2Zmc2V0LCB5T2Zmc2V0LCA1MCwgNTAsIFwidGhpc3RsZVwiLCBDb21tYW5kQmxvY2tUeXBlcy5UaHJlYWQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJsYXNlclwiOlxyXG4gICAgICAgICAgICAgICAgbmV3IENvbW1hbmRCbG9ja0J1dHRvbihnYW1lU3RhdGUsIHhPZmZzZXQsIHlPZmZzZXQsIDUwLCA1MCwgXCJncmVlblwiLCBDb21tYW5kQmxvY2tUeXBlcy5MYXNlcik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInNjYW5cIjpcclxuICAgICAgICAgICAgICAgIG5ldyBDb21tYW5kQmxvY2tCdXR0b24oZ2FtZVN0YXRlLCB4T2Zmc2V0LCB5T2Zmc2V0LCA1MCwgNTAsIFwiZGFya2JsdWVcIiwgQ29tbWFuZEJsb2NrVHlwZXMuU2Nhbik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImdyYXBwbGVcIjpcclxuICAgICAgICAgICAgICAgIG5ldyBDb21tYW5kQmxvY2tCdXR0b24oZ2FtZVN0YXRlLCB4T2Zmc2V0LCB5T2Zmc2V0LCA1MCwgNTAsIFwibWFyb29uXCIsIENvbW1hbmRCbG9ja1R5cGVzLkdyYXBwbGUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHhPZmZzZXQgKz0gNTU7XHJcbiAgICB9XHJcblxyXG4gICAgeE9mZnNldCA9IG1heFhPZmZzZXQgKyAyMDtcclxuICAgIHlPZmZzZXQgPSA1O1xyXG5cclxuICAgIC8vIHNldCB1cCBGbG93IEJsb2NrIEJ1dHRvbnNcclxuICAgIC8vIENPTlNJREVSOiBBY2NvbW1vZGF0aW5nIGZvciBjb21tYW5kIHBhbGV0dGUgaGVpZ2h0XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxldmVsT2JqW1wiZmxvd19ibG9ja3NcIl0ubGVuZ3RoOyBpICsrKSB7XHJcbiAgICAgICAgc3dpdGNoKGxldmVsT2JqW1wiZmxvd19ibG9ja3NcIl1baV0pIHtcclxuICAgICAgICAgICAgY2FzZSBcInVwXCI6XHJcbiAgICAgICAgICAgICAgICBuZXcgRmxvd0Jsb2NrQnV0dG9uKGdhbWVTdGF0ZSwgeE9mZnNldCwgeU9mZnNldCwgNTAsIDUwLCBcInllbGxvd1wiLCBGbG93QmxvY2tUeXBlcy5VcCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImxlZnRcIjpcclxuICAgICAgICAgICAgICAgIG5ldyBGbG93QmxvY2tCdXR0b24oZ2FtZVN0YXRlLCB4T2Zmc2V0LCB5T2Zmc2V0LCA1MCwgNTAsIFwieWVsbG93XCIsIEZsb3dCbG9ja1R5cGVzLkxlZnQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJyaWdodFwiOlxyXG4gICAgICAgICAgICAgICAgbmV3IEZsb3dCbG9ja0J1dHRvbihnYW1lU3RhdGUsIHhPZmZzZXQsIHlPZmZzZXQsIDUwLCA1MCwgXCJ5ZWxsb3dcIiwgRmxvd0Jsb2NrVHlwZXMuUmlnaHQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJkb3duXCI6XHJcbiAgICAgICAgICAgICAgICBuZXcgRmxvd0Jsb2NrQnV0dG9uKGdhbWVTdGF0ZSwgeE9mZnNldCwgeU9mZnNldCwgNTAsIDUwLCBcInllbGxvd1wiLCBGbG93QmxvY2tUeXBlcy5Eb3duKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICB5T2Zmc2V0ICs9IDU1O1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgR2FtZVN0YXRlIH0gZnJvbSBcIi4vR2FtZVN0YXRlXCI7XHJcbmltcG9ydCB7IENvbW1hbmRCbG9jaywgQ29tbWFuZEJsb2NrQnV0dG9uIH0gZnJvbSBcIi4vQ29tbWFuZEJsb2NrXCI7XHJcbmltcG9ydCB7IEdyaWRCbG9jayB9IGZyb20gXCIuL0dyaWRCbG9ja1wiO1xyXG5pbXBvcnQgeyBGbG93QmxvY2ssIEZsb3dCbG9ja0J1dHRvbiB9IGZyb20gXCIuL0Zsb3dCbG9ja1wiO1xyXG5pbXBvcnQgeyBDb21tYW5kQmxvY2tUeXBlcywgRmxvd0Jsb2NrVHlwZXMgfSBmcm9tIFwiLi9FbnVtc1wiO1xyXG5pbXBvcnQgeyBzdGFydE5ld1RocmVhZENhbGwgfSBmcm9tIFwiLi9Qcm9ncmFtRXhlY3V0aW9uXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gU2V0VXBFdmVudExpc3RlbmVycyhnYW1lU3RhdGU6IEdhbWVTdGF0ZSkge1xyXG4gICAgZ2FtZVN0YXRlLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBmdW5jdGlvbigpIDogdm9pZCB7XHJcbiAgICAgICAgLy8gQ29sbGlzaW9uIGRldGVjdGlvbiBiZXR3ZWVuIGNsaWNrZWQgb2Zmc2V0IGFuZCBibG9jay5cclxuICAgICAgICBnYW1lU3RhdGUuYmxvY2tzLmZvckVhY2goYmxvY2sgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZ2FtZVN0YXRlLm1vdXNlWSA+IGJsb2NrLnkgJiYgZ2FtZVN0YXRlLm1vdXNlWSA8IGJsb2NrLnkgKyBibG9jay5oXHJcbiAgICAgICAgICAgICAgICAmJiBnYW1lU3RhdGUubW91c2VYID4gYmxvY2sueCAmJiBnYW1lU3RhdGUubW91c2VYIDwgYmxvY2sueCArIGJsb2NrLncpIHtcclxuICAgICAgICAgICAgICAgIGlmIChibG9jayBpbnN0YW5jZW9mIENvbW1hbmRCbG9jayAmJiBnYW1lU3RhdGUuY29tbWFuZENvbnRyb2xcclxuICAgICAgICAgICAgICAgICAgICB8fCBibG9jayBpbnN0YW5jZW9mIENvbW1hbmRCbG9ja0J1dHRvbiAmJiBnYW1lU3RhdGUuY29tbWFuZENvbnRyb2xcclxuICAgICAgICAgICAgICAgICAgICB8fCBibG9jayBpbnN0YW5jZW9mIEZsb3dCbG9jayAmJiBnYW1lU3RhdGUuZmxvd0NvbnRyb2xcclxuICAgICAgICAgICAgICAgICAgICB8fCBibG9jayBpbnN0YW5jZW9mIEZsb3dCbG9ja0J1dHRvbiAmJiBnYW1lU3RhdGUuZmxvd0NvbnRyb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICBibG9jay5tb3VzZURvd24gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYmxvY2sgaW5zdGFuY2VvZiBHcmlkQmxvY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayByYWRpbyBidXR0b24gZm9yIGZsb3cgb3IgY29tbWFuZCBjb250cm9sXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVTdGF0ZS5jb21tYW5kQ29udHJvbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBibG9jay5jb21tYW5kVHlwZSA9IENvbW1hbmRCbG9ja1R5cGVzLkVtcHR5O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChnYW1lU3RhdGUuZmxvd0NvbnRyb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2suZmxvd1R5cGUgPSBGbG93QmxvY2tUeXBlcy5FbXB0eTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gY2hlY2sgZm9yIHNsaWRlcnMgYmVpbmcgY2xpY2tlZFxyXG4gICAgICAgIGdhbWVTdGF0ZS5zbGlkZXJzLmZvckVhY2gocyA9PiB7XHJcbiAgICAgICAgICAgIGlmIChnYW1lU3RhdGUubW91c2VZID4gcy5zbGlkZXJZICYmIGdhbWVTdGF0ZS5tb3VzZVkgPCBzLnNsaWRlclkgKyBzLnNsaWRlckhcclxuICAgICAgICAgICAgICAgICYmIGdhbWVTdGF0ZS5tb3VzZVggPiBzLnNsaWRlclggJiYgZ2FtZVN0YXRlLm1vdXNlWCA8IHMuc2xpZGVyWCArIHMuc2xpZGVyVykge1xyXG4gICAgICAgICAgICAgICAgcy5tb3VzZURvd24gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfSwgZmFsc2UpO1xyXG5cclxuICAgIC8vIG1ha2Ugc3VyZSBhbGwgY2xpY2thYmxlIGVudGl0aWVzIGFyZW4ndCBjbGlja2FibGUgb24gbW91c2V1cFxyXG4gICAgZ2FtZVN0YXRlLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZnVuY3Rpb24oKSA6IHZvaWQge1xyXG4gICAgICAgIGdhbWVTdGF0ZS5ibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XHJcbiAgICAgICAgICAgIGlmIChibG9jayBpbnN0YW5jZW9mIENvbW1hbmRCbG9ja1xyXG4gICAgICAgICAgICAgICAgfHwgYmxvY2sgaW5zdGFuY2VvZiBGbG93QmxvY2spIHtcclxuICAgICAgICAgICAgICAgIGlmIChibG9jay5tb3VzZURvd24pIHtcclxuICAgICAgICAgICAgICAgICAgICBibG9jay5tb3VzZURvd24gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBnYW1lU3RhdGUuc2xpZGVycy5mb3JFYWNoKHMgPT4ge1xyXG4gICAgICAgICAgICBzLm1vdXNlRG93biA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSwgZmFsc2UpO1xyXG5cclxuICAgIGdhbWVTdGF0ZS5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZnVuY3Rpb24oZXZ0OiBNb3VzZUV2ZW50KSA6IHZvaWQge1xyXG4gICAgICAgIGdhbWVTdGF0ZS5tb3VzZVggPSAoZXZ0LmNsaWVudFggLSBnYW1lU3RhdGUucmVjdC5sZWZ0KSAvIChnYW1lU3RhdGUucmVjdC5yaWdodCAtIGdhbWVTdGF0ZS5yZWN0LmxlZnQpICogZ2FtZVN0YXRlLmNhbnZhcy53aWR0aDtcclxuICAgICAgICBnYW1lU3RhdGUubW91c2VZID0gKGV2dC5jbGllbnRZIC0gZ2FtZVN0YXRlLnJlY3QudG9wKSAvIChnYW1lU3RhdGUucmVjdC5ib3R0b20gLSBnYW1lU3RhdGUucmVjdC50b3ApICogZ2FtZVN0YXRlLmNhbnZhcy5oZWlnaHQ7XHJcbiAgICB9LCBmYWxzZSk7XHJcblxyXG4gICAgd2luZG93Lm9ua2V5dXAgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgLy8gaS5lLiBTcGFjZUJhciBwcmVzc2VkXHJcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMzIpIHtcclxuICAgICAgICAgICAgaWYgKGdhbWVTdGF0ZS5mbG93Q29udHJvbCkge1xyXG4gICAgICAgICAgICAgICAgZ2FtZVN0YXRlLmZsb3dDb250cm9sID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBnYW1lU3RhdGUuY29tbWFuZENvbnRyb2wgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDb21tYW5kIENvbnRyb2whXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGdhbWVTdGF0ZS5jb21tYW5kQ29udHJvbCkge1xyXG4gICAgICAgICAgICAgICAgZ2FtZVN0YXRlLmNvbW1hbmRDb250cm9sID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBnYW1lU3RhdGUuZmxvd0NvbnRyb2wgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGbG93IENvbnRyb2whXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBpLmUuIFMga2V5IHByZXNzZWRcclxuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSA4Mykge1xyXG4gICAgICAgICAgICBpZiAoIWdhbWVTdGF0ZS5wcm9ncmFtUnVubmluZykge1xyXG4gICAgICAgICAgICAgICAgZ2FtZVN0YXRlLnByb2dyYW1SdW5uaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHN0YXJ0TmV3VGhyZWFkQ2FsbChnYW1lU3RhdGUsIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==