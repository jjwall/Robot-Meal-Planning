!function(t){var e={};function o(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=1)}([function(t){t.exports={next_level:"level2",command_palette:{block_width:5,block_height:5},command_blocks:["start","move","angle"],flow_blocks:["up","down","left","right"]}},function(t,e,o){"use strict";o.r(e);var n,a,r=o(0),i=function(){function t(t,e,o,n,a,r){this.GameState=t,this.X=e,this.Y=o,this.H=n,this.W=a,this.Color=r,this.gameState=t,this.x=e,this.y=o,this.h=n,this.w=a,this.color=r}return t.prototype.draw=function(){},t.prototype.update=function(){},t}();!function(t){t[t.Empty=0]="Empty",t[t.Start=1]="Start",t[t.Move=2]="Move",t[t.Angle=3]="Angle",t[t.Scan=4]="Scan",t[t.Laser=5]="Laser",t[t.Grapple=6]="Grapple"}(n||(n={})),function(t){t[t.Empty=0]="Empty",t[t.Up=1]="Up",t[t.Down=2]="Down",t[t.Left=3]="Left",t[t.Right=4]="Right",t[t.ConditionalLeftRight=5]="ConditionalLeftRight",t[t.ConditionalLeftUp=6]="ConditionalLeftUp",t[t.ConditionalLeftDown=7]="ConditionalLeftDown",t[t.ConditionalUpRight=8]="ConditionalUpRight",t[t.ConditionalUpDown=9]="ConditionalUpDown",t[t.ConditionalDownRight=10]="ConditionalDownRight"}(a||(a={}));var s=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),c=function(t){function e(e,o,a,r,i,s,c){var h=t.call(this,e,o,a,r,i,s)||this;switch(h.mouseDown=!0,h.set=!1,h.type=c,h.image=new Image,c){case n.Start:h.image.src="data/textures/StartBlock.png";break;case n.Move:h.image.src="data/textures/MoveBlock.png";break;case n.Angle:h.image.src="data/textures/AngleBlock.png"}return h.gameState.blocks.push(h),h}return s(e,t),e.prototype.update=function(){if(this.mouseDown&&(this.x=this.gameState.mouseX-this.w/2,this.y=this.gameState.mouseY-this.h/2,this.set=!1),!this.mouseDown&&!this.set){var t=this.gameState.blocks.indexOf(this);this.gameState.blocks.splice(t,1)}},e.prototype.draw=function(){this.gameState.ctx.fillStyle=this.color,this.gameState.ctx.fillRect(this.x,this.y,this.w,this.h),this.gameState.ctx.translate(this.x,this.y),this.gameState.ctx.drawImage(this.image,0,0),this.gameState.ctx.translate(-this.x,-this.y)},e}(i),h=function(t){function e(e,o,a,r,i,s,c){var h=t.call(this,e,o,a,r,i,s)||this;switch(h.mouseDown=!1,h.type=c,h.image=new Image,c){case n.Start:h.image.src="data/textures/StartBlock.png";break;case n.Move:h.image.src="data/textures/MoveBlock.png";break;case n.Angle:h.image.src="data/textures/AngleBlock.png"}return h.gameState.blocks.push(h),h}return s(e,t),e.prototype.update=function(){this.mouseDown&&(this.mouseDown=!1,new c(this.gameState,this.x,this.y,this.h,this.w,this.Color,this.type))},e.prototype.draw=function(){this.gameState.ctx.fillStyle=this.color,this.gameState.ctx.fillRect(this.x,this.y,this.w,this.h),this.gameState.ctx.translate(this.x,this.y),this.gameState.ctx.drawImage(this.image,0,0),this.gameState.ctx.translate(-this.x,-this.y)},e}(i),l=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),u=function(t){function e(e,o,n,r,i,s,c){var h=t.call(this,e,o,n,r,i,s)||this;switch(h.gameState=e,h.type=c,h.mouseDown=!0,h.set=!1,h.image=new Image,c){case a.Up:h.image.src="data/textures/UpArrow.png";break;case a.Down:h.image.src="data/textures/DownArrow.png";break;case a.Left:h.image.src="data/textures/LeftArrow.png";break;case a.Right:h.image.src="data/textures/RightArrow.png"}return h.gameState.blocks.push(h),h}return l(e,t),e.prototype.update=function(){if(this.mouseDown&&(this.x=this.gameState.mouseX-this.w/2,this.y=this.gameState.mouseY-this.h/2,this.set=!1),!this.mouseDown&&!this.set){var t=this.gameState.blocks.indexOf(this);this.gameState.blocks.splice(t,1)}},e.prototype.draw=function(){this.gameState.ctx.translate(this.x,this.y),this.gameState.ctx.drawImage(this.image,0,0),this.gameState.ctx.translate(-this.x,-this.y),this.gameState.ctx.strokeStyle=this.color,this.gameState.ctx.rect(this.x,this.y,this.w,this.h)},e}(i),m=function(t){function e(e,o,n,r,i,s,c){var h=t.call(this,e,o,n,r,i,s)||this;switch(h.type=c,h.mouseDown=!1,h.image=new Image,c){case a.Up:h.image.src="data/textures/UpArrow.png";break;case a.Down:h.image.src="data/textures/DownArrow.png";break;case a.Left:h.image.src="data/textures/LeftArrow.png";break;case a.Right:h.image.src="data/textures/RightArrow.png"}return h.gameState.blocks.push(h),h}return l(e,t),e.prototype.update=function(){this.mouseDown&&(this.mouseDown=!1,new u(this.gameState,this.x,this.y,this.h,this.w,this.Color,this.type))},e.prototype.draw=function(){this.gameState.ctx.translate(this.x,this.y),this.gameState.ctx.drawImage(this.image,0,0),this.gameState.ctx.translate(-this.x,-this.y),this.gameState.ctx.strokeStyle=this.color,this.gameState.ctx.rect(this.x,this.y,this.w,this.h)},e}(i),p=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),f=function(t){function e(e,o,r,i,s,c,h,l){var u=t.call(this,e,o,r,i,s,l)||this;return u.r=c,u.c=h,u.commandType=n.Empty,u.flowType=a.Empty,u.gameState.blocks.push(u),u}return p(e,t),e.prototype.update=function(){var t=this;this.gameState.blocks.forEach(function(e){(e instanceof c||e instanceof u)&&!1===e.mouseDown&&e.x<t.x+t.w&&e.x+e.w>t.x&&e.y<t.y+t.h&&e.h+e.y>t.y&&(t.commandType===n.Empty&&e instanceof c?(e.x=t.x,e.y=t.y,e.set=!0,t.commandType=e.type):t.flowType===a.Empty&&e instanceof u&&(e.x=t.x,e.y=t.y,e.set=!0,t.flowType=e.type))})},e.prototype.draw=function(){this.gameState.ctx.fillStyle=this.color,this.gameState.ctx.fillRect(this.x,this.y,this.w,this.h)},e}(i);function g(t){console.log("stopping thread"),t.programStack=[],t.programRunning=!1}function w(t,e){var o,r;switch(e.flowType){case a.Up:o=e.r-1,r=e.c;break;case a.Down:o=e.r+1,r=e.c;break;case a.Right:r=e.c+1,o=e.r;break;case a.Left:r=e.c-1,o=e.r}return t.blocks.forEach(function(e){if(e instanceof f&&e.r===o&&e.c===r&&e.commandType!==n.Empty&&e.flowType!==a.Empty)switch(e.commandType){case n.Angle:return function(t,e){console.log("angle"),t.programStack.push(w(t,e))}(t,e);case n.Move:return function(t,e){console.log("move"),t.programStack.push(w(t,e))}(t,e);case n.Start:return function(t,e){console.log("start"),t.programStack.push(w(t,e))}(t,e);default:return g(t)}}),g(t)}o.d(e,"GameState",function(){return y});var y=function(){return function(t){this.canvas=t&&t.canvas||document.getElementById("gameScreen"),this.ctx=t&&t.ctx||this.canvas.getContext("2d"),this.rect=t&&t.rect||this.canvas.getBoundingClientRect(),this.blocks=t&&t.blocks||[],this.mouseX=t&&t.mouseX||0,this.mouseY=t&&t.mouseY||0,this.commandControl=t&&t.commandControl||!0,this.flowControl=t&&t.flowControl||!1,this.programStack=t&&t.programStack||[],this.programRunning=t&&t.programRunning||!1}}(),d=new y;!function(t,e,o){for(var r=5,i=5,s=0,c=0;c<e.command_palette.block_height;c++){for(var l=0;l<e.command_palette.block_width;l++)new f(t,i,r,50,50,c,l,o),i+=55;r+=55,s=i,i=5}r+=20;for(var u=0;u<e.command_blocks.length;u++){switch(e.command_blocks[u]){case"start":new h(t,i,r,50,50,"thistle",n.Start);break;case"move":new h(t,i,r,50,50,"thistle",n.Move);break;case"angle":new h(t,i,r,50,50,"thistle",n.Angle);break;case"laser":new h(t,i,r,50,50,"green",n.Laser);break;case"scan":new h(t,i,r,50,50,"darkblue",n.Scan);break;case"grapple":new h(t,i,r,50,50,"maroon",n.Grapple)}i+=55}for(i=s+20,r=5,u=0;u<e.flow_blocks.length;u++){switch(e.flow_blocks[u]){case"up":new m(t,i,r,50,50,"yellow",a.Up);break;case"left":new m(t,i,r,50,50,"yellow",a.Left);break;case"right":new m(t,i,r,50,50,"yellow",a.Right);break;case"down":new m(t,i,r,50,50,"yellow",a.Down)}r+=55}}(d,r,"lightblue"),function(t){t.canvas.addEventListener("mousedown",function(){t.blocks.forEach(function(e){t.mouseY>e.y&&t.mouseY<e.y+e.h&&t.mouseX>e.x&&t.mouseX<e.x+e.w&&(e instanceof c&&t.commandControl||e instanceof h&&t.commandControl||e instanceof u&&t.flowControl||e instanceof m&&t.flowControl?e.mouseDown=!0:e instanceof f&&(t.commandControl?e.commandType=n.Empty:t.flowControl&&(e.flowType=a.Empty)))})},!1),t.canvas.addEventListener("mouseup",function(){t.blocks.forEach(function(t){(t instanceof c||t instanceof u)&&t.mouseDown&&(t.mouseDown=!1)})},!1),t.canvas.addEventListener("mousemove",function(e){t.mouseX=(e.clientX-t.rect.left)/(t.rect.right-t.rect.left)*t.canvas.width,t.mouseY=(e.clientY-t.rect.top)/(t.rect.bottom-t.rect.top)*t.canvas.height},!1),window.onkeyup=function(e){32===e.keyCode&&(t.flowControl?(t.flowControl=!1,t.commandControl=!0,console.log("Command Control!")):t.commandControl&&(t.commandControl=!1,t.flowControl=!0,console.log("Flow Control!"))),83===e.keyCode&&(t.programRunning||(t.programRunning=!0,function(t,e){t.blocks.forEach(function(e){e instanceof f&&e.commandType===n.Start&&e.flowType!==a.Empty&&t.programStack.push(w(t,e))})}(t)))}}(d),setInterval(function(){d.blocks.forEach(function(t){t.update()}),d.ctx.clearRect(0,0,d.canvas.width,d.canvas.height),d.ctx.beginPath(),d.blocks.forEach(function(t){t instanceof u||t.draw()}),d.blocks.forEach(function(t){t instanceof u&&t.draw()}),d.ctx.stroke(),d.programStack.length>0&&d.programRunning?d.programStack.forEach(function(t){t(),d.programStack.pop()}):d.programRunning=!1},12)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL0VudW1zLnRzIiwid2VicGFjazovLy8uL3NyYy9CYXNlQmxvY2sudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbW1hbmRCbG9jay50cyIsIndlYnBhY2s6Ly8vLi9zcmMvRmxvd0Jsb2NrLnRzIiwid2VicGFjazovLy8uL3NyYy9HcmlkQmxvY2sudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1Byb2dyYW1FeGVjdXRpb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0xldmVsQ3JlYXRvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvU2V0VXBFdmVudExpc3RlbmVycy50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkNvbW1hbmRCbG9ja1R5cGVzIiwiRmxvd0Jsb2NrVHlwZXMiLCJCYXNlQmxvY2siLCJHYW1lU3RhdGUiLCJYIiwiWSIsIkgiLCJXIiwiQ29sb3IiLCJ0aGlzIiwiZ2FtZVN0YXRlIiwieCIsInkiLCJoIiwidyIsImNvbG9yIiwiZHJhdyIsInVwZGF0ZSIsIkNvbW1hbmRCbG9ja19Db21tYW5kQmxvY2siLCJfc3VwZXIiLCJDb21tYW5kQmxvY2siLCJUeXBlIiwiX3RoaXMiLCJtb3VzZURvd24iLCJzZXQiLCJ0eXBlIiwiaW1hZ2UiLCJJbWFnZSIsIlN0YXJ0Iiwic3JjIiwiTW92ZSIsIkFuZ2xlIiwiYmxvY2tzIiwicHVzaCIsIl9fZXh0ZW5kcyIsIm1vdXNlWCIsIm1vdXNlWSIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImN0eCIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwidHJhbnNsYXRlIiwiZHJhd0ltYWdlIiwiQ29tbWFuZEJsb2NrX0NvbW1hbmRCbG9ja0J1dHRvbiIsIkNvbW1hbmRCbG9ja0J1dHRvbiIsIkZsb3dCbG9ja19GbG93QmxvY2siLCJGbG93QmxvY2siLCJVcCIsIkRvd24iLCJMZWZ0IiwiUmlnaHQiLCJGbG93QmxvY2tfZXh0ZW5kcyIsInN0cm9rZVN0eWxlIiwicmVjdCIsIkZsb3dCbG9ja19GbG93QmxvY2tCdXR0b24iLCJGbG93QmxvY2tCdXR0b24iLCJHcmlkQmxvY2tfR3JpZEJsb2NrIiwiR3JpZEJsb2NrIiwiUm93IiwiQ29sdW1uIiwiY29tbWFuZFR5cGUiLCJFbXB0eSIsImZsb3dUeXBlIiwiR3JpZEJsb2NrX2V4dGVuZHMiLCJmb3JFYWNoIiwiYmxvY2siLCJzdG9wVGhyZWFkIiwiY29uc29sZSIsImxvZyIsInByb2dyYW1TdGFjayIsInByb2dyYW1SdW5uaW5nIiwiZmluZE5leHRFeGVjdXRpb24iLCJ0YXJnZXRSb3ciLCJ0YXJnZXRDb2wiLCJhbmdsZSIsIm1vdmUiLCJzdGFydCIsIl9fd2VicGFja19leHBvcnRzX18iLCJtYWluX0dhbWVTdGF0ZSIsIm9iaiIsImNhbnZhcyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRDb250ZXh0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiY29tbWFuZENvbnRyb2wiLCJmbG93Q29udHJvbCIsIm1haW5fZ2FtZVN0YXRlIiwibGV2ZWxPYmoiLCJwYWxldHRlQ29sb3IiLCJ5T2Zmc2V0IiwieE9mZnNldCIsIm1heFhPZmZzZXQiLCJsZW5ndGgiLCJMYXNlciIsIlNjYW4iLCJHcmFwcGxlIiwiTGV2ZWxDcmVhdG9yIiwibGV2ZWwxIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsImNsaWVudFgiLCJsZWZ0IiwicmlnaHQiLCJ3aWR0aCIsImNsaWVudFkiLCJ0b3AiLCJib3R0b20iLCJoZWlnaHQiLCJ3aW5kb3ciLCJvbmtleXVwIiwiZSIsImtleUNvZGUiLCJ0aHJlYWQiLCJzdGFydE5ld1RocmVhZCIsIlNldFVwRXZlbnRMaXN0ZW5lcnMiLCJzZXRJbnRlcnZhbCIsImNsZWFyUmVjdCIsImJlZ2luUGF0aCIsInN0cm9rZSIsInBvcCJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEdBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxhQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFBQWIsRUFBQSxjQUFpRG1CLE9BQUEsS0FRakRyQixFQUFBc0IsRUFBQSxTQUFBRCxFQUFBRSxHQUVBLEdBREEsRUFBQUEsSUFBQUYsRUFBQXJCLEVBQUFxQixJQUNBLEVBQUFFLEVBQUEsT0FBQUYsRUFDQSxLQUFBRSxHQUFBLGlCQUFBRixRQUFBRyxXQUFBLE9BQUFILEVBQ0EsSUFBQUksRUFBQVgsT0FBQVksT0FBQSxNQUdB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QixRQUFRQyxJQUFJLHFCQUVQNUQsRUFBVTZFLGlCQUNmN0UsRUFBVTZFLGdCQUFpQixFQUMzQjdFLEVBQVU4RSxhQUFjLEVBQ3hCbkIsUUFBUUMsSUFBSSxtQkFLRixLQUFkMkMsRUFBRUMsVUFDR3hHLEVBQVU4RCxpQkFDWDlELEVBQVU4RCxnQkFBaUIsRUh6Q3BDLFNBQXdCOUQsRUFBc0J5RyxHQUVqRHpHLEVBQVVzQixPQUFPa0MsUUFBUSxTQUFBQyxHQUNqQkEsYUFBaUJULEdBQ2JTLEVBQU1MLGNBQWdCOUQsRUFBa0I0QixPQUNyQ3VDLEVBQU1ILFdBQWEvRCxFQUFlOEQsT0FHckNyRCxFQUFVNkQsYUFBYXRDLEtBQUt3QyxFQUFrQi9ELEVBQVd5RCxNR2tDekRpRCxDQUFlMUcsTUYzQi9CMkcsQ0FBb0I1QixHQTZCcEI2QixZQUFZLFdBTFI3QixFQUFVekQsT0FBT2tDLFFBQVEsU0FBQUMsR0FDckJBLEVBQU1sRCxXQXRCVndFLEVBQVVqRCxJQUFJK0UsVUFBVSxFQUFHLEVBQUc5QixFQUFVUCxPQUFPd0IsTUFBT2pCLEVBQVVQLE9BQU80QixRQUN2RXJCLEVBQVVqRCxJQUFJZ0YsWUFHZC9CLEVBQVV6RCxPQUFPa0MsUUFBUSxTQUFBQyxHQUNmQSxhQUFpQnBCLEdBQ25Cb0IsRUFBTW5ELFNBS2R5RSxFQUFVekQsT0FBT2tDLFFBQVEsU0FBQUMsR0FDakJBLGFBQWlCcEIsR0FDakJvQixFQUFNbkQsU0FJZHlFLEVBQVVqRCxJQUFJaUYsU0FhVmhDLEVBQVVsQixhQUFhd0IsT0FBUyxHQUFLTixFQUFVakIsZUFDL0NpQixFQUFVbEIsYUFBYUwsUUFBUSxTQUFBL0YsR0FFM0JBLElBQ0FzSCxFQUFVbEIsYUFBYW1ELFFBSTNCakMsRUFBVWpCLGdCQUFpQixHQUVoQyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG4iLCJleHBvcnQgZW51bSBDb21tYW5kQmxvY2tUeXBlcyB7XHJcbiAgICBFbXB0eSxcclxuICAgIFN0YXJ0LFxyXG4gICAgTW92ZSxcclxuICAgIEFuZ2xlLFxyXG4gICAgU2NhbixcclxuICAgIExhc2VyLFxyXG4gICAgR3JhcHBsZVxyXG59XHJcblxyXG5leHBvcnQgZW51bSBGbG93QmxvY2tUeXBlcyB7XHJcbiAgICBFbXB0eSxcclxuICAgIFVwLFxyXG4gICAgRG93bixcclxuICAgIExlZnQsXHJcbiAgICBSaWdodCxcclxuICAgIENvbmRpdGlvbmFsTGVmdFJpZ2h0LFxyXG4gICAgQ29uZGl0aW9uYWxMZWZ0VXAsXHJcbiAgICBDb25kaXRpb25hbExlZnREb3duLFxyXG4gICAgQ29uZGl0aW9uYWxVcFJpZ2h0LFxyXG4gICAgQ29uZGl0aW9uYWxVcERvd24sXHJcbiAgICBDb25kaXRpb25hbERvd25SaWdodFxyXG59IiwiaW1wb3J0IHsgR2FtZVN0YXRlIH0gZnJvbSBcIi4vbWFpblwiO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEJhc2VCbG9jayB7XHJcbiAgICBnYW1lU3RhdGU6IEdhbWVTdGF0ZTtcclxuICAgIHg6IG51bWJlcjtcclxuICAgIHk6IG51bWJlcjtcclxuICAgIGg6IG51bWJlcjtcclxuICAgIHc6IG51bWJlcjtcclxuICAgIGNvbG9yOiBzdHJpbmc7XHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgR2FtZVN0YXRlOiBHYW1lU3RhdGUsXHJcbiAgICAgICAgICAgICAgICBwdWJsaWMgWDogbnVtYmVyLFxyXG4gICAgICAgICAgICAgICAgcHVibGljIFk6IG51bWJlcixcclxuICAgICAgICAgICAgICAgIHB1YmxpYyBIOiBudW1iZXIsXHJcbiAgICAgICAgICAgICAgICBwdWJsaWMgVzogbnVtYmVyLFxyXG4gICAgICAgICAgICAgICAgcHVibGljIENvbG9yOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZSA9IEdhbWVTdGF0ZTtcclxuICAgICAgICB0aGlzLnggPSBYO1xyXG4gICAgICAgIHRoaXMueSA9IFk7XHJcbiAgICAgICAgdGhpcy5oID0gSDtcclxuICAgICAgICB0aGlzLncgPSBXO1xyXG4gICAgICAgIHRoaXMuY29sb3IgPSBDb2xvcjtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3KCk6IHZvaWQge30gXHJcbiAgICB1cGRhdGUoKTogdm9pZCB7fVxyXG59IiwiaW1wb3J0IHsgR2FtZVN0YXRlIH0gZnJvbSBcIi4vbWFpblwiO1xyXG5pbXBvcnQgeyBCYXNlQmxvY2sgfSBmcm9tIFwiLi9CYXNlQmxvY2tcIjtcclxuaW1wb3J0IHsgQ29tbWFuZEJsb2NrVHlwZXMgfSBmcm9tIFwiLi9FbnVtc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbW1hbmRCbG9jayBleHRlbmRzIEJhc2VCbG9jayB7XHJcbiAgICBnYW1lU3RhdGU6IEdhbWVTdGF0ZTtcclxuICAgIHg6IG51bWJlcjtcclxuICAgIHk6IG51bWJlcjtcclxuICAgIHc6IG51bWJlcjtcclxuICAgIGg6IG51bWJlcjtcclxuICAgIGNvbG9yOiBzdHJpbmc7XHJcbiAgICBtb3VzZURvd246IGJvb2xlYW47XHJcbiAgICBzZXQ6IGJvb2xlYW47XHJcbiAgICB0eXBlOiBDb21tYW5kQmxvY2tUeXBlcztcclxuICAgIGltYWdlOiBIVE1MSW1hZ2VFbGVtZW50O1xyXG4gICAgY29uc3RydWN0b3IoR2FtZVN0YXRlOiBHYW1lU3RhdGUsIFg6IG51bWJlciwgWTogbnVtYmVyLCBIOiBudW1iZXIsIFc6IG51bWJlciwgQ29sb3I6IHN0cmluZywgVHlwZTogQ29tbWFuZEJsb2NrVHlwZXMpIHtcclxuICAgICAgICBzdXBlcihHYW1lU3RhdGUsIFgsIFksIEgsIFcsIENvbG9yKTtcclxuICAgICAgICB0aGlzLm1vdXNlRG93biA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zZXQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnR5cGUgPSBUeXBlO1xyXG4gICAgICAgIHRoaXMuaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICBzd2l0Y2goVHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIENvbW1hbmRCbG9ja1R5cGVzLlN0YXJ0OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSBcImRhdGEvdGV4dHVyZXMvU3RhcnRCbG9jay5wbmdcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENvbW1hbmRCbG9ja1R5cGVzLk1vdmU6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlLnNyYyA9IFwiZGF0YS90ZXh0dXJlcy9Nb3ZlQmxvY2sucG5nXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDb21tYW5kQmxvY2tUeXBlcy5BbmdsZTpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gXCJkYXRhL3RleHR1cmVzL0FuZ2xlQmxvY2sucG5nXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuYmxvY2tzLnB1c2godGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKCkgOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5tb3VzZURvd24pIHtcclxuICAgICAgICAgICAgdGhpcy54ID0gdGhpcy5nYW1lU3RhdGUubW91c2VYIC0gdGhpcy53LzI7XHJcbiAgICAgICAgICAgIHRoaXMueSA9IHRoaXMuZ2FtZVN0YXRlLm1vdXNlWSAtIHRoaXMuaC8yO1xyXG4gICAgICAgICAgICB0aGlzLnNldCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMubW91c2VEb3duICYmICF0aGlzLnNldCkge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmdhbWVTdGF0ZS5ibG9ja3MuaW5kZXhPZih0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5nYW1lU3RhdGUuYmxvY2tzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRyYXcoKSA6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC5maWxsU3R5bGUgPSB0aGlzLmNvbG9yO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC5maWxsUmVjdCh0aGlzLngsIHRoaXMueSwgdGhpcy53LCB0aGlzLmgpO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC50cmFuc2xhdGUodGhpcy54LCB0aGlzLnkpO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC5kcmF3SW1hZ2UodGhpcy5pbWFnZSwgMCwgMCk7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LnRyYW5zbGF0ZSgtdGhpcy54LCAtdGhpcy55KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBvbkNsaWNrKCkge1xyXG4gICAgLy8gfVxyXG59XHJcblxyXG4vLyBDT05TSURFUjogZXh0ZW5kaW5nIENvbW1hbmRCbG9jayBjbGFzc1xyXG5leHBvcnQgY2xhc3MgQ29tbWFuZEJsb2NrQnV0dG9uIGV4dGVuZHMgQmFzZUJsb2NrIHtcclxuICAgIGdhbWVTdGF0ZTogR2FtZVN0YXRlO1xyXG4gICAgeDogbnVtYmVyO1xyXG4gICAgeTogbnVtYmVyO1xyXG4gICAgdzogbnVtYmVyO1xyXG4gICAgaDogbnVtYmVyO1xyXG4gICAgY29sb3I6IHN0cmluZztcclxuICAgIG1vdXNlRG93bjogYm9vbGVhbjtcclxuICAgIHR5cGU6IENvbW1hbmRCbG9ja1R5cGVzO1xyXG4gICAgaW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQ7XHJcbiAgICBjb25zdHJ1Y3RvcihHYW1lU3RhdGU6IEdhbWVTdGF0ZSwgWDogbnVtYmVyLCBZOiBudW1iZXIsIEg6IG51bWJlciwgVzogbnVtYmVyLCBDb2xvcjogc3RyaW5nLCBUeXBlOiBDb21tYW5kQmxvY2tUeXBlcykge1xyXG4gICAgICAgIHN1cGVyKEdhbWVTdGF0ZSwgWCwgWSwgSCwgVywgQ29sb3IpO1xyXG4gICAgICAgIHRoaXMubW91c2VEb3duID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy50eXBlID0gVHlwZTtcclxuICAgICAgICB0aGlzLmltYWdlID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgc3dpdGNoKFR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBDb21tYW5kQmxvY2tUeXBlcy5TdGFydDpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gXCJkYXRhL3RleHR1cmVzL1N0YXJ0QmxvY2sucG5nXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDb21tYW5kQmxvY2tUeXBlcy5Nb3ZlOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSBcImRhdGEvdGV4dHVyZXMvTW92ZUJsb2NrLnBuZ1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ29tbWFuZEJsb2NrVHlwZXMuQW5nbGU6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlLnNyYyA9IFwiZGF0YS90ZXh0dXJlcy9BbmdsZUJsb2NrLnBuZ1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmJsb2Nrcy5wdXNoKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSgpIDogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMubW91c2VEb3duKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW91c2VEb3duID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IEFkZCB0eXBlIHRvIENvbW1hbmRCbG9jayBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAgICBuZXcgQ29tbWFuZEJsb2NrKHRoaXMuZ2FtZVN0YXRlLCB0aGlzLngsIHRoaXMueSwgdGhpcy5oLCB0aGlzLncsIHRoaXMuQ29sb3IsIHRoaXMudHlwZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRyYXcoKSA6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC5maWxsU3R5bGUgPSB0aGlzLmNvbG9yO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC5maWxsUmVjdCh0aGlzLngsIHRoaXMueSwgdGhpcy53LCB0aGlzLmgpO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC50cmFuc2xhdGUodGhpcy54LCB0aGlzLnkpO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC5kcmF3SW1hZ2UodGhpcy5pbWFnZSwgMCwgMCk7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LnRyYW5zbGF0ZSgtdGhpcy54LCAtdGhpcy55KTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbi8vIGV4cG9ydCBmdW5jdGlvbiBpc0NvbW1hbmRCbG9jayhvYmo6IG9iamVjdCkgOiBvYmogaXMgQ29tbWFuZEJsb2NrIHtcclxuLy8gICAgIHZhciBjb21tYW5kQmxvY2tPYmogOiBDb21tYW5kQmxvY2sgPSA8Q29tbWFuZEJsb2NrPm9iajtcclxuICAgIFxyXG4vLyAgICAgcmV0dXJuIGNvbW1hbmRCbG9ja09iai5tb3VzZURvd24gIT09IHVuZGVmaW5lZDtcclxuLy8gfSIsImltcG9ydCB7IEdhbWVTdGF0ZSB9IGZyb20gXCIuL21haW5cIjtcclxuaW1wb3J0IHsgQmFzZUJsb2NrIH0gZnJvbSBcIi4vQmFzZUJsb2NrXCI7XHJcbmltcG9ydCB7IEZsb3dCbG9ja1R5cGVzIH0gZnJvbSBcIi4vRW51bXNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBGbG93QmxvY2sgZXh0ZW5kcyBCYXNlQmxvY2sge1xyXG4gICAgZ2FtZVN0YXRlOiBHYW1lU3RhdGU7XHJcbiAgICB0eXBlOiBGbG93QmxvY2tUeXBlcztcclxuICAgIHg6IG51bWJlcjtcclxuICAgIHk6IG51bWJlcjtcclxuICAgIHc6IG51bWJlcjtcclxuICAgIGg6IG51bWJlcjtcclxuICAgIG1vdXNlRG93bjogYm9vbGVhbjtcclxuICAgIHNldDogYm9vbGVhbjtcclxuICAgIGltYWdlOiBIVE1MSW1hZ2VFbGVtZW50O1xyXG4gICAgY29uc3RydWN0b3IoR2FtZVN0YXRlOiBHYW1lU3RhdGUsIFg6IG51bWJlciwgWTogbnVtYmVyLCBIOiBudW1iZXIsIFc6IG51bWJlciwgQ29sb3I6IHN0cmluZywgVHlwZTogRmxvd0Jsb2NrVHlwZXMpIHtcclxuICAgICAgICBzdXBlcihHYW1lU3RhdGUsIFgsIFksIEgsIFcsIENvbG9yKTtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZSA9IEdhbWVTdGF0ZTtcclxuICAgICAgICB0aGlzLnR5cGUgPSBUeXBlO1xyXG4gICAgICAgIHRoaXMubW91c2VEb3duID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnNldCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICBzd2l0Y2goVHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIEZsb3dCbG9ja1R5cGVzLlVwOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSBcImRhdGEvdGV4dHVyZXMvVXBBcnJvdy5wbmdcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEZsb3dCbG9ja1R5cGVzLkRvd246XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlLnNyYyA9IFwiZGF0YS90ZXh0dXJlcy9Eb3duQXJyb3cucG5nXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBGbG93QmxvY2tUeXBlcy5MZWZ0OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSBcImRhdGEvdGV4dHVyZXMvTGVmdEFycm93LnBuZ1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgRmxvd0Jsb2NrVHlwZXMuUmlnaHQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlLnNyYyA9IFwiZGF0YS90ZXh0dXJlcy9SaWdodEFycm93LnBuZ1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmJsb2Nrcy5wdXNoKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSgpIDogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMubW91c2VEb3duKSB7XHJcbiAgICAgICAgICAgIHRoaXMueCA9IHRoaXMuZ2FtZVN0YXRlLm1vdXNlWCAtIHRoaXMudy8yO1xyXG4gICAgICAgICAgICB0aGlzLnkgPSB0aGlzLmdhbWVTdGF0ZS5tb3VzZVkgLSB0aGlzLmgvMjtcclxuICAgICAgICAgICAgdGhpcy5zZXQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLm1vdXNlRG93biAmJiAhdGhpcy5zZXQpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5nYW1lU3RhdGUuYmxvY2tzLmluZGV4T2YodGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZVN0YXRlLmJsb2Nrcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkcmF3KCkgOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHgudHJhbnNsYXRlKHRoaXMueCwgdGhpcy55KTtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHguZHJhd0ltYWdlKHRoaXMuaW1hZ2UsIDAsIDApO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC50cmFuc2xhdGUoLXRoaXMueCwgLXRoaXMueSk7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LnN0cm9rZVN0eWxlID0gdGhpcy5jb2xvcjtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHgucmVjdCh0aGlzLngsIHRoaXMueSwgdGhpcy53LCB0aGlzLmgpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBDT05TSURFUjogRXh0ZW5kaW5nIEZsb3dCbG9jayBoZXJlXHJcbmV4cG9ydCBjbGFzcyBGbG93QmxvY2tCdXR0b24gZXh0ZW5kcyBCYXNlQmxvY2sge1xyXG4gICAgZ2FtZVN0YXRlOiBHYW1lU3RhdGU7XHJcbiAgICB4OiBudW1iZXI7XHJcbiAgICB5OiBudW1iZXI7XHJcbiAgICB3OiBudW1iZXI7XHJcbiAgICBoOiBudW1iZXI7XHJcbiAgICBjb2xvcjogc3RyaW5nO1xyXG4gICAgbW91c2VEb3duOiBib29sZWFuO1xyXG4gICAgdHlwZTogRmxvd0Jsb2NrVHlwZXM7XHJcbiAgICBpbWFnZTogSFRNTEltYWdlRWxlbWVudDtcclxuICAgIGNvbnN0cnVjdG9yKEdhbWVTdGF0ZTogR2FtZVN0YXRlLCBYOiBudW1iZXIsIFk6IG51bWJlciwgSDogbnVtYmVyLCBXOiBudW1iZXIsIENvbG9yOiBzdHJpbmcsIFR5cGU6IEZsb3dCbG9ja1R5cGVzKSB7XHJcbiAgICAgICAgc3VwZXIoR2FtZVN0YXRlLCBYLCBZLCBILCBXLCBDb2xvcik7XHJcbiAgICAgICAgdGhpcy50eXBlID0gVHlwZTtcclxuICAgICAgICB0aGlzLm1vdXNlRG93biA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICBzd2l0Y2goVHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIEZsb3dCbG9ja1R5cGVzLlVwOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSBcImRhdGEvdGV4dHVyZXMvVXBBcnJvdy5wbmdcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEZsb3dCbG9ja1R5cGVzLkRvd246XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlLnNyYyA9IFwiZGF0YS90ZXh0dXJlcy9Eb3duQXJyb3cucG5nXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBGbG93QmxvY2tUeXBlcy5MZWZ0OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSBcImRhdGEvdGV4dHVyZXMvTGVmdEFycm93LnBuZ1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgRmxvd0Jsb2NrVHlwZXMuUmlnaHQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlLnNyYyA9IFwiZGF0YS90ZXh0dXJlcy9SaWdodEFycm93LnBuZ1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5ibG9ja3MucHVzaCh0aGlzKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZSgpIDogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMubW91c2VEb3duKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW91c2VEb3duID0gZmFsc2U7XHJcbiAgICAgICAgICAgIG5ldyBGbG93QmxvY2sodGhpcy5nYW1lU3RhdGUsIHRoaXMueCwgdGhpcy55LCB0aGlzLmgsIHRoaXMudywgdGhpcy5Db2xvciwgdGhpcy50eXBlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZHJhdygpIDogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LnRyYW5zbGF0ZSh0aGlzLngsIHRoaXMueSk7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LmRyYXdJbWFnZSh0aGlzLmltYWdlLCAwLCAwKTtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdHgudHJhbnNsYXRlKC10aGlzLngsIC10aGlzLnkpO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC5zdHJva2VTdHlsZSA9IHRoaXMuY29sb3I7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3R4LnJlY3QodGhpcy54LCB0aGlzLnksIHRoaXMudywgdGhpcy5oKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IEdhbWVTdGF0ZSB9IGZyb20gXCIuL21haW5cIjtcclxuaW1wb3J0IHsgQmFzZUJsb2NrIH0gZnJvbSBcIi4vQmFzZUJsb2NrXCI7XHJcbmltcG9ydCB7IENvbW1hbmRCbG9jayB9IGZyb20gXCIuL0NvbW1hbmRCbG9ja1wiO1xyXG5pbXBvcnQgeyBGbG93QmxvY2sgfSBmcm9tIFwiLi9GbG93QmxvY2tcIjtcclxuaW1wb3J0IHsgQ29tbWFuZEJsb2NrVHlwZXMsIEZsb3dCbG9ja1R5cGVzIH0gZnJvbSBcIi4vRW51bXNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBHcmlkQmxvY2sgZXh0ZW5kcyBCYXNlQmxvY2sge1xyXG4gICAgZ2FtZVN0YXRlOiBHYW1lU3RhdGU7XHJcbiAgICB4OiBudW1iZXI7XHJcbiAgICB5OiBudW1iZXI7XHJcbiAgICBoOiBudW1iZXI7XHJcbiAgICB3OiBudW1iZXI7XHJcbiAgICByOiBudW1iZXI7XHJcbiAgICBjOiBudW1iZXI7XHJcbiAgICBjb21tYW5kVHlwZTogQ29tbWFuZEJsb2NrVHlwZXM7XHJcbiAgICBmbG93VHlwZTogRmxvd0Jsb2NrVHlwZXM7XHJcbiAgICBjb2xvcjogc3RyaW5nO1xyXG4gICAgY29uc3RydWN0b3IoR2FtZVN0YXRlOiBHYW1lU3RhdGUsIFg6IG51bWJlciwgWTogbnVtYmVyLCBIOiBudW1iZXIsIFc6IG51bWJlciwgUm93OiBudW1iZXIsIENvbHVtbjogbnVtYmVyLCBDb2xvcjogc3RyaW5nKSB7XHJcbiAgICAgICAgc3VwZXIoR2FtZVN0YXRlLCBYLCBZLCBILCBXLCBDb2xvcik7XHJcbiAgICAgICAgdGhpcy5yID0gUm93O1xyXG4gICAgICAgIHRoaXMuYyA9IENvbHVtbjtcclxuICAgICAgICB0aGlzLmNvbW1hbmRUeXBlID0gQ29tbWFuZEJsb2NrVHlwZXMuRW1wdHk7XHJcbiAgICAgICAgdGhpcy5mbG93VHlwZSA9IEZsb3dCbG9ja1R5cGVzLkVtcHR5O1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmJsb2Nrcy5wdXNoKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSgpIDogdm9pZCB7XHJcbiAgICAgICAgLy8gc2VlIGlmIGNvbW1hbmQgYmxvY2sgaXMgYmVpbmcgZHJvcHBlZCBvbiBlbXB0eSBncmlkIGJsb2NrXHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuYmxvY2tzLmZvckVhY2goYmxvY2sgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYmxvY2sgaW5zdGFuY2VvZiBDb21tYW5kQmxvY2tcclxuICAgICAgICAgICAgICAgIHx8IGJsb2NrIGluc3RhbmNlb2YgRmxvd0Jsb2NrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmxvY2subW91c2VEb3duID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChibG9jay54IDwgdGhpcy54ICsgdGhpcy53ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLnggKyBibG9jay53ID4gdGhpcy54ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLnkgPCB0aGlzLnkgKyB0aGlzLmggJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2suaCArIGJsb2NrLnkgPiB0aGlzLnkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb21tYW5kVHlwZSA9PT0gQ29tbWFuZEJsb2NrVHlwZXMuRW1wdHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIGJsb2NrIGluc3RhbmNlb2YgQ29tbWFuZEJsb2NrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jay54ID0gdGhpcy54O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sueSA9IHRoaXMueTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLnNldCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRUeXBlID0gYmxvY2sudHlwZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmZsb3dUeXBlID09PSBGbG93QmxvY2tUeXBlcy5FbXB0eVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIGJsb2NrIGluc3RhbmNlb2YgRmxvd0Jsb2NrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jay54ID0gdGhpcy54O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sueSA9IHRoaXMueTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLnNldCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZsb3dUeXBlID0gYmxvY2sudHlwZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXcoKSA6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC5maWxsU3R5bGUgPSB0aGlzLmNvbG9yO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmN0eC5maWxsUmVjdCh0aGlzLngsIHRoaXMueSwgdGhpcy53LCB0aGlzLmgpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgR2FtZVN0YXRlIH0gZnJvbSBcIi4vbWFpblwiO1xyXG5pbXBvcnQgeyBHcmlkQmxvY2sgfSBmcm9tIFwiLi9HcmlkQmxvY2tcIjtcclxuaW1wb3J0IHsgQ29tbWFuZEJsb2NrVHlwZXMsIEZsb3dCbG9ja1R5cGVzIH0gZnJvbSBcIi4vRW51bXNcIjtcclxuXHJcbmZ1bmN0aW9uIG1vdmUoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIGJsb2NrOiBHcmlkQmxvY2spIHtcclxuICAgIGNvbnNvbGUubG9nKFwibW92ZVwiKTtcclxuICAgIGdhbWVTdGF0ZS5wcm9ncmFtU3RhY2sucHVzaChmaW5kTmV4dEV4ZWN1dGlvbihnYW1lU3RhdGUsIGJsb2NrKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFuZ2xlKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBibG9jazogR3JpZEJsb2NrKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcImFuZ2xlXCIpO1xyXG4gICAgZ2FtZVN0YXRlLnByb2dyYW1TdGFjay5wdXNoKGZpbmROZXh0RXhlY3V0aW9uKGdhbWVTdGF0ZSwgYmxvY2spKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc3RhcnQoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIGJsb2NrOiBHcmlkQmxvY2spIHtcclxuICAgIGNvbnNvbGUubG9nKFwic3RhcnRcIik7XHJcbiAgICBnYW1lU3RhdGUucHJvZ3JhbVN0YWNrLnB1c2goZmluZE5leHRFeGVjdXRpb24oZ2FtZVN0YXRlLCBibG9jaykpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdG9wVGhyZWFkKGdhbWVTdGF0ZTogR2FtZVN0YXRlKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcInN0b3BwaW5nIHRocmVhZFwiKTtcclxuICAgIGdhbWVTdGF0ZS5wcm9ncmFtU3RhY2sgPSBbXTtcclxuICAgIGdhbWVTdGF0ZS5wcm9ncmFtUnVubmluZyA9IGZhbHNlO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc3RhcnROZXdUaHJlYWQoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHRocmVhZDogbnVtYmVyKSB7XHJcbiAgICAvLyBsb2NhdGUgdGhyZWFkXHJcbiAgICBnYW1lU3RhdGUuYmxvY2tzLmZvckVhY2goYmxvY2sgPT4ge1xyXG4gICAgICAgIGlmIChibG9jayBpbnN0YW5jZW9mIEdyaWRCbG9jaykge1xyXG4gICAgICAgICAgICBpZiAoYmxvY2suY29tbWFuZFR5cGUgPT09IENvbW1hbmRCbG9ja1R5cGVzLlN0YXJ0IC8vJiYgdGhyZWFkTnVtYmVyID09PSB0aHJlYWRcclxuICAgICAgICAgICAgICAgICYmIGJsb2NrLmZsb3dUeXBlICE9PSBGbG93QmxvY2tUeXBlcy5FbXB0eSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy8gc3RhcnQgdGhyZWFkXHJcbiAgICAgICAgICAgICAgICBnYW1lU3RhdGUucHJvZ3JhbVN0YWNrLnB1c2goZmluZE5leHRFeGVjdXRpb24oZ2FtZVN0YXRlLCBibG9jaykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpbmROZXh0RXhlY3V0aW9uKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBibG9jazogR3JpZEJsb2NrKSA6IGFueSB7XHJcbiAgICBsZXQgdGFyZ2V0Um93OiBudW1iZXI7XHJcbiAgICBsZXQgdGFyZ2V0Q29sOiBudW1iZXI7XHJcbiAgICBzd2l0Y2goYmxvY2suZmxvd1R5cGUpIHtcclxuICAgICAgICBjYXNlIEZsb3dCbG9ja1R5cGVzLlVwOlxyXG4gICAgICAgICAgICB0YXJnZXRSb3cgPSBibG9jay5yIC0gMTtcclxuICAgICAgICAgICAgdGFyZ2V0Q29sID0gYmxvY2suYztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBGbG93QmxvY2tUeXBlcy5Eb3duOlxyXG4gICAgICAgICAgICB0YXJnZXRSb3cgPSBibG9jay5yICsgMTtcclxuICAgICAgICAgICAgdGFyZ2V0Q29sID0gYmxvY2suYztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBGbG93QmxvY2tUeXBlcy5SaWdodDpcclxuICAgICAgICAgICAgdGFyZ2V0Q29sID0gYmxvY2suYyArIDE7XHJcbiAgICAgICAgICAgIHRhcmdldFJvdyA9IGJsb2NrLnI7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgRmxvd0Jsb2NrVHlwZXMuTGVmdDpcclxuICAgICAgICAgICAgdGFyZ2V0Q29sID0gYmxvY2suYyAtIDE7XHJcbiAgICAgICAgICAgIHRhcmdldFJvdyA9IGJsb2NrLnI7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG5cclxuICAgIGdhbWVTdGF0ZS5ibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XHJcbiAgICAgICAgaWYgKGJsb2NrIGluc3RhbmNlb2YgR3JpZEJsb2NrKSB7XHJcbiAgICAgICAgICAgIGlmIChibG9jay5yID09PSB0YXJnZXRSb3cgJiYgYmxvY2suYyA9PT0gdGFyZ2V0Q29sXHJcbiAgICAgICAgICAgICAgICAmJiBibG9jay5jb21tYW5kVHlwZSAhPT0gQ29tbWFuZEJsb2NrVHlwZXMuRW1wdHlcclxuICAgICAgICAgICAgICAgICYmIGJsb2NrLmZsb3dUeXBlICE9PSBGbG93QmxvY2tUeXBlcy5FbXB0eSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoKGJsb2NrLmNvbW1hbmRUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBDb21tYW5kQmxvY2tUeXBlcy5BbmdsZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFuZ2xlKGdhbWVTdGF0ZSwgYmxvY2spO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIENvbW1hbmRCbG9ja1R5cGVzLk1vdmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtb3ZlKGdhbWVTdGF0ZSwgYmxvY2spO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIENvbW1hbmRCbG9ja1R5cGVzLlN0YXJ0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RhcnQoZ2FtZVN0YXRlLCBibG9jayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdG9wVGhyZWFkKGdhbWVTdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHN0b3BUaHJlYWQoZ2FtZVN0YXRlKTtcclxufSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuL2RlY2xhcmF0aW9ucy9qc29uLmQudHNcIiAvPlxyXG5pbXBvcnQgeyBCYXNlQmxvY2sgfSBmcm9tIFwiLi9CYXNlQmxvY2tcIjtcclxuaW1wb3J0IHsgSUdhbWVTdGF0ZSB9IGZyb20gXCIuL0lHYW1lU3RhdGVcIjtcclxuaW1wb3J0IGxldmVsMSBmcm9tICcuLi9kYXRhL2xldmVscy9sZXZlbDEuanNvbic7XHJcbmltcG9ydCB7IExldmVsQ3JlYXRvciB9IGZyb20gXCIuL0xldmVsQ3JlYXRvclwiO1xyXG5pbXBvcnQgeyBTZXRVcEV2ZW50TGlzdGVuZXJzIH0gZnJvbSBcIi4vU2V0VXBFdmVudExpc3RlbmVyc1wiO1xyXG5pbXBvcnQgeyBGbG93QmxvY2sgfSBmcm9tIFwiLi9GbG93QmxvY2tcIjtcclxuXHJcbi8vIFRPRE86IGFkZCBjb2RlIG1hdHJpeCBmb3IgcHJvZ3JhbVxyXG4vLyBUT0RPOiBwdXNoIG1vc3QgcmVjZW50bHkgY2xpY2tlZCBjb21tYW5kIC8gZmxvdyBibG9jayB0byB0b3Agb2YgYmxvY2sgYXJyYXkgdG8gcmVuZGVyIGl0IG9uIHRvcCBvZiBldmVyeXRoaW5nIGVsc2VcclxuLy8gVE9ETzogc3dpdGNoIHNwYWNlYmFyIGNvbnRyb2wgYnV0dG9uIHRvIGNsaWNrYWJsZSByYWRpbyBidXR0b25cclxuXHJcbmV4cG9ydCBjbGFzcyBHYW1lU3RhdGUge1xyXG4gICAgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG4gICAgcmVjdDogQ2xpZW50UmVjdCB8IERPTVJlY3Q7XHJcbiAgICBibG9ja3M6IEJhc2VCbG9ja1tdO1xyXG4gICAgbW91c2VYOiBudW1iZXI7XHJcbiAgICBtb3VzZVk6IG51bWJlcjtcclxuICAgIGNvbW1hbmRDb250cm9sOiBib29sZWFuO1xyXG4gICAgZmxvd0NvbnRyb2w6IGJvb2xlYW47XHJcbiAgICBwcm9ncmFtU3RhY2s6IGFueVtdO1xyXG4gICAgcHJvZ3JhbVJ1bm5pbmc6IGJvb2xlYW47XHJcbiAgICBjb25zdHJ1Y3RvcihvYmo/OiBJR2FtZVN0YXRlKSB7XHJcbiAgICAgICAgdGhpcy5jYW52YXMgPSBvYmogJiYgb2JqLmNhbnZhcyB8fCA8SFRNTENhbnZhc0VsZW1lbnQ+IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2FtZVNjcmVlblwiKTtcclxuICAgICAgICB0aGlzLmN0eCA9IG9iaiAmJiBvYmouY3R4IHx8IDxDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ+IHRoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICB0aGlzLnJlY3QgPSBvYmogJiYgb2JqLnJlY3QgfHwgPENsaWVudFJlY3QgfCBET01SZWN0PiB0aGlzLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICB0aGlzLmJsb2NrcyA9IG9iaiAmJiBvYmouYmxvY2tzIHx8IFtdO1xyXG4gICAgICAgIHRoaXMubW91c2VYID0gb2JqICYmIG9iai5tb3VzZVggfHwgMDtcclxuICAgICAgICB0aGlzLm1vdXNlWSA9IG9iaiAmJiBvYmoubW91c2VZIHx8IDA7XHJcbiAgICAgICAgdGhpcy5jb21tYW5kQ29udHJvbCA9IG9iaiAmJiBvYmouY29tbWFuZENvbnRyb2wgfHwgdHJ1ZTtcclxuICAgICAgICB0aGlzLmZsb3dDb250cm9sID0gb2JqICYmIG9iai5mbG93Q29udHJvbCB8fCBmYWxzZTtcclxuICAgICAgICB0aGlzLnByb2dyYW1TdGFjayA9IG9iaiAmJiBvYmoucHJvZ3JhbVN0YWNrIHx8IFtdO1xyXG4gICAgICAgIHRoaXMucHJvZ3JhbVJ1bm5pbmcgPSBvYmogJiYgb2JqLnByb2dyYW1SdW5uaW5nIHx8IGZhbHNlO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBzZXQgdXAgZ2FtZSBzdGF0ZVxyXG52YXIgZ2FtZVN0YXRlID0gbmV3IEdhbWVTdGF0ZSgpO1xyXG5MZXZlbENyZWF0b3IoZ2FtZVN0YXRlLCBsZXZlbDEsIFwibGlnaHRibHVlXCIpO1xyXG5TZXRVcEV2ZW50TGlzdGVuZXJzKGdhbWVTdGF0ZSk7XHJcblxyXG5mdW5jdGlvbiBkcmF3KCkgOiB2b2lkIHtcclxuICAgIGdhbWVTdGF0ZS5jdHguY2xlYXJSZWN0KDAsIDAsIGdhbWVTdGF0ZS5jYW52YXMud2lkdGgsIGdhbWVTdGF0ZS5jYW52YXMuaGVpZ2h0KTtcclxuICAgIGdhbWVTdGF0ZS5jdHguYmVnaW5QYXRoKCk7XHJcblxyXG4gICAgLy8gcmVuZGVyIGFsbCBub24tZmxvdyBibG9ja3MgZmlyc3RcclxuICAgIGdhbWVTdGF0ZS5ibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XHJcbiAgICAgICAgaWYgKCEoYmxvY2sgaW5zdGFuY2VvZiBGbG93QmxvY2spKSB7XHJcbiAgICAgICAgICAgIGJsb2NrLmRyYXcoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyByZW5kZXIgYWxsIGZsb3cgYmxvY2tzIGxhc3QgdG8gbGF5ZXIgdGhlbSBvbiB0b3Agb2YgY29tbWFuZCBibG9ja3NcclxuICAgIGdhbWVTdGF0ZS5ibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XHJcbiAgICAgICAgaWYgKGJsb2NrIGluc3RhbmNlb2YgRmxvd0Jsb2NrKSB7XHJcbiAgICAgICAgICAgIGJsb2NrLmRyYXcoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBnYW1lU3RhdGUuY3R4LnN0cm9rZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGUoKSA6IHZvaWQge1xyXG4gICAgZ2FtZVN0YXRlLmJsb2Nrcy5mb3JFYWNoKGJsb2NrID0+IHtcclxuICAgICAgICBibG9jay51cGRhdGUoKTtcclxuICAgIH0pXHJcbn1cclxuXHJcbnNldEludGVydmFsKGZ1bmN0aW9uKCkgOiB2b2lkIHtcclxuICAgIHVwZGF0ZSgpO1xyXG4gICAgZHJhdygpO1xyXG5cclxuICAgIGlmIChnYW1lU3RhdGUucHJvZ3JhbVN0YWNrLmxlbmd0aCA+IDAgJiYgZ2FtZVN0YXRlLnByb2dyYW1SdW5uaW5nKSB7XHJcbiAgICAgICAgZ2FtZVN0YXRlLnByb2dyYW1TdGFjay5mb3JFYWNoKGNhbGwgPT4ge1xyXG4gICAgICAgICAgICAvLyBmaWd1cmUgb3V0IGhvdyB0byBtYWtlIHRoZXNlIGFzeW5jXHJcbiAgICAgICAgICAgIGNhbGwoKTtcclxuICAgICAgICAgICAgZ2FtZVN0YXRlLnByb2dyYW1TdGFjay5wb3AoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGdhbWVTdGF0ZS5wcm9ncmFtUnVubmluZyA9IGZhbHNlO1xyXG4gICAgfVxyXG59LCAxMik7IiwiaW1wb3J0IHsgR2FtZVN0YXRlIH0gZnJvbSBcIi4vbWFpblwiO1xyXG5pbXBvcnQgeyBHcmlkQmxvY2sgfSBmcm9tIFwiLi9HcmlkQmxvY2tcIjtcclxuaW1wb3J0IHsgQ29tbWFuZEJsb2NrQnV0dG9uIH0gZnJvbSBcIi4vQ29tbWFuZEJsb2NrXCI7XHJcbmltcG9ydCB7IEZsb3dCbG9ja0J1dHRvbiB9IGZyb20gXCIuL0Zsb3dCbG9ja1wiO1xyXG5pbXBvcnQgeyBDb21tYW5kQmxvY2tUeXBlcywgRmxvd0Jsb2NrVHlwZXMgfSBmcm9tIFwiLi9FbnVtc1wiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIExldmVsQ3JlYXRvcihnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgbGV2ZWxPYmo6IG9iamVjdCwgcGFsZXR0ZUNvbG9yOiBzdHJpbmcpIHtcclxuICAgIGxldCB5T2Zmc2V0OiBudW1iZXIgPSA1O1xyXG4gICAgbGV0IHhPZmZzZXQ6IG51bWJlciA9IDU7XHJcbiAgICBsZXQgbWF4WE9mZnNldDogbnVtYmVyID0gMDtcclxuICAgIGxldCBtYXhZT2Zmc2V0OiBudW1iZXIgPSAwO1xyXG5cclxuICAgIC8vIHNldCB1cCBncmlkIGZvciBDb21tYW5kIFBhbGV0dGVcclxuICAgIC8vIGFzc2lnbiByb3cgYW5kIGNvbHVtbiB2YWx1ZXMgdG8gZ3JpZCBibG9ja3NcclxuICAgIGZvciAodmFyIHIgPSAwOyByIDwgbGV2ZWxPYmpbXCJjb21tYW5kX3BhbGV0dGVcIl1bXCJibG9ja19oZWlnaHRcIl07IHIrKykge1xyXG4gICAgICAgIGZvciAodmFyIGMgPSAwOyBjIDwgbGV2ZWxPYmpbXCJjb21tYW5kX3BhbGV0dGVcIl1bXCJibG9ja193aWR0aFwiXTsgYysrKSB7XHJcbiAgICAgICAgICAgIG5ldyBHcmlkQmxvY2soZ2FtZVN0YXRlLCB4T2Zmc2V0LCB5T2Zmc2V0LCA1MCwgNTAsIHIsIGMsIHBhbGV0dGVDb2xvcik7XHJcbiAgICAgICAgICAgIHhPZmZzZXQgKz0gNTU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHlPZmZzZXQgKz0gNTU7XHJcbiAgICAgICAgbWF4WE9mZnNldCA9IHhPZmZzZXQ7XHJcbiAgICAgICAgeE9mZnNldCA9IDU7XHJcbiAgICB9XHJcblxyXG4gICAgbWF4WU9mZnNldCA9IHlPZmZzZXQ7XHJcbiAgICB5T2Zmc2V0ID0gbWF4WU9mZnNldCArIDIwO1xyXG5cclxuICAgIC8vIHNldCB1cCBDb21tYW5kIEJsb2NrIEJ1dHRvbnNcclxuICAgIC8vIENPTlNJREVSOiBBY2NvbW1vZGF0aW5nIGZvciBjb21tYW5kIHBhbGV0dGUgd2lkdGhcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGV2ZWxPYmpbXCJjb21tYW5kX2Jsb2Nrc1wiXS5sZW5ndGg7IGkgKyspIHtcclxuICAgICAgICBzd2l0Y2gobGV2ZWxPYmpbXCJjb21tYW5kX2Jsb2Nrc1wiXVtpXSkge1xyXG4gICAgICAgICAgICBjYXNlIFwic3RhcnRcIjpcclxuICAgICAgICAgICAgICAgIG5ldyBDb21tYW5kQmxvY2tCdXR0b24oZ2FtZVN0YXRlLCB4T2Zmc2V0LCB5T2Zmc2V0LCA1MCwgNTAsIFwidGhpc3RsZVwiLCBDb21tYW5kQmxvY2tUeXBlcy5TdGFydCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIm1vdmVcIjpcclxuICAgICAgICAgICAgICAgIG5ldyBDb21tYW5kQmxvY2tCdXR0b24oZ2FtZVN0YXRlLCB4T2Zmc2V0LCB5T2Zmc2V0LCA1MCwgNTAsIFwidGhpc3RsZVwiLCBDb21tYW5kQmxvY2tUeXBlcy5Nb3ZlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiYW5nbGVcIjpcclxuICAgICAgICAgICAgICAgIG5ldyBDb21tYW5kQmxvY2tCdXR0b24oZ2FtZVN0YXRlLCB4T2Zmc2V0LCB5T2Zmc2V0LCA1MCwgNTAsIFwidGhpc3RsZVwiLCBDb21tYW5kQmxvY2tUeXBlcy5BbmdsZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImxhc2VyXCI6XHJcbiAgICAgICAgICAgICAgICBuZXcgQ29tbWFuZEJsb2NrQnV0dG9uKGdhbWVTdGF0ZSwgeE9mZnNldCwgeU9mZnNldCwgNTAsIDUwLCBcImdyZWVuXCIsIENvbW1hbmRCbG9ja1R5cGVzLkxhc2VyKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwic2NhblwiOlxyXG4gICAgICAgICAgICAgICAgbmV3IENvbW1hbmRCbG9ja0J1dHRvbihnYW1lU3RhdGUsIHhPZmZzZXQsIHlPZmZzZXQsIDUwLCA1MCwgXCJkYXJrYmx1ZVwiLCBDb21tYW5kQmxvY2tUeXBlcy5TY2FuKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiZ3JhcHBsZVwiOlxyXG4gICAgICAgICAgICAgICAgbmV3IENvbW1hbmRCbG9ja0J1dHRvbihnYW1lU3RhdGUsIHhPZmZzZXQsIHlPZmZzZXQsIDUwLCA1MCwgXCJtYXJvb25cIiwgQ29tbWFuZEJsb2NrVHlwZXMuR3JhcHBsZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgeE9mZnNldCArPSA1NTtcclxuICAgIH1cclxuXHJcbiAgICB4T2Zmc2V0ID0gbWF4WE9mZnNldCArIDIwO1xyXG4gICAgeU9mZnNldCA9IDU7XHJcblxyXG4gICAgLy8gc2V0IHVwIEZsb3cgQmxvY2sgQnV0dG9uc1xyXG4gICAgLy8gQ09OU0lERVI6IEFjY29tbW9kYXRpbmcgZm9yIGNvbW1hbmQgcGFsZXR0ZSBoZWlnaHRcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGV2ZWxPYmpbXCJmbG93X2Jsb2Nrc1wiXS5sZW5ndGg7IGkgKyspIHtcclxuICAgICAgICBzd2l0Y2gobGV2ZWxPYmpbXCJmbG93X2Jsb2Nrc1wiXVtpXSkge1xyXG4gICAgICAgICAgICBjYXNlIFwidXBcIjpcclxuICAgICAgICAgICAgICAgIG5ldyBGbG93QmxvY2tCdXR0b24oZ2FtZVN0YXRlLCB4T2Zmc2V0LCB5T2Zmc2V0LCA1MCwgNTAsIFwieWVsbG93XCIsIEZsb3dCbG9ja1R5cGVzLlVwKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwibGVmdFwiOlxyXG4gICAgICAgICAgICAgICAgbmV3IEZsb3dCbG9ja0J1dHRvbihnYW1lU3RhdGUsIHhPZmZzZXQsIHlPZmZzZXQsIDUwLCA1MCwgXCJ5ZWxsb3dcIiwgRmxvd0Jsb2NrVHlwZXMuTGVmdCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInJpZ2h0XCI6XHJcbiAgICAgICAgICAgICAgICBuZXcgRmxvd0Jsb2NrQnV0dG9uKGdhbWVTdGF0ZSwgeE9mZnNldCwgeU9mZnNldCwgNTAsIDUwLCBcInllbGxvd1wiLCBGbG93QmxvY2tUeXBlcy5SaWdodCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImRvd25cIjpcclxuICAgICAgICAgICAgICAgIG5ldyBGbG93QmxvY2tCdXR0b24oZ2FtZVN0YXRlLCB4T2Zmc2V0LCB5T2Zmc2V0LCA1MCwgNTAsIFwieWVsbG93XCIsIEZsb3dCbG9ja1R5cGVzLkRvd24pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHlPZmZzZXQgKz0gNTU7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBHYW1lU3RhdGUgfSBmcm9tIFwiLi9tYWluXCI7XHJcbmltcG9ydCB7IENvbW1hbmRCbG9jaywgQ29tbWFuZEJsb2NrQnV0dG9uIH0gZnJvbSBcIi4vQ29tbWFuZEJsb2NrXCI7XHJcbmltcG9ydCB7IEdyaWRCbG9jayB9IGZyb20gXCIuL0dyaWRCbG9ja1wiO1xyXG5pbXBvcnQgeyBGbG93QmxvY2ssIEZsb3dCbG9ja0J1dHRvbiB9IGZyb20gXCIuL0Zsb3dCbG9ja1wiO1xyXG5pbXBvcnQgeyBDb21tYW5kQmxvY2tUeXBlcywgRmxvd0Jsb2NrVHlwZXMgfSBmcm9tIFwiLi9FbnVtc1wiO1xyXG5pbXBvcnQgeyBzdGFydE5ld1RocmVhZCB9IGZyb20gXCIuL1Byb2dyYW1FeGVjdXRpb25cIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBTZXRVcEV2ZW50TGlzdGVuZXJzKGdhbWVTdGF0ZTogR2FtZVN0YXRlKSB7XHJcbiAgICBnYW1lU3RhdGUuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGZ1bmN0aW9uKCkgOiB2b2lkIHtcclxuICAgICAgICAvLyBDb2xsaXNpb24gZGV0ZWN0aW9uIGJldHdlZW4gY2xpY2tlZCBvZmZzZXQgYW5kIGJsb2NrLlxyXG4gICAgICAgIGdhbWVTdGF0ZS5ibG9ja3MuZm9yRWFjaChmdW5jdGlvbihibG9jaykgOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKGdhbWVTdGF0ZS5tb3VzZVkgPiBibG9jay55ICYmIGdhbWVTdGF0ZS5tb3VzZVkgPCBibG9jay55ICsgYmxvY2suaFxyXG4gICAgICAgICAgICAgICAgJiYgZ2FtZVN0YXRlLm1vdXNlWCA+IGJsb2NrLnggJiYgZ2FtZVN0YXRlLm1vdXNlWCA8IGJsb2NrLnggKyBibG9jay53KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmxvY2sgaW5zdGFuY2VvZiBDb21tYW5kQmxvY2sgJiYgZ2FtZVN0YXRlLmNvbW1hbmRDb250cm9sXHJcbiAgICAgICAgICAgICAgICAgICAgfHwgYmxvY2sgaW5zdGFuY2VvZiBDb21tYW5kQmxvY2tCdXR0b24gJiYgZ2FtZVN0YXRlLmNvbW1hbmRDb250cm9sXHJcbiAgICAgICAgICAgICAgICAgICAgfHwgYmxvY2sgaW5zdGFuY2VvZiBGbG93QmxvY2sgJiYgZ2FtZVN0YXRlLmZsb3dDb250cm9sXHJcbiAgICAgICAgICAgICAgICAgICAgfHwgYmxvY2sgaW5zdGFuY2VvZiBGbG93QmxvY2tCdXR0b24gJiYgZ2FtZVN0YXRlLmZsb3dDb250cm9sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmxvY2subW91c2VEb3duID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJsb2NrIGluc3RhbmNlb2YgR3JpZEJsb2NrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgcmFkaW8gYnV0dG9uIGZvciBmbG93IG9yIGNvbW1hbmQgY29udHJvbFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChnYW1lU3RhdGUuY29tbWFuZENvbnRyb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2suY29tbWFuZFR5cGUgPSBDb21tYW5kQmxvY2tUeXBlcy5FbXB0eTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZ2FtZVN0YXRlLmZsb3dDb250cm9sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLmZsb3dUeXBlID0gRmxvd0Jsb2NrVHlwZXMuRW1wdHk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0sIGZhbHNlKTtcclxuXHJcbiAgICBnYW1lU3RhdGUuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBmdW5jdGlvbigpIDogdm9pZCB7XHJcbiAgICAgICAgZ2FtZVN0YXRlLmJsb2Nrcy5mb3JFYWNoKGZ1bmN0aW9uKGJsb2NrKSB7XHJcbiAgICAgICAgICAgIGlmIChibG9jayBpbnN0YW5jZW9mIENvbW1hbmRCbG9ja1xyXG4gICAgICAgICAgICAgICAgfHwgYmxvY2sgaW5zdGFuY2VvZiBGbG93QmxvY2spIHtcclxuICAgICAgICAgICAgICAgIGlmIChibG9jay5tb3VzZURvd24pIHtcclxuICAgICAgICAgICAgICAgICAgICBibG9jay5tb3VzZURvd24gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9LCBmYWxzZSk7XHJcblxyXG4gICAgZ2FtZVN0YXRlLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBmdW5jdGlvbihldnQ6IE1vdXNlRXZlbnQpIDogdm9pZCB7XHJcbiAgICAgICAgZ2FtZVN0YXRlLm1vdXNlWCA9IChldnQuY2xpZW50WCAtIGdhbWVTdGF0ZS5yZWN0LmxlZnQpIC8gKGdhbWVTdGF0ZS5yZWN0LnJpZ2h0IC0gZ2FtZVN0YXRlLnJlY3QubGVmdCkgKiBnYW1lU3RhdGUuY2FudmFzLndpZHRoO1xyXG4gICAgICAgIGdhbWVTdGF0ZS5tb3VzZVkgPSAoZXZ0LmNsaWVudFkgLSBnYW1lU3RhdGUucmVjdC50b3ApIC8gKGdhbWVTdGF0ZS5yZWN0LmJvdHRvbSAtIGdhbWVTdGF0ZS5yZWN0LnRvcCkgKiBnYW1lU3RhdGUuY2FudmFzLmhlaWdodDtcclxuICAgIH0sIGZhbHNlKTtcclxuXHJcbiAgICB3aW5kb3cub25rZXl1cCA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAvLyBpLmUuIFNwYWNlQmFyIHByZXNzZWRcclxuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAzMikge1xyXG4gICAgICAgICAgICBpZiAoZ2FtZVN0YXRlLmZsb3dDb250cm9sKSB7XHJcbiAgICAgICAgICAgICAgICBnYW1lU3RhdGUuZmxvd0NvbnRyb2wgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGdhbWVTdGF0ZS5jb21tYW5kQ29udHJvbCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNvbW1hbmQgQ29udHJvbCFcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZ2FtZVN0YXRlLmNvbW1hbmRDb250cm9sKSB7XHJcbiAgICAgICAgICAgICAgICBnYW1lU3RhdGUuY29tbWFuZENvbnRyb2wgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGdhbWVTdGF0ZS5mbG93Q29udHJvbCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZsb3cgQ29udHJvbCFcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGkuZS4gUyBrZXkgcHJlc3NlZFxyXG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IDgzKSB7XHJcbiAgICAgICAgICAgIGlmICghZ2FtZVN0YXRlLnByb2dyYW1SdW5uaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBnYW1lU3RhdGUucHJvZ3JhbVJ1bm5pbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgc3RhcnROZXdUaHJlYWQoZ2FtZVN0YXRlLCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=